<!DOCTYPE html>
<html>
<head>
    <style>
body {
  background-color: #CCFFFF;
}

p {
  max-width: 1000px;
  font-size: medium;
  font-family: 'Times New Roman', Times, serif;
  margin-top: 20px;
  margin-bottom: 0px;
  margin-left: 4rem;
}

p.topleveltext {
  max-width: 1000px;
  font-size: medium;
  font-family: 'Times New Roman', Times, serif;
  margin-top: 20px;
  margin-bottom: 0px;
  margin-left: 0.5rem;
}

.topleveltext {
  margin-left: 0.5rem;
  margin-top: 30px;
}

.header {
  margin-left: 0.5rem;
  margin-top: 20px;
  margin-bottom: 0px;
  font-size: x-large;
  font-weight: bold;
}

ul {
  margin-top: 0px;
  margin-block-start: 0px;
  margin-bottom: 0px;
  margin-block-end: 0px;
}

li {
  margin-block-start: 0px;
  margin-left: 0px;
}

canvas {
  border:1px solid #003366; position: -webkit-sticky;
  position: sticky;
  top: 20px;
  left: 20px;
  bottom: 20px;
  margin-left: 0.5rem;
  z-index: 5;
  box-shadow: 5px 5px 8px gray;
}

.settingheader1 {
  font-size: large;
  font-weight: bold;
  margin-top: 10px;
  margin-bottom: 0px;
  margin-left: 0.5rem;
  cursor: pointer; 
}

.settingheader2 {
  font-size: medium;
  font-weight: bold;
  margin-top: 10px;
  margin-bottom: 0px;
  margin-left: 1.6rem;
  cursor: pointer; 
}

.settingheader3 {
  font-size: small;
  font-weight: bold;
  margin-top: 10px;
  margin-bottom: 0px;
  margin-left: 2.8rem;
  cursor: pointer; 
}

.slidecontainer {
  width: 100%; 
  margin-top: 0px;
  margin-bottom: 0px;
  margin-left: 2.8em;
}

.level0element {
  margin-left: 0rem;
}

.level4element {
  margin-left: 4rem;
}

.level5element {
  margin-left: 5.2rem;
}

.slider {
  -webkit-appearance: none;  
  appearance: none;
  width: 20em; 
  height: 15px; 
  border-radius: 5px;
  background: #66FF99; 
  outline: none; 
  opacity: 0.7; 
  -webkit-transition: .2s; 
  transition: opacity .2s;
  margin-top: 0px;
  margin-bottom: 0px;
}

.slider:hover {
  opacity: 1; 
}

.slider:hover:disabled {
  opacity: 0.7; 
}

.slider:disabled::-webkit-slider-thumb {
  background: #666666;
  cursor: default;  
}

.slider:disabled::-moz-range-thumb {
  background: #666666; 
  cursor: default; 
}

.slider::-webkit-slider-thumb {
  -webkit-appearance: none; 
  appearance: none;
  width: 20px; 
  height: 20px; 
  border-radius: 50%;
  background: #003366; 
  cursor: pointer; 
}

.slider::-moz-range-thumb {
  width: 20px; 
  height: 20px; 
  border-radius: 50%;
  background: #003366; 
  cursor: pointer; 
}

input {
  margin-top: 20px;
  margin-bottom: 10px;
}

input[type="time"] {
  font-size: small;
  margin-left: 2.8rem;
}

input.topleveltext[type="checkbox"] {
  margin-left: 0.5rem;
}

input[type="range"]:disabled {
  background: #111111;
}

button {
  margin-left: 2.8rem;
  margin-top: 20px;
  margin-bottom: 10px;
  font-size: small;
}

/* Tooltip container */
.tooltip {
  position: relative;
  display: inline-block;
  margin-top: 0px;
  margin-bottom: 0px;
  font-size: medium;
  display: inline-block;
  /*border-bottom: 1px dotted black;*/ /* If you want dots under the hoverable text */
}

.tooltip:hover{
  cursor: help;
}

/* Tooltip text */
.tooltip .tooltiptext {
  visibility: hidden;
  width: 20em;
  background-color: white;
  color: black;
  text-align: left;
  padding: 5px 5px 5px 5px;
  border-radius: 6px;
  border:1px solid #003366;
  box-shadow: 5px 5px 8px gray;
  top: -5px;
  left: 105%;
 
  /* Position the tooltip text - see examples below! */
  position: absolute;
  z-index: 1;
}

/* Show the tooltip text when you mouse over the tooltip container */
.tooltip:hover .tooltiptext {
  visibility: visible;
}

        </style>
<script type="text/javascript" src="TimeGiver.js"></script>
<script type="text/javascript" src="xytorgb.js"></script>
<script type= "text/javascript" src="jshue.js"></script>
<script>
var hue = jsHue();

function getCookie(cname) {
  var name = cname + "=";
  var decodedCookie = decodeURIComponent(document.cookie);
  var ca = decodedCookie.split(';');
  for(var i = 0; i < ca.length; i++) {
    var c = ca[i];
    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";}

function setCookie(cname,cvalue,exdays) {
  var d = new Date();
  d.setTime(d.getTime() + (exdays*24*60*60*1000));
  var expires = "expires=" + d.toGMTString();
  document.cookie = (cname + "=" + cvalue + ";" + expires + "SameSite=Lax");
}

function toggleelement(elementid) {
  var x = document.getElementById(elementid);
  if (x.style.display === "none") {
    x.style.display = "block";
  } else {
    x.style.display = "none";
  }
}

function togglearrow(elementid) {
  var x = document.getElementById(elementid);
  if (x.style.display === "none") {
    x.style.display = "inline-block";
  } else {
    x.style.display = "none";
  }
}

function toggleautoonlightlistitem(name_esc) {
  //console.log ("toggle has been triggered for: " + name_esc)
  var autoondiv = ("autoondiv_" + name_esc)
  var whitecheckboxchecked = ("#whitelightcheckbox_" + name_esc + ":checked")
  var bluecheckboxchecked = ("#bluelightcheckbox_" + name_esc + ":checked")
  var yellowcheckboxchecked = ("#yellowlightcheckbox_" + name_esc + ":checked")
  var x = document.getElementById(autoondiv);
  if (document.querySelector(bluecheckboxchecked) !== null || document.querySelector(yellowcheckboxchecked) !== null || document.querySelector(whitecheckboxchecked) !== null){
    x.style.display = "block";
  } else {
    x.style.display = "none";
  }
}

function toggleoverridelistitem(lightname_esc) {
  //console.log ("toggle has been triggered for: " + lightname_esc)
  var autoondiv = ("autoondiv_" + lightname_esc)
  var whitecheckboxchecked = ("#whitelightcheckbox_" + lightname_esc + ":checked")
  var bluecheckboxchecked = ("#bluelightcheckbox_" + lightname_esc + ":checked")
  var yellowcheckboxchecked = ("#yellowlightcheckbox_" + lightname_esc + ":checked")
  for (i in switches){
    var sensorname = (switches[i].name);
    var sensorname_esc = (sensorname.replace(/\s+/g, ''));
    var sensorname_esc = (sensorname_esc.replace(/'/g, ''));
    var productname = switches[i].productname;
    var overridesensordiv = ("overridesensordiv_" + sensorname_esc)
    var overridecheckboxlist = ("overridecheckboxlist_" + sensorname_esc)
    var overridecheckbox = (overridesensordiv + "_light_" + lightname_esc)
    var x = document.getElementById(overridecheckbox);
    if (x){
      if (document.querySelector(bluecheckboxchecked) !== null || document.querySelector(yellowcheckboxchecked) !== null || document.querySelector(whitecheckboxchecked) !== null){
        x.style.display = "block";
      } else {
        x.style.display = "none";
      }
    }
  }
}

function toggleoverridelist() {
  for (i in switches){
    //console.log ("toggle has been triggered for: " + sensorname_esc)
    var sensorname = (switches[i].name);
    var sensorname_esc = (sensorname.replace(/\s+/g, ''));
    var sensorname_esc = (sensorname_esc.replace(/'/g, ''));
    var overridesensordiv = ("overridesensordiv_" + sensorname_esc)
    var overridecheckbox = ("overridecheckbox_" + sensorname_esc)
    var overridecheckboxlist = ("overridecheckboxlist_" + sensorname_esc)
    var overridecheckboxlistchecked = ("#overridecheckbox_" + sensorname_esc + ":checked")
    var x = document.getElementById(overridecheckboxlist);
    if (x){
      if (document.querySelector(overridecheckboxlistchecked) !== null){
        x.style.display = "block";
      } else {
        x.style.display = "none";
      }
    }
  }
}

function listswitch(color, name){
  if (color.includes("blue")){
    //console.log (color)
    document.getElementById("yellow" + name).checked = false
    document.getElementById("white" + name).checked = false
  } else if (color.includes("yellow")) {
    //console.log (color)
    document.getElementById("blue" + name).checked = false
    document.getElementById("white" + name).checked = false
  } else if (color.includes("white")) {
    //console.log (color)
    document.getElementById("blue" + name).checked = false
    document.getElementById("yellow" + name).checked = false
  }
}

function savesettings(){
  setCookie("wake_time_var_cookie", (document.getElementById("wake_time_var").value), 365);
  setCookie("bed_time_var_cookie", (document.getElementById("bed_time_var").value), 365);
  setCookie("max_bright_var_cookie", (document.getElementById("max_bright_var").value), 365);
  setCookie("min_bright_var_cookie", (document.getElementById("min_bright_var").value), 365);
  setCookie("max_CCT_var_cookie", (document.getElementById("max_CCT_var").value), 365);
  setCookie("min_CCT_var_cookie", (document.getElementById("min_CCT_var").value), 365);
  setCookie("wake_offset_var_cookie", (document.getElementById("wake_offset_var").value), 365);
  setCookie("bed_offset_var_cookie", (document.getElementById("bed_offset_var").value), 365);
  setCookie("rise_length_bright_var_cookie", (document.getElementById("rise_length_bright_var").value), 365);
  setCookie("rise_length_bright_mult_var_cookie", (document.getElementById("rise_length_bright_mult_var").value), 365);
  setCookie("set_length_bright_var_cookie", (document.getElementById("set_length_bright_var").value), 365);
  setCookie("set_length_bright_mult_var_cookie", (document.getElementById("set_length_bright_mult_var").value), 365);
  setCookie("rise_length_CCT_mult_var_cookie", (document.getElementById("rise_length_CCT_mult_var").value), 365);
  setCookie("rise_length_CCT_var_cookie", (document.getElementById("rise_length_CCT_var").value), 365);
  setCookie("set_length_CCT_mult_var_cookie", (document.getElementById("set_length_CCT_mult_var").value), 365);
  setCookie("set_length_CCT_var_cookie", (document.getElementById("set_length_CCT_var").value), 365);
  setCookie("rise_slope_bright_var_cookie", (document.getElementById("rise_slope_bright_var").value), 365);
  setCookie("set_slope_bright_var_cookie", (document.getElementById("set_slope_bright_var").value), 365);
  setCookie("rise_slope_CCT_var_cookie", (document.getElementById("rise_slope_CCT_var").value), 365);
  setCookie("set_slope_CCT_var_cookie", (document.getElementById("set_slope_CCT_var").value), 365);
  setCookie("max_bright_yellow_var_cookie", (document.getElementById("max_bright_yellow_var").value), 365);
  setCookie("min_bright_yellow_var_cookie", (document.getElementById("min_bright_yellow_var").value), 365);
  setCookie("max_bright_blue_var_cookie", (document.getElementById("max_bright_blue_var").value), 365);
  setCookie("min_bright_blue_var_cookie", (document.getElementById("min_bright_blue_var").value), 365);
  setCookie("max_scatdist_var_cookie", (document.getElementById("max_scatdist_var").value), 365);
  setCookie("min_scatdist_var_cookie", (document.getElementById("min_scatdist_var").value), 365);
  setCookie("max_scatangshift_var_cookie", (document.getElementById("max_scatangshift_var").value), 365);
  setCookie("min_scatangshift_var_cookie", (document.getElementById("min_scatangshift_var").value), 365);
  setCookie("rise_length_bright_yellow_var_cookie", (document.getElementById("rise_length_bright_yellow_var").value), 365);
  setCookie("rise_length_bright_yellow_mult_var_cookie", (document.getElementById("rise_length_bright_yellow_mult_var").value), 365);
  setCookie("set_length_bright_yellow_var_cookie", (document.getElementById("set_length_bright_yellow_var").value), 365);
  setCookie("set_length_bright_yellow_mult_var_cookie", (document.getElementById("set_length_bright_yellow_mult_var").value), 365);
  setCookie("rise_length_bright_blue_var_cookie", (document.getElementById("rise_length_bright_blue_var").value), 365);
  setCookie("rise_length_bright_blue_mult_var_cookie", (document.getElementById("rise_length_bright_blue_mult_var").value), 365);
  setCookie("set_length_bright_blue_var_cookie", (document.getElementById("set_length_bright_blue_var").value), 365);
  setCookie("set_length_bright_blue_mult_var_cookie", (document.getElementById("set_length_bright_blue_mult_var").value), 365);
  setCookie("rise_length_scatdist_mult_var_cookie", (document.getElementById("rise_length_scatdist_mult_var").value), 365);
  setCookie("rise_length_scatdist_var_cookie", (document.getElementById("rise_length_scatdist_var").value), 365);
  setCookie("set_length_scatdist_mult_var_cookie", (document.getElementById("set_length_scatdist_mult_var").value), 365);
  setCookie("set_length_scatdist_var_cookie", (document.getElementById("set_length_scatdist_var").value), 365);
  setCookie("rise_length_scatangshift_var_cookie", (document.getElementById("rise_length_scatangshift_var").value), 365);
  setCookie("rise_length_scatangshift_mult_var_cookie", (document.getElementById("rise_length_scatangshift_mult_var").value), 365);
  setCookie("set_length_scatangshift_var_cookie", (document.getElementById("set_length_scatangshift_var").value), 365);
  setCookie("set_length_scatangshift_mult_var_cookie", (document.getElementById("set_length_scatangshift_mult_var").value), 365);
  setCookie("rise_slope_scatdist_var_cookie", (document.getElementById("rise_slope_scatdist_var").value), 365);
  setCookie("set_slope_scatdist_var_cookie", (document.getElementById("set_slope_scatdist_var").value), 365);
  setCookie("rise_slope_scatangshift_var_cookie", (document.getElementById("rise_slope_scatangshift_var").value), 365);
  setCookie("set_slope_scatangshift_var_cookie", (document.getElementById("set_slope_scatangshift_var").value), 365);
  setCookie("rise_slope_bright_yellow_var_cookie", (document.getElementById("rise_slope_bright_yellow_var").value), 365);
  setCookie("set_slope_bright_yellow_var_cookie", (document.getElementById("set_slope_bright_yellow_var").value), 365);
  setCookie("rise_slope_bright_blue_var_cookie", (document.getElementById("rise_slope_bright_blue_var").value), 365);
  setCookie("set_slope_bright_blue_var_cookie", (document.getElementById("set_slope_bright_blue_var").value), 365);
  alert ("Your current TimeGiver settings have been saved by your browser and can be reloaded at any time by pressing 'Restore Saved Settings'!")
}

function restoresettings(){
  var wake_time_var_cookie = getCookie ("wake_time_var_cookie");
  if (wake_time_var_cookie) {document.getElementById("wake_time_var").value = wake_time_var_cookie;};
  var bed_time_var_cookie = getCookie ("bed_time_var_cookie");
  if (bed_time_var_cookie) {document.getElementById("bed_time_var").value = bed_time_var_cookie;};
  var max_bright_var_cookie = getCookie ("max_bright_var_cookie");
  if (max_bright_var_cookie) {document.getElementById("max_bright_var").value = max_bright_var_cookie;};
  var min_bright_var_cookie = getCookie ("min_bright_var_cookie");
  if (min_bright_var_cookie) {document.getElementById("min_bright_var").value = min_bright_var_cookie;};
  var max_CCT_var_cookie = getCookie ("max_CCT_var_cookie");
  if (max_CCT_var_cookie) {document.getElementById("max_CCT_var").value = max_CCT_var_cookie;};
  var min_CCT_var_cookie = getCookie ("min_CCT_var_cookie");
  if (min_CCT_var_cookie) {document.getElementById("min_CCT_var").value = min_CCT_var_cookie;};
  var wake_offset_var_cookie = getCookie ("wake_offset_var_cookie");
  if (wake_offset_var_cookie) {document.getElementById("wake_offset_var").value = wake_offset_var_cookie;};
  var bed_offset_var_cookie = getCookie ("bed_offset_var_cookie");
  if (bed_offset_var_cookie) {document.getElementById("bed_offset_var").value = bed_offset_var_cookie;};
  var rise_length_bright_var_cookie = getCookie ("rise_length_bright_var_cookie");
  if (rise_length_bright_var_cookie) {document.getElementById("rise_length_bright_var").value = rise_length_bright_var_cookie;};
  var rise_length_bright_mult_var_cookie = getCookie ("rise_length_bright_mult_var_cookie");
  if (rise_length_bright_mult_var_cookie) {document.getElementById("rise_length_bright_mult_var").value = rise_length_bright_mult_var_cookie;};
  var set_length_bright_var_cookie = getCookie ("set_length_bright_var_cookie");
  if (set_length_bright_var_cookie) {document.getElementById("set_length_bright_var").value = set_length_bright_var_cookie;};
  var set_length_bright_mult_var_cookie = getCookie ("set_length_bright_mult_var_cookie");
  if (set_length_bright_mult_var_cookie) {document.getElementById("set_length_bright_mult_var").value = set_length_bright_mult_var_cookie;};
  var rise_length_CCT_mult_var_cookie = getCookie ("rise_length_CCT_mult_var_cookie");
  if (rise_length_CCT_mult_var_cookie) {document.getElementById("rise_length_CCT_mult_var").value = rise_length_CCT_mult_var_cookie;};
  var rise_length_CCT_var_cookie = getCookie ("rise_length_CCT_var_cookie");
  if (rise_length_CCT_var_cookie) {document.getElementById("rise_length_CCT_var").value = rise_length_CCT_var_cookie;};
  var set_length_CCT_mult_var_cookie = getCookie ("set_length_CCT_mult_var_cookie");
  if (set_length_CCT_mult_var_cookie) {document.getElementById("set_length_CCT_mult_var").value = set_length_CCT_mult_var_cookie;};
  var set_length_CCT_var_cookie = getCookie ("set_length_CCT_var_cookie");
  if (set_length_CCT_var_cookie) {document.getElementById("set_length_CCT_var").value = set_length_CCT_var_cookie;};
  var rise_slope_bright_var_cookie = getCookie ("rise_slope_bright_var_cookie");
  if (rise_slope_bright_var_cookie) {document.getElementById("rise_slope_bright_var").value = rise_slope_bright_var_cookie;};
  var set_slope_bright_var_cookie = getCookie ("set_slope_bright_var_cookie");
  if (set_slope_bright_var_cookie) {document.getElementById("set_slope_bright_var").value = set_slope_bright_var_cookie;};
  var rise_slope_CCT_var_cookie = getCookie ("rise_slope_CCT_var_cookie");
  if (rise_slope_CCT_var_cookie) {document.getElementById("rise_slope_CCT_var").value = rise_slope_CCT_var_cookie;};
  var set_slope_CCT_var_cookie = getCookie ("set_slope_CCT_var_cookie");
  if (set_slope_CCT_var_cookie) {document.getElementById("set_slope_CCT_var").value = set_slope_CCT_var_cookie;};
  var max_bright_yellow_var_cookie = getCookie ("max_bright_yellow_var_cookie");
  if (max_bright_yellow_var_cookie) {document.getElementById("max_bright_yellow_var").value = max_bright_yellow_var_cookie;};
  var min_bright_yellow_var_cookie = getCookie ("min_bright_yellow_var_cookie");
  if (min_bright_yellow_var_cookie) {document.getElementById("min_bright_yellow_var").value = min_bright_yellow_var_cookie;};
  var max_bright_blue_var_cookie = getCookie ("max_bright_blue_var_cookie");
  if (max_bright_blue_var_cookie) {document.getElementById("max_bright_blue_var").value = max_bright_blue_var_cookie;};
  var min_bright_blue_var_cookie = getCookie ("min_bright_blue_var_cookie");
  if (min_bright_blue_var_cookie) {document.getElementById("min_bright_blue_var").value = min_bright_blue_var_cookie;};
  var max_scatdist_var_cookie = getCookie ("max_scatdist_var_cookie");
  if (max_scatdist_var_cookie) {document.getElementById("max_scatdist_var").value = max_scatdist_var_cookie;};
  var min_scatdist_var_cookie = getCookie ("min_scatdist_var_cookie");
  if (min_scatdist_var_cookie) {document.getElementById("min_scatdist_var").value = min_scatdist_var_cookie;};
  var max_scatangshift_var_cookie = getCookie ("max_scatangshift_var_cookie");
  if (max_scatangshift_var_cookie) {document.getElementById("max_scatangshift_var").value = max_scatangshift_var_cookie;};
  var min_scatangshift_var_cookie = getCookie ("min_scatangshift_var_cookie");
  if (min_scatangshift_var_cookie) {document.getElementById("min_scatangshift_var").value = min_scatangshift_var_cookie;};
  var rise_length_bright_yellow_var_cookie = getCookie ("rise_length_bright_yellow_var_cookie");
  if (rise_length_bright_yellow_var_cookie) {document.getElementById("rise_length_bright_yellow_var").value = rise_length_bright_yellow_var_cookie;};
  var rise_length_bright_yellow_mult_var_cookie = getCookie ("rise_length_bright_yellow_mult_var_cookie");
  if (rise_length_bright_yellow_mult_var_cookie) {document.getElementById("rise_length_bright_yellow_mult_var").value = rise_length_bright_yellow_mult_var_cookie;};
  var set_length_bright_yellow_var_cookie = getCookie ("set_length_bright_yellow_var_cookie");
  if (set_length_bright_yellow_var_cookie) {document.getElementById("set_length_bright_yellow_var").value = set_length_bright_yellow_var_cookie;};
  var set_length_bright_yellow_mult_var_cookie = getCookie ("set_length_bright_yellow_mult_var_cookie");
  if (set_length_bright_yellow_mult_var_cookie) {document.getElementById("set_length_bright_yellow_mult_var").value = set_length_bright_yellow_mult_var_cookie;};
  var rise_length_bright_blue_var_cookie = getCookie ("rise_length_bright_blue_var_cookie");
  if (rise_length_bright_blue_var_cookie) {document.getElementById("rise_length_bright_blue_var").value = rise_length_bright_blue_var_cookie;};
  var rise_length_bright_blue_mult_var_cookie = getCookie ("rise_length_bright_blue_mult_var_cookie");
  if (rise_length_bright_blue_mult_var_cookie) {document.getElementById("rise_length_bright_blue_mult_var").value = rise_length_bright_blue_mult_var_cookie;};
  var set_length_bright_blue_var_cookie = getCookie ("set_length_bright_blue_var_cookie");
  if (set_length_bright_blue_var_cookie) {document.getElementById("set_length_bright_blue_var").value = set_length_bright_blue_var_cookie;};
  var set_length_bright_blue_mult_var_cookie = getCookie ("set_length_bright_blue_mult_var_cookie");
  if (set_length_bright_blue_mult_var_cookie) {document.getElementById("set_length_bright_blue_mult_var").value = set_length_bright_blue_mult_var_cookie;};
  var rise_length_scatdist_mult_var_cookie = getCookie ("rise_length_scatdist_mult_var_cookie");
  if (rise_length_scatdist_mult_var_cookie) {document.getElementById("rise_length_scatdist_mult_var").value = rise_length_scatdist_mult_var_cookie;};
  var rise_length_scatdist_var_cookie = getCookie ("rise_length_scatdist_var_cookie");
  if (rise_length_scatdist_var_cookie) {document.getElementById("rise_length_scatdist_var").value = rise_length_scatdist_var_cookie;};
  var set_length_scatdist_mult_var_cookie = getCookie ("set_length_scatdist_mult_var_cookie");
  if (set_length_scatdist_mult_var_cookie) {document.getElementById("set_length_scatdist_mult_var").value = set_length_scatdist_mult_var_cookie;};
  var set_length_scatdist_var_cookie = getCookie ("set_length_scatdist_var_cookie");
  if (set_length_scatdist_var_cookie) {document.getElementById("set_length_scatdist_var").value = set_length_scatdist_var_cookie;};
  var rise_length_scatangshift_var_cookie = getCookie ("rise_length_scatangshift_var_cookie");
  if (rise_length_scatangshift_var_cookie) {document.getElementById("rise_length_scatangshift_var").value = rise_length_scatangshift_var_cookie;};
  var rise_length_scatangshift_mult_var_cookie = getCookie ("rise_length_scatangshift_mult_var_cookie");
  if (rise_length_scatangshift_mult_var_cookie) {document.getElementById("rise_length_scatangshift_mult_var").value = rise_length_scatangshift_mult_var_cookie;};
  var set_length_scatangshift_var_cookie = getCookie ("set_length_scatangshift_var_cookie");
  if (set_length_scatangshift_var_cookie) {document.getElementById("set_length_scatangshift_var").value = set_length_scatangshift_var_cookie;};
  var set_length_scatangshift_mult_var_cookie = getCookie ("set_length_scatangshift_mult_var_cookie");
  if (set_length_scatangshift_mult_var_cookie) {document.getElementById("set_length_scatangshift_mult_var").value = set_length_scatangshift_mult_var_cookie;};
  var rise_slope_scatdist_var_cookie = getCookie ("rise_slope_scatdist_var_cookie");
  if (rise_slope_scatdist_var_cookie) {document.getElementById("rise_slope_scatdist_var").value = rise_slope_scatdist_var_cookie;};
  var set_slope_scatdist_var_cookie = getCookie ("set_slope_scatdist_var_cookie");
  if (set_slope_scatdist_var_cookie) {document.getElementById("set_slope_scatdist_var").value = set_slope_scatdist_var_cookie;};
  var rise_slope_scatangshift_var_cookie = getCookie ("rise_slope_scatangshift_var_cookie");
  if (rise_slope_scatangshift_var_cookie) {document.getElementById("rise_slope_scatangshift_var").value = rise_slope_scatangshift_var_cookie;};
  var set_slope_scatangshift_var_cookie = getCookie ("set_slope_scatangshift_var_cookie");
  if (set_slope_scatangshift_var_cookie) {document.getElementById("set_slope_scatangshift_var").value = set_slope_scatangshift_var_cookie;};
  var rise_slope_bright_yellow_var_cookie = getCookie ("rise_slope_bright_yellow_var_cookie");
  if (rise_slope_bright_yellow_var_cookie) {document.getElementById("rise_slope_bright_yellow_var").value = rise_slope_bright_yellow_var_cookie;};
  var set_slope_bright_yellow_var_cookie = getCookie ("set_slope_bright_yellow_var_cookie");
  if (set_slope_bright_yellow_var_cookie) {document.getElementById("set_slope_bright_yellow_var").value = set_slope_bright_yellow_var_cookie;};
  var rise_slope_bright_blue_var_cookie = getCookie ("rise_slope_bright_blue_var_cookie");
  if (rise_slope_bright_blue_var_cookie) {document.getElementById("rise_slope_bright_blue_var").value = rise_slope_bright_blue_var_cookie;};
  var set_slope_bright_blue_var_cookie = getCookie ("set_slope_bright_blue_var_cookie");
  if (set_slope_bright_blue_var_cookie) {document.getElementById("set_slope_bright_blue_var").value = set_slope_bright_blue_var_cookie;};

  var wake_offset_slider = document.getElementById("wake_offset_var");
  var wake_offset_output = document.getElementById("wake_offset_label");
  wake_offset_output.innerHTML = wake_offset_slider.value;
  wake_offset_slider.oninput = function() {wake_offset_output.innerHTML = this.value;}
  
  var bed_offset_slider = document.getElementById("bed_offset_var");
  var bed_offset_output = document.getElementById("bed_offset_label");
  bed_offset_output.innerHTML = bed_offset_slider.value;
  bed_offset_slider.oninput = function() {bed_offset_output.innerHTML = this.value;}
  
  var max_bright_slider = document.getElementById("max_bright_var");
  var max_bright_output = document.getElementById("max_bright_label");
  max_bright_output.innerHTML = (max_bright_slider.value * 100);
  max_bright_slider.oninput = function() {max_bright_output.innerHTML = (Math.round(this.value * 100));}
  
  var min_bright_slider = document.getElementById("min_bright_var");
  var min_bright_output = document.getElementById("min_bright_label");
  min_bright_output.innerHTML = (min_bright_slider.value * 100);
  min_bright_slider.oninput = function() {min_bright_output.innerHTML = (Math.round(this.value * 100));}
  
  var max_CCT_slider = document.getElementById("max_CCT_var");
  var max_CCT_output = document.getElementById("max_CCT_label");
  max_CCT_output.innerHTML = (max_CCT_slider.value);
  max_CCT_slider.oninput = function() {max_CCT_output.innerHTML = (Math.round(this.value));}
  
  var min_CCT_slider = document.getElementById("min_CCT_var");
  var min_CCT_output = document.getElementById("min_CCT_label");
  min_CCT_output.innerHTML = (min_CCT_slider.value);
  min_CCT_slider.oninput = function() {min_CCT_output.innerHTML = (Math.round(this.value));}
  
  var rise_length_bright_slider = document.getElementById("rise_length_bright_var");
  var rise_length_bright_output = document.getElementById("rise_length_bright_label");
  rise_length_bright_output.innerHTML = rise_length_bright_slider.value;
  rise_length_bright_slider.oninput = function() {rise_length_bright_output.innerHTML = this.value;}
  
  var rise_length_bright_mult_slider = document.getElementById("rise_length_bright_mult_var");
  var rise_length_bright_mult_output = document.getElementById("rise_length_bright_mult_label");
  rise_length_bright_mult_output.innerHTML = rise_length_bright_mult_slider.value;
  rise_length_bright_mult_slider.oninput = function() {rise_length_bright_mult_output.innerHTML = this.value;}
  
  var set_length_bright_slider = document.getElementById("set_length_bright_var");
  var set_length_bright_output = document.getElementById("set_length_bright_label");
  set_length_bright_output.innerHTML = set_length_bright_slider.value;
  set_length_bright_slider.oninput = function() {set_length_bright_output.innerHTML = this.value;}
  
  var set_length_bright_mult_slider = document.getElementById("set_length_bright_mult_var");
  var set_length_bright_mult_output = document.getElementById("set_length_bright_mult_label");
  set_length_bright_mult_output.innerHTML = set_length_bright_mult_slider.value;
  set_length_bright_mult_slider.oninput = function() {set_length_bright_mult_output.innerHTML = this.value;}
  
  var rise_length_CCT_slider = document.getElementById("rise_length_CCT_var");
  var rise_length_CCT_output = document.getElementById("rise_length_CCT_label");
  rise_length_CCT_output.innerHTML = rise_length_CCT_slider.value;
  rise_length_CCT_slider.oninput = function() {rise_length_CCT_output.innerHTML = this.value;}
  
  var rise_length_CCT_mult_slider = document.getElementById("rise_length_CCT_mult_var");
  var rise_length_CCT_mult_output = document.getElementById("rise_length_CCT_mult_label");
  rise_length_CCT_mult_output.innerHTML = rise_length_CCT_mult_slider.value;
  rise_length_CCT_mult_slider.oninput = function() {rise_length_CCT_mult_output.innerHTML = this.value;}
  
  var set_length_CCT_slider = document.getElementById("set_length_CCT_var");
  var set_length_CCT_output = document.getElementById("set_length_CCT_label");
  set_length_CCT_output.innerHTML = set_length_CCT_slider.value;
  set_length_CCT_slider.oninput = function() {set_length_CCT_output.innerHTML = this.value;}
  
  var set_length_CCT_mult_slider = document.getElementById("set_length_CCT_mult_var");
  var set_length_CCT_mult_output = document.getElementById("set_length_CCT_mult_label");
  set_length_CCT_mult_output.innerHTML = set_length_CCT_mult_slider.value;
  set_length_CCT_mult_slider.oninput = function() {set_length_CCT_mult_output.innerHTML = this.value;}
  
  var rise_slope_bright_slider = document.getElementById("rise_slope_bright_var");
  var rise_slope_bright_output = document.getElementById("rise_slope_bright_label");
  rise_slope_bright_output.innerHTML = (rise_slope_bright_slider.value);
  rise_slope_bright_slider.oninput = function() {rise_slope_bright_output.innerHTML = (Math.round(this.value));}
  
  var set_slope_bright_slider = document.getElementById("set_slope_bright_var");
  var set_slope_bright_output = document.getElementById("set_slope_bright_label");
  set_slope_bright_output.innerHTML = (set_slope_bright_slider.value);
  set_slope_bright_slider.oninput = function() {set_slope_bright_output.innerHTML = (Math.round(this.value));}
  
  var rise_slope_CCT_slider = document.getElementById("rise_slope_CCT_var");
  var rise_slope_CCT_output = document.getElementById("rise_slope_CCT_label");
  rise_slope_CCT_output.innerHTML = (rise_slope_CCT_slider.value);
  rise_slope_CCT_slider.oninput = function() {rise_slope_CCT_output.innerHTML = (Math.round(this.value));}
  
  var set_slope_CCT_slider = document.getElementById("set_slope_CCT_var");
  var set_slope_CCT_output = document.getElementById("set_slope_CCT_label");
  set_slope_CCT_output.innerHTML = (set_slope_CCT_slider.value);
  set_slope_CCT_slider.oninput = function() {set_slope_CCT_output.innerHTML = (Math.round(this.value));}
  
  var max_scatdist_slider = document.getElementById("max_scatdist_var");
  var max_scatdist_output = document.getElementById("max_scatdist_label");
  max_scatdist_output.innerHTML = (max_scatdist_slider.value);
  max_scatdist_slider.oninput = function() {max_scatdist_output.innerHTML = (Math.round(this.value));}
  
  var min_scatdist_slider = document.getElementById("min_scatdist_var");
  var min_scatdist_output = document.getElementById("min_scatdist_label");
  min_scatdist_output.innerHTML = (min_scatdist_slider.value);
  min_scatdist_slider.oninput = function() {min_scatdist_output.innerHTML = (Math.round(this.value));}
  
  var max_scatangshift_slider = document.getElementById("max_scatangshift_var");
  var max_scatangshift_output = document.getElementById("max_scatangshift_label");
  max_scatangshift_output.innerHTML = (max_scatangshift_slider.value);
  max_scatangshift_slider.oninput = function() {max_scatangshift_output.innerHTML = (Math.round(this.value));}
  
  var min_scatangshift_slider = document.getElementById("min_scatangshift_var");
  var min_scatangshift_output = document.getElementById("min_scatangshift_label");
  min_scatangshift_output.innerHTML = (min_scatangshift_slider.value);
  min_scatangshift_slider.oninput = function() {min_scatangshift_output.innerHTML = (Math.round(this.value));}
  
  var max_bright_yellow_slider = document.getElementById("max_bright_yellow_var");
  var max_bright_yellow_output = document.getElementById("max_bright_yellow_label");
  max_bright_yellow_output.innerHTML = (max_bright_yellow_slider.value * 100);
  max_bright_yellow_slider.oninput = function() {max_bright_yellow_output.innerHTML = (Math.round(this.value * 100));}
  
  var min_bright_yellow_slider = document.getElementById("min_bright_yellow_var");
  var min_bright_yellow_output = document.getElementById("min_bright_yellow_label");
  min_bright_yellow_output.innerHTML = (min_bright_yellow_slider.value * 100);
  min_bright_yellow_slider.oninput = function() {min_bright_yellow_output.innerHTML = (Math.round(this.value * 100));}
  
  var max_bright_blue_slider = document.getElementById("max_bright_blue_var");
  var max_bright_blue_output = document.getElementById("max_bright_blue_label");
  max_bright_blue_output.innerHTML = (max_bright_blue_slider.value * 100);
  max_bright_blue_slider.oninput = function() {max_bright_blue_output.innerHTML = (Math.round(this.value * 100));}
  
  var min_bright_blue_slider = document.getElementById("min_bright_blue_var");
  var min_bright_blue_output = document.getElementById("min_bright_blue_label");
  min_bright_blue_output.innerHTML = (min_bright_blue_slider.value * 100);
  min_bright_blue_slider.oninput = function() {min_bright_blue_output.innerHTML = (Math.round(this.value * 100));}
  
  var rise_length_scatdist_slider = document.getElementById("rise_length_scatdist_var");
  var rise_length_scatdist_output = document.getElementById("rise_length_scatdist_label");
  rise_length_scatdist_output.innerHTML = rise_length_scatdist_slider.value;
  rise_length_scatdist_slider.oninput = function() {rise_length_scatdist_output.innerHTML = this.value;}
  
  var rise_length_scatdist_mult_slider = document.getElementById("rise_length_scatdist_mult_var");
  var rise_length_scatdist_mult_output = document.getElementById("rise_length_scatdist_mult_label");
  rise_length_scatdist_mult_output.innerHTML = rise_length_scatdist_mult_slider.value;
  rise_length_scatdist_mult_slider.oninput = function() {rise_length_scatdist_mult_output.innerHTML = this.value;}
  
  var set_length_scatdist_slider = document.getElementById("set_length_scatdist_var");
  var set_length_scatdist_output = document.getElementById("set_length_scatdist_label");
  set_length_scatdist_output.innerHTML = set_length_scatdist_slider.value;
  set_length_scatdist_slider.oninput = function() {set_length_scatdist_output.innerHTML = this.value;}
  
  var set_length_scatdist_mult_slider = document.getElementById("set_length_scatdist_mult_var");
  var set_length_scatdist_mult_output = document.getElementById("set_length_scatdist_mult_label");
  set_length_scatdist_mult_output.innerHTML = set_length_scatdist_mult_slider.value;
  set_length_scatdist_mult_slider.oninput = function() {set_length_scatdist_mult_output.innerHTML = this.value;}
  
  var rise_length_scatangshift_slider = document.getElementById("rise_length_scatangshift_var");
  var rise_length_scatangshift_output = document.getElementById("rise_length_scatangshift_label");
  rise_length_scatangshift_output.innerHTML = rise_length_scatangshift_slider.value;
  rise_length_scatangshift_slider.oninput = function() {rise_length_scatangshift_output.innerHTML = this.value;}
  
  var rise_length_scatangshift_mult_slider = document.getElementById("rise_length_scatangshift_mult_var");
  var rise_length_scatangshift_mult_output = document.getElementById("rise_length_scatangshift_mult_label");
  rise_length_scatangshift_mult_output.innerHTML = rise_length_scatangshift_mult_slider.value;
  rise_length_scatangshift_mult_slider.oninput = function() {rise_length_scatangshift_mult_output.innerHTML = this.value;}
  
  var set_length_scatangshift_slider = document.getElementById("set_length_scatangshift_var");
  var set_length_scatangshift_output = document.getElementById("set_length_scatangshift_label");
  set_length_scatangshift_output.innerHTML = set_length_scatangshift_slider.value;
  set_length_scatangshift_slider.oninput = function() {set_length_scatangshift_output.innerHTML = this.value;}
  
  var set_length_scatangshift_mult_slider = document.getElementById("set_length_scatangshift_mult_var");
  var set_length_scatangshift_mult_output = document.getElementById("set_length_scatangshift_mult_label");
  set_length_scatangshift_mult_output.innerHTML = set_length_scatangshift_mult_slider.value;
  set_length_scatangshift_mult_slider.oninput = function() {set_length_scatangshift_mult_output.innerHTML = this.value;}
  
  var rise_length_bright_yellow_slider = document.getElementById("rise_length_bright_yellow_var");
  var rise_length_bright_yellow_output = document.getElementById("rise_length_bright_yellow_label");
  rise_length_bright_yellow_output.innerHTML = rise_length_bright_yellow_slider.value;
  rise_length_bright_yellow_slider.oninput = function() {rise_length_bright_yellow_output.innerHTML = this.value;}
  
  var rise_length_bright_yellow_mult_slider = document.getElementById("rise_length_bright_yellow_mult_var");
  var rise_length_bright_yellow_mult_output = document.getElementById("rise_length_bright_yellow_mult_label");
  rise_length_bright_yellow_mult_output.innerHTML = rise_length_bright_yellow_mult_slider.value;
  rise_length_bright_yellow_mult_slider.oninput = function() {rise_length_bright_yellow_mult_output.innerHTML = this.value;}
  
  var set_length_bright_yellow_slider = document.getElementById("set_length_bright_yellow_var");
  var set_length_bright_yellow_output = document.getElementById("set_length_bright_yellow_label");
  set_length_bright_yellow_output.innerHTML = set_length_bright_yellow_slider.value;
  set_length_bright_yellow_slider.oninput = function() {set_length_bright_yellow_output.innerHTML = this.value;}
  
  var set_length_bright_yellow_mult_slider = document.getElementById("set_length_bright_yellow_mult_var");
  var set_length_bright_yellow_mult_output = document.getElementById("set_length_bright_yellow_mult_label");
  set_length_bright_yellow_mult_output.innerHTML = set_length_bright_yellow_mult_slider.value;
  set_length_bright_yellow_mult_slider.oninput = function() {set_length_bright_yellow_mult_output.innerHTML = this.value;}
  
  var rise_length_bright_blue_slider = document.getElementById("rise_length_bright_blue_var");
  var rise_length_bright_blue_output = document.getElementById("rise_length_bright_blue_label");
  rise_length_bright_blue_output.innerHTML = rise_length_bright_blue_slider.value;
  rise_length_bright_blue_slider.oninput = function() {rise_length_bright_blue_output.innerHTML = this.value;}
  
  var rise_length_bright_blue_mult_slider = document.getElementById("rise_length_bright_blue_mult_var");
  var rise_length_bright_blue_mult_output = document.getElementById("rise_length_bright_blue_mult_label");
  rise_length_bright_blue_mult_output.innerHTML = rise_length_bright_blue_mult_slider.value;
  rise_length_bright_blue_mult_slider.oninput = function() {rise_length_bright_blue_mult_output.innerHTML = this.value;}
  
  var set_length_bright_blue_slider = document.getElementById("set_length_bright_blue_var");
  var set_length_bright_blue_output = document.getElementById("set_length_bright_blue_label");
  set_length_bright_blue_output.innerHTML = set_length_bright_blue_slider.value;
  set_length_bright_blue_slider.oninput = function() {set_length_bright_blue_output.innerHTML = this.value;}
  
  var set_length_bright_blue_mult_slider = document.getElementById("set_length_bright_blue_mult_var");
  var set_length_bright_blue_mult_output = document.getElementById("set_length_bright_blue_mult_label");
  set_length_bright_blue_mult_output.innerHTML = set_length_bright_blue_mult_slider.value;
  set_length_bright_blue_mult_slider.oninput = function() {set_length_bright_blue_mult_output.innerHTML = this.value;}
  
  var rise_slope_scatdist_slider = document.getElementById("rise_slope_scatdist_var");
  var rise_slope_scatdist_output = document.getElementById("rise_slope_scatdist_label");
  rise_slope_scatdist_output.innerHTML = (rise_slope_scatdist_slider.value);
  rise_slope_scatdist_slider.oninput = function() {rise_slope_scatdist_output.innerHTML = (Math.round(this.value));}
  
  var set_slope_scatdist_slider = document.getElementById("set_slope_scatdist_var");
  var set_slope_scatdist_output = document.getElementById("set_slope_scatdist_label");
  set_slope_scatdist_output.innerHTML = (set_slope_scatdist_slider.value);
  set_slope_scatdist_slider.oninput = function() {set_slope_scatdist_output.innerHTML = (Math.round(this.value));}
  
  var rise_slope_scatangshift_slider = document.getElementById("rise_slope_scatangshift_var");
  var rise_slope_scatangshift_output = document.getElementById("rise_slope_scatangshift_label");
  rise_slope_scatangshift_output.innerHTML = (rise_slope_scatangshift_slider.value);
  rise_slope_scatangshift_slider.oninput = function() {rise_slope_scatangshift_output.innerHTML = (Math.round(this.value));}
  
  var set_slope_scatangshift_slider = document.getElementById("set_slope_scatangshift_var");
  var set_slope_scatangshift_output = document.getElementById("set_slope_scatangshift_label");
  set_slope_scatangshift_output.innerHTML = (set_slope_scatangshift_slider.value);
  set_slope_scatangshift_slider.oninput = function() {set_slope_scatangshift_output.innerHTML = (Math.round(this.value));}
  
  var rise_slope_bright_yellow_slider = document.getElementById("rise_slope_bright_yellow_var");
  var rise_slope_bright_yellow_output = document.getElementById("rise_slope_bright_yellow_label");
  rise_slope_bright_yellow_output.innerHTML = (rise_slope_bright_yellow_slider.value);
  rise_slope_bright_yellow_slider.oninput = function() {rise_slope_bright_yellow_output.innerHTML = (Math.round(this.value));}
  
  var set_slope_bright_yellow_slider = document.getElementById("set_slope_bright_yellow_var");
  var set_slope_bright_yellow_output = document.getElementById("set_slope_bright_yellow_label");
  set_slope_bright_yellow_output.innerHTML = (set_slope_bright_yellow_slider.value);
  set_slope_bright_yellow_slider.oninput = function() {set_slope_bright_yellow_output.innerHTML = (Math.round(this.value));}
  
  var rise_slope_bright_blue_slider = document.getElementById("rise_slope_bright_blue_var");
  var rise_slope_bright_blue_output = document.getElementById("rise_slope_bright_blue_label");
  rise_slope_bright_blue_output.innerHTML = (rise_slope_bright_blue_slider.value);
  rise_slope_bright_blue_slider.oninput = function() {rise_slope_bright_blue_output.innerHTML = (Math.round(this.value));}
  
  var set_slope_bright_blue_slider = document.getElementById("set_slope_bright_blue_var");
  var set_slope_bright_blue_output = document.getElementById("set_slope_bright_blue_label");
  set_slope_bright_blue_output.innerHTML = (set_slope_bright_blue_slider.value);
  set_slope_bright_blue_slider.oninput = function() {set_slope_bright_blue_output.innerHTML = (Math.round(this.value));}

  if (max_bright_var_cookie) {alert ("Your previously saved TimeGiver settings have been restored!")} else {alert ("No previously saved TimeGiver settings were found to restore.");};

  lineremover()
}

var huebridgeaddress = [];
var huebridgeusername = [];
var lights = [];
var switches = [];

async function gethuebridgeaddresscookie (){
  var addresscookie = getCookie ("huebridgeaddress")
  if (addresscookie.length > 3) {huebridgeaddress = unescape(addresscookie); /*alert ("Address cookie is" + addresscookie);*/ return huebridgeaddress;} else {
    async function discoverbridge() {
      await hue.discover().then(bridges => {
      if(bridges.length === 0) {
        console.log("The demo can't find a Hue bridge on your network. Make sure that you actually have a Hue bridge (not just lights you control with Bluetooth) and that this device is connected to the same network as that bridge. This demo does not currently support controlling Hue lights remotely.");
      }
      else {
        bridges.forEach(b => console.log('Bridge found at IP address %s.', b.internalipaddress));
        bridges.forEach(b => {setCookie("huebridgeaddress", escape (b.internalipaddress), 365)});
        bridges.forEach(b => huebridgeaddress = (b.internalipaddress));
        //console.log ("Hue bridge found: " + huebridgeaddress)
        return huebridgeaddress;}
    }).catch(e => {console.log("The demo can't find a Hue bridge on your network. Make sure that you actually have a Hue bridge (not just lights you control with Bluetooth) and that this device is connected to the same network as that bridge. This demo does not currently support controlling Hue lights remotely.", e)});
    }
  await discoverbridge();
  return huebridgeaddress;
  }
}

async function gethuebridgeaddressnocookie (){
  async function discoverbridge() {
      await hue.discover().then(bridges => {
      if(bridges.length === 0) {
        console.log("The demo can't find a Hue bridge on your network. Make sure that you actually have a Hue bridge (not just lights you control with Bluetooth) and that this device is connected to the same network as that bridge. This demo does not currently support controlling Hue lights remotely.");
      }
      else {
        bridges.forEach(b => console.log('Bridge found at IP address %s.', b.internalipaddress));
        bridges.forEach(b => {setCookie("huebridgeaddress", escape (b.internalipaddress), 365)});
        bridges.forEach(b => huebridgeaddress = (b.internalipaddress));
        //console.log ("Hue bridge found: " + huebridgeaddress)
        return huebridgeaddress;}
    }).catch(e => {console.log("The demo can't find a Hue bridge on your network. Make sure that you actually have a Hue bridge (not just lights you control with Bluetooth) and that this device is connected to the same network as that bridge. This demo does not currently support controlling Hue lights remotely.", e)});
    }
  await discoverbridge();
  return huebridgeaddress;
}

async function gethueusername(huebridgeaddress){
    var bridge = await hue.bridge(huebridgeaddress);
    return bridge.createUser('TimeGiverDemo#WebBrowser').then(data => {
      //extract bridge-generated username from returned data
      var username = data[0].success.username;
      var huebridgeusername = username;
      setCookie("huebridgeusername", escape (huebridgeusername), 365);
      console.log('New username:', username);
      //console.log (huebridgeusername);
      return huebridgeusername;
      }).catch(e => {alert('The link button on top of your Hue hub has not been pressed. Try pressing it and then starting the demo again less than 30 seconds later.', e); var huebridgeusername = 1; return huebridgeusername});
    return huebridgeusername;
}

function stopdemo (){
  //alert (scheduler)
  window.clearInterval(scheduler)
  document.getElementById("startdemobutton").disabled = false;
  document.getElementById("stopdemobutton").disabled = true;
}

async function startdemo (){
  await gethuebridgeaddresscookie()
  var bridge = await hue.bridge(huebridgeaddress);
  if (bridge) {console.log("bridge found")} else {await gethuebridgeaddressnocookie(); var bridge = await hue.bridge(huebridgeaddress); return bridge;}
  //alert (huebridgeaddress)
  if (huebridgeaddress.length > 3) {
    //alert (huebridgeaddress + " is being used as address")
    var usernamecookie = getCookie ("huebridgeusername");
    if (usernamecookie.length > 3) {huebridgeusername = unescape(usernamecookie); /*console.log (usernamecookie)*/} else {
      var huebridgeusername = await gethueusername(huebridgeaddress);
      console.log ("Hue bridge username is: " + huebridgeusername);
    }
    if (huebridgeusername.length > 3){
      //console.log (huebridgeaddress);
      //console.log (huebridgeusername);
      var user = await bridge.user(huebridgeusername);
      if (user) {console.log("Usable username found")} else {
        var huebridgeusername = await gethueusername(huebridgeaddress);
        var user = await bridge.user(huebridgeusername);
        }
    
      await user.getLights()
        .then(function(result) {
          //console.log(result); // "initResolve"
          //console.log(result[1].state.on)
          return result;
        })
        .then(function(result) {
          //console.log(result); // "normalReturn"
        });

      lights = await user.getLights();
      var colorlights = [];
      for (i in lights){
        if (lights[i].capabilities.control.colorgamuttype) {
          colorlights[i] = lights[i]
        }
      }

      document.getElementById("overridesensorlist").innerHTML = null;

      await user.getSensors()
        .then(function(result) {
          //console.log(result); // "initResolve"
          //console.log(result[1].state.on)
          return result;
        })
        .then(function(result) {
          //console.log(result); // "normalReturn"
        });

      switches = await user.getSensors();

      for (i in switches){
        var sensorname = (switches[i].name);
        var sensorname_esc = (sensorname.replace(/\s+/g, ''));
        var sensorname_esc = (sensorname_esc.replace(/'/g, ''));
        var productname = switches[i].productname;
        var overridesensordiv = ("overridesensordiv_" + sensorname_esc)
        var overridecheckboxlist = ("overridecheckboxlist_" + sensorname_esc)
        if (productname) {
          var dimmer = productname.includes("Hue dimmer switch");
          if (dimmer) {
            //console.log ("Dimmer created");
            //console.log (document.getElementById("overridesensorlisttext").innerHTML)
            document.getElementById("overridesensorlist").innerHTML = (document.getElementById("overridesensorlist").innerHTML + "<div class='level4element' style='display:block' id='overridesensordiv_" + sensorname_esc + "'><input onclick='toggleoverridelist();' type='checkbox' id='overridecheckbox_" + sensorname_esc + "'>" + switches[i].name + "<ul style='display:none' id='overridecheckboxlist_" + sensorname_esc + "'></ul></input></div>")
            for (i in lights){
              var lightname = (lights[i].name);
              var lightname_esc = (lightname.replace(/\s+/g, ''));
              var lightname_esc = (lightname_esc.replace(/'/g, ''));
              document.getElementById(overridecheckboxlist).innerHTML = (document.getElementById(overridecheckboxlist).innerHTML + "<li style='display:none' id='" + overridesensordiv + "_light_" + lightname_esc + "'><input type='checkbox' id='" + overridesensordiv + "_lightcheckbox_" + lightname_esc + "'>" + lights[i].name + "</input></li></div>")
            }
          }
        }
      }
      

      document.getElementById("whitelightlist").innerHTML = null;
      document.getElementById("bluelightlist").innerHTML = null;
      document.getElementById("yellowlightlist").innerHTML = null;
      document.getElementById("autoonlightlist").innerHTML = null;

      for (i in lights) {
        var lightname = (lights[i].name);
        var lightname_esc = (lightname.replace(/\s+/g, ''))
        var lightname_esc = (lightname_esc.replace(/'/g, ''))
        document.getElementById("whitelightlist").innerHTML = (document.getElementById("whitelightlist").innerHTML + "<input class='level4element' type='checkbox' id='whitelightcheckbox_" + lightname_esc + "' onclick='toggleoverridelistitem(\"" + lightname_esc + "\"); toggleautoonlightlistitem(\"" + lightname_esc + "\"); listswitch(\"white\", \"lightcheckbox_" + lightname_esc + "\")'>" + lights[i].name + "</input><br>")
        document.getElementById("autoonlightlist").innerHTML = (document.getElementById("autoonlightlist").innerHTML + "<div style='display:none' id='autoondiv_" + lightname_esc + "'><input class='level4element' type='checkbox' id='autooncheckbox_" + lightname_esc + "'>" + lights[i].name + "</input></div>")
      }

      for (i in colorlights){
        var colorlightname = (colorlights[i].name);
        var colorlightname_esc = (colorlightname.replace(/\s+/g, ''))
        var colorlightname_esc = (colorlightname_esc.replace(/'/g, ''))
        document.getElementById("bluelightlist").innerHTML = (document.getElementById("bluelightlist").innerHTML + "<input class='level4element' type='checkbox' id='bluelightcheckbox_" + colorlightname_esc + "' onclick='toggleoverridelistitem(\"" + lightname_esc + "\");toggleautoonlightlistitem(\"" + colorlightname_esc + "\"); listswitch(\"blue\", \"lightcheckbox_" + colorlightname_esc + "\")'>" + colorlights[i].name + "</input><br>")
        document.getElementById("yellowlightlist").innerHTML = (document.getElementById("yellowlightlist").innerHTML + "<input class='level4element' type='checkbox' id='yellowlightcheckbox_" + colorlightname_esc + "' onclick='toggleoverridelistitem(\"" + lightname_esc + "\");toggleautoonlightlistitem(\"" + colorlightname_esc + "\"); listswitch(\"yellow\", \"lightcheckbox_" + colorlightname_esc + "\")'>" + colorlights[i].name + "</input><br>")
      }

      scheduler = setInterval(() => {
        lightchanger(huebridgeaddress, huebridgeusername);
        //console.log (scheduler);
      }, 3000); 
      document.getElementById("startdemobutton").disabled = true;
      document.getElementById("stopdemobutton").disabled = false;
    } else { alert ("The demo didn't start because your link button was not pressed or the demo was not able to establish secure communication with your Hue bridge. Make sure that you have a bridge (not just lights you control with Bluetooth) and that this device is connected to the same network as that bridge. Then press the link button on the top of the bridge, refresh this page, and restart the demo.")}
  } else {alert ("The demo can't find a Hue bridge on your network. Make sure that you actually have a Hue bridge (not just lights you control with Bluetooth) and that this device is connected to the same network as that bridge, and then refresh the page and restart the demo. This demo does not currently support controlling Hue lights remotely.");}
}

async function lightchanger (huebridgeaddress, huebridgeusername) {
  //alert ("lightchanger activated")
  var now = new Date(); //sets the variable now equal to the current date and time
  var hh = now.getHours(); //sets the variable hh equal to the number of hours that have passed since the day started.
  var hh_sixty = hh * 60; //sets the variable hh_sixty equal to the number of minutes in the day at the time of the last hour change.
  var mm = now.getMinutes(); //sets the variable mm equal to the number of minutes since the last hour
  var hm = hh_sixty + mm; //sets the variable hm equal to the total number of minutes that have passed since the day began.
  var wake_time = (document.getElementById("wake_time_var").value);
  var wake_time_hh = (wake_time.slice(0,2));
  var wake_time_hh_sixty = (wake_time_hh * 60);
  var wake_time_mm = wake_time.slice(-2);
  var wake_time_hm = (Number(wake_time_hh_sixty) + Number(wake_time_mm));
  var bed_time = (document.getElementById("bed_time_var").value);
  var bed_time_hh = (bed_time.slice(0,2));
  var bed_time_hh_sixty = (bed_time_hh * 60);
  var bed_time_mm = bed_time.slice(-2);
  var bed_time_hm = (Number(bed_time_hh_sixty) + Number(bed_time_mm));
  var wake_offset = (Number(document.getElementById("wake_offset_var").value));
  var rise_length_bright = (Number(document.getElementById("rise_length_bright_var").value));
  if (Number((document.getElementById("rise_length_bright_mult_var").value)) !== 0) {var rise_length_bright_var = ((document.getElementById("rise_length_bright_mult_var").value) + "x")} else {var rise_length_bright_var = (Number (document.getElementById("rise_length_bright_var").value))} 
  if (Number((document.getElementById("set_length_bright_mult_var").value)) !== 0) {var set_length_bright_var = ((document.getElementById("set_length_bright_mult_var").value) + "x")} else {var set_length_bright_var = (Number (document.getElementById("set_length_bright_var").value))}
  if (Number((document.getElementById("rise_length_CCT_var").value)) == 0) {var rise_length_CCT_var = ((document.getElementById("rise_length_CCT_mult_var").value) + "x")} else {var rise_length_CCT_var = (Number (document.getElementById("rise_length_CCT_var").value))} 
  if (Number((document.getElementById("set_length_CCT_var").value)) == 0) {var set_length_CCT_var = ((document.getElementById("set_length_CCT_mult_var").value) + "x")} else {var set_length_CCT_var = (Number (document.getElementById("set_length_CCT_var").value))}  
  if (Number((document.getElementById("rise_length_scatdist_var").value)) == 0) {var rise_length_scatdist_var = ((document.getElementById("rise_length_scatdist_mult_var").value) + "x")} else {var rise_length_scatdist_var = (Number (document.getElementById("rise_length_scatdist_var").value))} 
  if (Number((document.getElementById("set_length_scatdist_var").value)) == 0) {var set_length_scatdist_var = ((document.getElementById("set_length_scatdist_mult_var").value) + "x")} else {var set_length_scatdist_var = (Number (document.getElementById("set_length_scatdist_var").value))}  
  if (Number((document.getElementById("rise_length_scatangshift_mult_var").value)) !== 0) {var rise_length_scatangshift_var = ((document.getElementById("rise_length_scatangshift_mult_var").value) + "x")} else {var rise_length_scatangshift_var = (Number (document.getElementById("rise_length_scatangshift_var").value))} 
  if (Number((document.getElementById("set_length_scatangshift_mult_var").value)) !== 0) {var set_length_scatangshift_var = ((document.getElementById("set_length_scatangshift_mult_var").value) + "x")} else {var set_length_scatangshift_var = (Number (document.getElementById("set_length_scatangshift_var").value))}
  if (Number((document.getElementById("rise_length_bright_yellow_mult_var").value)) !== 0) {var rise_length_bright_yellow_var = ((document.getElementById("rise_length_bright_yellow_mult_var").value) + "x")} else {var rise_length_bright_yellow_var = (Number (document.getElementById("rise_length_bright_yellow_var").value))} 
  if (Number((document.getElementById("set_length_bright_yellow_mult_var").value)) !== 0) {var set_length_bright_yellow_var = ((document.getElementById("set_length_bright_yellow_mult_var").value) + "x")} else {var set_length_bright_yellow_var = (Number (document.getElementById("set_length_bright_yellow_var").value))}
  if (Number((document.getElementById("rise_length_bright_blue_mult_var").value)) !== 0) {var rise_length_bright_blue_var = ((document.getElementById("rise_length_bright_blue_mult_var").value) + "x")} else {var rise_length_bright_blue_var = (Number (document.getElementById("rise_length_bright_blue_var").value))} 
  if (Number((document.getElementById("set_length_bright_blue_mult_var").value)) !== 0) {var set_length_bright_blue_var = ((document.getElementById("set_length_bright_blue_mult_var").value) + "x")} else {var set_length_bright_blue_var = (Number (document.getElementById("set_length_bright_blue_var").value))}
  let lighting_parameters = TimeGiver({wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_CCT: (Number (document.getElementById("max_CCT_var").value)), min_CCT: (Number (document.getElementById("min_CCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_CCT: rise_length_CCT_var, set_length_CCT: set_length_CCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_CCT: (Number (document.getElementById("rise_slope_CCT_var").value)), set_slope_CCT: (Number (document.getElementById("set_slope_CCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value))})
  //console.log ("Scheduler is running!")

  var bridge = await hue.bridge(huebridgeaddress);
  var user = await bridge.user(huebridgeusername);
  //console.log ("username is " + huebridgeusername)

  await user.getSensors()
        .then(function(result) {
          //console.log(result); // "initResolve"
          //console.log(result[1].state.on)
          return result;
        })
        .then(function(result) {
          //console.log(result); // "normalReturn"
        });

  switchesupdate = await user.getSensors(); 

  for (i in lights){
    lights[i].overrideactivated = false;
  }

  for (i in switchesupdate) {
    var sensorname = (switchesupdate[i].name);
    var sensorname_esc = (sensorname.replace(/\s+/g, ''));
    var sensorname_esc = (sensorname_esc.replace(/'/g, ''));
    var productname = switchesupdate[i].productname;
    var overridesensordiv = ("overridesensordiv_" + sensorname_esc)
    var overridecheckboxlist = ("overridecheckboxlist_" + sensorname_esc)
    var overridecheckboxchecked = ("#overridecheckbox_" + sensorname_esc + ":checked")
    if (productname) {
      var dimmer = productname.includes("Hue dimmer switch");
      if (dimmer) {
        var buttonevent = switchesupdate[i].state.buttonevent;
        //console.log (buttonevent)
        var buttonupdateUTC = (Date.parse(switchesupdate[i].state.lastupdated));
        var timeoffset = now.getTimezoneOffset();
        var nowUTC = (Date.parse(now) + (timeoffset*60*1000));
        var timesincebuttonupdate = (nowUTC - buttonupdateUTC)
        for (i in lights){
          var lightname = (lights[i].name);
          var lightname_esc = (lightname.replace(/\s+/g, ''))
          var lightname_esc = (lightname_esc.replace(/'/g, ''))
          var overridelightcheckboxchecked = ("#overridesensordiv_" + sensorname_esc + "_lightcheckbox_" + lightname_esc + ":checked")
          if (buttonevent < 3999 && buttonevent > 1900 && timesincebuttonupdate <3600000 && (document.querySelector(overridelightcheckboxchecked)) !== null && (document.querySelector(overridecheckboxchecked)) !== null) {
            //console.log ("override activated");
            lights[i].overrideactivated = true;
            //console.log (lights[i].overrideactivated)
          } //else if (buttonevent > 3999 || buttonevent < 1900 || timesincebuttonupdate >3600000 || (document.querySelector(overridecheckboxchecked)) === null){console.log ("Override not activated"); lights[i].overrideactivated = null; }
        }
      }
    }
  }

  for (i in lights) {
    var lightname = (lights[i].name);
    var lightname_esc = (lightname.replace(/\s+/g, ''));
    var lightname_esc = (lightname_esc.replace(/'/g, ''));
    var autooncheckboxchecked = ("#autooncheckbox_" + lightname_esc + ":checked");
    var autooncheckbox = ("autooncheckbox_" + lightname_esc);
    var whitecheckbox = ("whitelightcheckbox_" + lightname_esc);
    var whitecheckboxchecked = ("#whitelightcheckbox_" + lightname_esc + ":checked");
    var bluecheckboxchecked = ("#bluelightcheckbox_" + lightname_esc + ":checked");
    var bluecheckbox = ("bluelightcheckbox_" + lightname_esc);
    var yellowcheckboxchecked = ("#yellowlightcheckbox_" + lightname_esc + ":checked");
    var yellowcheckbox = ("yellowlightcheckbox_" + lightname_esc);
    var override = lights[i].overrideactivated;
    //console.log (override)
    if (override === true) {console.log ("override activated");} else {
      if ((document.querySelector(autooncheckboxchecked)) !== null && (hm - (wake_time_hm - wake_offset)) < 30 && (hm - (wake_time_hm - wake_offset)) > 0) {
        //console.log ("autoon activated for: " + lightname_esc)
        if ((document.querySelector('#blueyellowactive:checked') !== null)) {
          if (document.querySelector(bluecheckboxchecked) !== null){
            user.setLightState(i, {on: true, bri: lighting_parameters.bright_blue_int_ret, xy:[lighting_parameters.blue_x_shifted_ret,lighting_parameters.blue_y_shifted_ret], transitiontime: 20}).then(data => {})
            document.getElementById(yellowcheckbox).checked = false
            document.getElementById(whitecheckbox).checked = false
          }
          if (document.querySelector(yellowcheckboxchecked) !== null){
            user.setLightState(i, {on: true, bri: lighting_parameters.bright_yellow_int_ret, xy:[lighting_parameters.yellow_x_shifted_ret,lighting_parameters.yellow_y_shifted_ret], transitiontime: 20}).then(data => {})
            document.getElementById(bluecheckbox).checked = false
            document.getElementById(whitecheckbox).checked = false
          }
          if (document.querySelector(whitecheckboxchecked) !== null){
            if (lighting_parameters.CCT_mired_int_ret > 454 || lighting_parameters.CCT_mired_int_ret < 154) {
              user.setLightState(i, {on: true, bri: lighting_parameters.bright_int_ret, ct: lighting_parameters.CCT_mired_int_ret, xy:[lighting_parameters.white_x_ret,lighting_parameters.white_y_ret], transitiontime: 20}).then(data => {})
            } else {
              user.setLightState(i, {on: true, bri: lighting_parameters.bright_int_ret, ct: lighting_parameters.CCT_mired_int_ret, transitiontime: 20}).then(data => {})
            }
          }
        } else {
          if (lighting_parameters.CCT_mired_int_ret > 454 || lighting_parameters.CCT_mired_int_ret < 154) {
            user.setLightState(i, {on: true, bri: lighting_parameters.bright_int_ret, ct: lighting_parameters.CCT_mired_int_ret, xy:[lighting_parameters.white_x_ret,lighting_parameters.white_y_ret], transitiontime: 20}).then(data => {})
          } else {
            user.setLightState(i, {on: true, bri: lighting_parameters.bright_int_ret, ct: lighting_parameters.CCT_mired_int_ret, transitiontime: 20}).then(data => {})
          }
        }
      } else {
        //console.log ("autoon not activated")
        if ((document.querySelector('#blueyellowactive:checked') !== null)) {
          if (document.querySelector(bluecheckboxchecked) !== null){
            user.setLightState(i, {bri: lighting_parameters.bright_blue_int_ret, xy:[lighting_parameters.blue_x_shifted_ret,lighting_parameters.blue_y_shifted_ret], transitiontime: 20}).then(data => {})
            document.getElementById(yellowcheckbox).checked = false
            document.getElementById(whitecheckbox).checked = false
          }
          if (document.querySelector(yellowcheckboxchecked) !== null){
            user.setLightState(i, {bri: lighting_parameters.bright_yellow_int_ret, xy:[lighting_parameters.yellow_x_shifted_ret,lighting_parameters.yellow_y_shifted_ret], transitiontime: 20}).then(data => {})
            document.getElementById(bluecheckbox).checked = false
            document.getElementById(whitecheckbox).checked = false
          }
          if (document.querySelector(whitecheckboxchecked) !== null){
            if (lighting_parameters.CCT_mired_int_ret > 454 || lighting_parameters.CCT_mired_int_ret < 154) {
              user.setLightState(i, {bri: lighting_parameters.bright_int_ret, ct: lighting_parameters.CCT_mired_int_ret, xy:[lighting_parameters.white_x_ret,lighting_parameters.white_y_ret], transitiontime: 20}).then(data => {})
            } else {
              user.setLightState(i, {bri: lighting_parameters.bright_int_ret, ct: lighting_parameters.CCT_mired_int_ret, transitiontime: 20}).then(data => {})
            }
          }
        } else {
          if (document.querySelector(whitecheckboxchecked) !== null){if (lighting_parameters.CCT_mired_int_ret > 454 || lighting_parameters.CCT_mired_int_ret < 154) {
              user.setLightState(i, {bri: lighting_parameters.bright_int_ret, ct: lighting_parameters.CCT_mired_int_ret, xy:[lighting_parameters.white_x_ret,lighting_parameters.white_y_ret], transitiontime: 20}).then(data => {})
            } else {
              user.setLightState(i, {bri: lighting_parameters.bright_int_ret, ct: lighting_parameters.CCT_mired_int_ret, transitiontime: 20}).then(data => {})
            }
          }
        }
      }
    }
  }
}

function blueyellowlinedrawer ({time}) {
    var wake_time = (document.getElementById("wake_time_var").value);
    var wake_time_hh = (wake_time.slice(0,2));
    var wake_time_hh_sixty = (wake_time_hh * 60);
    var wake_time_mm = wake_time.slice(-2);
    var wake_time_hm = (Number(wake_time_hh_sixty) + Number(wake_time_mm));
    var bed_time = (document.getElementById("bed_time_var").value);
    var bed_time_hh = (bed_time.slice(0,2));
    var bed_time_hh_sixty = (bed_time_hh * 60);
    var bed_time_mm = bed_time.slice(-2);
    var bed_time_hm = (Number(bed_time_hh_sixty) + Number(bed_time_mm));
    if (Number((document.getElementById("rise_length_bright_mult_var").value)) !== 0) {var rise_length_bright_var = ((document.getElementById("rise_length_bright_mult_var").value) + "x")} else {var rise_length_bright_var = (Number (document.getElementById("rise_length_bright_var").value))} 
    if (Number((document.getElementById("set_length_bright_mult_var").value)) !== 0) {var set_length_bright_var = ((document.getElementById("set_length_bright_mult_var").value) + "x")} else {var set_length_bright_var = (Number (document.getElementById("set_length_bright_var").value))}
    if (Number((document.getElementById("rise_length_CCT_var").value)) == 0) {var rise_length_CCT_var = ((document.getElementById("rise_length_CCT_mult_var").value) + "x")} else {var rise_length_CCT_var = (Number (document.getElementById("rise_length_CCT_var").value))} 
    if (Number((document.getElementById("set_length_CCT_var").value)) == 0) {var set_length_CCT_var = ((document.getElementById("set_length_CCT_mult_var").value) + "x")} else {var set_length_CCT_var = (Number (document.getElementById("set_length_CCT_var").value))}  
    if (Number((document.getElementById("rise_length_scatdist_var").value)) == 0) {var rise_length_scatdist_var = ((document.getElementById("rise_length_scatdist_mult_var").value) + "x")} else {var rise_length_scatdist_var = (Number (document.getElementById("rise_length_scatdist_var").value))} 
    if (Number((document.getElementById("set_length_scatdist_var").value)) == 0) {var set_length_scatdist_var = ((document.getElementById("set_length_scatdist_mult_var").value) + "x")} else {var set_length_scatdist_var = (Number (document.getElementById("set_length_scatdist_var").value))}  
    if (Number((document.getElementById("rise_length_scatangshift_mult_var").value)) !== 0) {var rise_length_scatangshift_var = ((document.getElementById("rise_length_scatangshift_mult_var").value) + "x")} else {var rise_length_scatangshift_var = (Number (document.getElementById("rise_length_scatangshift_var").value))} 
    if (Number((document.getElementById("set_length_scatangshift_mult_var").value)) !== 0) {var set_length_scatangshift_var = ((document.getElementById("set_length_scatangshift_mult_var").value) + "x")} else {var set_length_scatangshift_var = (Number (document.getElementById("set_length_scatangshift_var").value))}
    if (Number((document.getElementById("rise_length_bright_yellow_mult_var").value)) !== 0) {var rise_length_bright_yellow_var = ((document.getElementById("rise_length_bright_yellow_mult_var").value) + "x")} else {var rise_length_bright_yellow_var = (Number (document.getElementById("rise_length_bright_yellow_var").value))} 
    if (Number((document.getElementById("set_length_bright_yellow_mult_var").value)) !== 0) {var set_length_bright_yellow_var = ((document.getElementById("set_length_bright_yellow_mult_var").value) + "x")} else {var set_length_bright_yellow_var = (Number (document.getElementById("set_length_bright_yellow_var").value))}
    if (Number((document.getElementById("rise_length_bright_blue_mult_var").value)) !== 0) {var rise_length_bright_blue_var = ((document.getElementById("rise_length_bright_blue_mult_var").value) + "x")} else {var rise_length_bright_blue_var = (Number (document.getElementById("rise_length_bright_blue_var").value))} 
    if (Number((document.getElementById("set_length_bright_blue_mult_var").value)) !== 0) {var set_length_bright_blue_var = ((document.getElementById("set_length_bright_blue_mult_var").value) + "x")} else {var set_length_bright_blue_var = (Number (document.getElementById("set_length_bright_blue_var").value))}
    let lighting_parameters = TimeGiver({time: time, wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_CCT: (Number (document.getElementById("max_CCT_var").value)), min_CCT: (Number (document.getElementById("min_CCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_CCT: rise_length_CCT_var, set_length_CCT: set_length_CCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_CCT: (Number (document.getElementById("rise_slope_CCT_var").value)), set_slope_CCT: (Number (document.getElementById("set_slope_CCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value))})
    let rgb_values_blue = xytorgb(lighting_parameters.blue_x_shifted_ret, lighting_parameters.blue_y_shifted_ret, 200)
    var rgb_final_blue = "rgb("+rgb_values_blue.r_gamma_ret+","+rgb_values_blue.g_gamma_ret+","+rgb_values_blue.b_gamma_ret+")";
    let rgb_values_yellow = xytorgb(lighting_parameters.yellow_x_shifted_ret, lighting_parameters.yellow_y_shifted_ret, 200)
    var rgb_final_yellow = "rgb("+rgb_values_yellow.r_gamma_ret+","+rgb_values_yellow.g_gamma_ret+","+rgb_values_yellow.b_gamma_ret+")";
    var c = document.getElementById("visualizer");
    var ctx_blue = c.getContext("2d");
    ctx_blue.beginPath();
    ctx_blue.strokeStyle = rgb_final_blue;
    ctx_blue.strokeRect((time/2), ((274 - lighting_parameters.bright_blue_int_ret)/2), 1, (lighting_parameters.bright_blue_int_ret/2));
    ctx_blue.stroke();
    var ctx_yellow = c.getContext("2d");
    ctx_yellow.beginPath();
    ctx_yellow.strokeStyle = rgb_final_yellow;
    ctx_yellow.strokeRect((time/2), ((274/2)), 1, (lighting_parameters.bright_yellow_int_ret/2));
    ctx_yellow.stroke();
    if (time <= 1440) {blueyellowlinedrawer ({time: (time + 2)})} else {
      var wake_time = (document.getElementById("wake_time_var").value);
      var wake_time_hh = (wake_time.slice(0,2));
      var wake_time_hh_sixty = (wake_time_hh * 60);
      var wake_time_mm = wake_time.slice(-2);
      var wake_time_hm = (Number(wake_time_hh_sixty) + Number(wake_time_mm));
      var bed_time = (document.getElementById("bed_time_var").value);
      var bed_time_hh = (bed_time.slice(0,2));
      var bed_time_hh_sixty = (bed_time_hh * 60);
      var bed_time_mm = bed_time.slice(-2);
      var bed_time_hm = (Number(bed_time_hh_sixty) + Number(bed_time_mm));
      var now = new Date(); //sets the variable now equal to the current date and time
      var hh = now.getHours(); //sets the variable hh equal to the number of hours that have passed since the day started.
      var hh_sixty = hh * 60; //sets the variable hh_sixty equal to the number of minutes in the day at the time of the last hour change.
      var mm = now.getMinutes(); //sets the variable mm equal to the number of minutes since the last hour
      var hm = hh_sixty + mm; //sets the variable hm equal to the total number of minutes that have passed since the day began.
      if (Number((document.getElementById("rise_length_bright_mult_var").value)) !== 0) {var rise_length_bright_var = ((document.getElementById("rise_length_bright_mult_var").value) + "x")} else {var rise_length_bright_var = (Number (document.getElementById("rise_length_bright_var").value))} 
      if (Number((document.getElementById("set_length_bright_mult_var").value)) !== 0) {var set_length_bright_var = ((document.getElementById("set_length_bright_mult_var").value) + "x")} else {var set_length_bright_var = (Number (document.getElementById("set_length_bright_var").value))}
      if (Number((document.getElementById("rise_length_CCT_var").value)) == 0) {var rise_length_CCT_var = ((document.getElementById("rise_length_CCT_mult_var").value) + "x")} else {var rise_length_CCT_var = (Number (document.getElementById("rise_length_CCT_var").value))} 
      if (Number((document.getElementById("set_length_CCT_var").value)) == 0) {var set_length_CCT_var = ((document.getElementById("set_length_CCT_mult_var").value) + "x")} else {var set_length_CCT_var = (Number (document.getElementById("set_length_CCT_var").value))}  
      if (Number((document.getElementById("rise_length_scatdist_var").value)) == 0) {var rise_length_scatdist_var = ((document.getElementById("rise_length_scatdist_mult_var").value) + "x")} else {var rise_length_scatdist_var = (Number (document.getElementById("rise_length_scatdist_var").value))} 
      if (Number((document.getElementById("set_length_scatdist_var").value)) == 0) {var set_length_scatdist_var = ((document.getElementById("set_length_scatdist_mult_var").value) + "x")} else {var set_length_scatdist_var = (Number (document.getElementById("set_length_scatdist_var").value))}  
      if (Number((document.getElementById("rise_length_scatangshift_mult_var").value)) !== 0) {var rise_length_scatangshift_var = ((document.getElementById("rise_length_scatangshift_mult_var").value) + "x")} else {var rise_length_scatangshift_var = (Number (document.getElementById("rise_length_scatangshift_var").value))} 
      if (Number((document.getElementById("set_length_scatangshift_mult_var").value)) !== 0) {var set_length_scatangshift_var = ((document.getElementById("set_length_scatangshift_mult_var").value) + "x")} else {var set_length_scatangshift_var = (Number (document.getElementById("set_length_scatangshift_var").value))}
      if (Number((document.getElementById("rise_length_bright_yellow_mult_var").value)) !== 0) {var rise_length_bright_yellow_var = ((document.getElementById("rise_length_bright_yellow_mult_var").value) + "x")} else {var rise_length_bright_yellow_var = (Number (document.getElementById("rise_length_bright_yellow_var").value))} 
      if (Number((document.getElementById("set_length_bright_yellow_mult_var").value)) !== 0) {var set_length_bright_yellow_var = ((document.getElementById("set_length_bright_yellow_mult_var").value) + "x")} else {var set_length_bright_yellow_var = (Number (document.getElementById("set_length_bright_yellow_var").value))}
      if (Number((document.getElementById("rise_length_bright_blue_mult_var").value)) !== 0) {var rise_length_bright_blue_var = ((document.getElementById("rise_length_bright_blue_mult_var").value) + "x")} else {var rise_length_bright_blue_var = (Number (document.getElementById("rise_length_bright_blue_var").value))} 
      if (Number((document.getElementById("set_length_bright_blue_mult_var").value)) !== 0) {var set_length_bright_blue_var = ((document.getElementById("set_length_bright_blue_mult_var").value) + "x")} else {var set_length_bright_blue_var = (Number (document.getElementById("set_length_bright_blue_var").value))}
      let lighting_parameters = TimeGiver({time: wake_time_hm, wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_CCT: (Number (document.getElementById("max_CCT_var").value)), min_CCT: (Number (document.getElementById("min_CCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_CCT: rise_length_CCT_var, set_length_CCT: set_length_CCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_CCT: (Number (document.getElementById("rise_slope_CCT_var").value)), set_slope_CCT: (Number (document.getElementById("set_slope_CCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value))})
      let lighting_parameters2 = TimeGiver({time: bed_time_hm, wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_CCT: (Number (document.getElementById("max_CCT_var").value)), min_CCT: (Number (document.getElementById("min_CCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_CCT: rise_length_CCT_var, set_length_CCT: set_length_CCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_CCT: (Number (document.getElementById("rise_slope_CCT_var").value)), set_slope_CCT: (Number (document.getElementById("set_slope_CCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value))})
      let lighting_parameters3 = TimeGiver({time: hm, wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_CCT: (Number (document.getElementById("max_CCT_var").value)), min_CCT: (Number (document.getElementById("min_CCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_CCT: rise_length_CCT_var, set_length_CCT: set_length_CCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_CCT: (Number (document.getElementById("rise_slope_CCT_var").value)), set_slope_CCT: (Number (document.getElementById("set_slope_CCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value))})
      var c = document.getElementById("visualizer");
      var ctx_blue = c.getContext("2d");
      ctx_blue.beginPath();
      ctx_blue.stroke();
      ctx_blue.font = "30px Arial";
      ctx_blue.fillStyle = "black";
      ctx_blue.fillText("", ((wake_time_hm/2)-20), (137-(lighting_parameters.bright_blue_int_ret/2)));
      ctx_blue.fillText("", ((bed_time_hm/2)-25), (132-(lighting_parameters2.bright_blue_int_ret/2)));
      ctx_blue.fillText("", ((hm/2)), (157-(lighting_parameters3.bright_blue_int_ret/2)));
      var ctx_yellow = c.getContext("2d");
      ctx_yellow.beginPath();
      ctx_yellow.strokeStyle = rgb_final_yellow;
      ctx_yellow.font = "30px Arial";
      ctx_yellow.fillStyle = "black";
      ctx_yellow.fillText("", ((wake_time_hm/2)-20), (137+(lighting_parameters.bright_yellow_int_ret/2)));
      ctx_yellow.fillText("", ((bed_time_hm/2)-25), (152+(lighting_parameters2.bright_yellow_int_ret/2)));
      ctx_yellow.fillText("", ((hm/2)), (137+(lighting_parameters3.bright_yellow_int_ret/2)));
      return;}
}

function linedrawer ({time}) {
    var wake_time = (document.getElementById("wake_time_var").value);
    var wake_time_hh = (wake_time.slice(0,2));
    var wake_time_hh_sixty = (wake_time_hh * 60);
    var wake_time_mm = wake_time.slice(-2);
    var wake_time_hm = (Number(wake_time_hh_sixty) + Number(wake_time_mm));
    var bed_time = (document.getElementById("bed_time_var").value);
    var bed_time_hh = (bed_time.slice(0,2));
    var bed_time_hh_sixty = (bed_time_hh * 60);
    var bed_time_mm = bed_time.slice(-2);
    var bed_time_hm = (Number(bed_time_hh_sixty) + Number(bed_time_mm));
    if (Number((document.getElementById("rise_length_bright_mult_var").value)) !== 0) {var rise_length_bright_var = ((document.getElementById("rise_length_bright_mult_var").value) + "x")} else {var rise_length_bright_var = (Number (document.getElementById("rise_length_bright_var").value))} 
    if (Number((document.getElementById("set_length_bright_mult_var").value)) !== 0) {var set_length_bright_var = ((document.getElementById("set_length_bright_mult_var").value) + "x")} else {var set_length_bright_var = (Number (document.getElementById("set_length_bright_var").value))}
    if (Number((document.getElementById("rise_length_CCT_var").value)) == 0) {var rise_length_CCT_var = ((document.getElementById("rise_length_CCT_mult_var").value) + "x")} else {var rise_length_CCT_var = (Number (document.getElementById("rise_length_CCT_var").value))} 
    if (Number((document.getElementById("set_length_CCT_var").value)) == 0) {var set_length_CCT_var = ((document.getElementById("set_length_CCT_mult_var").value) + "x")} else {var set_length_CCT_var = (Number (document.getElementById("set_length_CCT_var").value))}  
    let lighting_parameters = TimeGiver({time: time, wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_CCT: (Number (document.getElementById("max_CCT_var").value)), min_CCT: (Number (document.getElementById("min_CCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_CCT: rise_length_CCT_var, set_length_CCT: set_length_CCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_CCT: (Number (document.getElementById("rise_slope_CCT_var").value)), set_slope_CCT: (Number (document.getElementById("set_slope_CCT_var").value))})
    let rgb_values = xytorgb(lighting_parameters.white_x_ret, lighting_parameters.white_y_ret, 200)
    var rgb_final = "rgb("+rgb_values.r_gamma_ret+","+rgb_values.g_gamma_ret+","+rgb_values.b_gamma_ret+")";
    var c = document.getElementById("visualizer");
    var ctx = c.getContext("2d");
    ctx.beginPath();
    ctx.strokeStyle = rgb_final;
    ctx.strokeRect((time/2), (274 - lighting_parameters.bright_int_ret), 1, lighting_parameters.bright_int_ret);
    ctx.stroke();
    ctx.font = "30px Helvetica";
    ctx.fillStyle = "black";
    //ctx.fillText("", ((wake_time_hm/2)-20), (254-((Number (document.getElementById("min_bright_var").value))*254)));
    //ctx.fillText("", ((bed_time_hm/2)-25), (254-((Number (document.getElementById("min_bright_var").value))*254)));
    if (time <= 1440) {linedrawer ({time: (time + 2)})} else {
      var wake_time = (document.getElementById("wake_time_var").value);
      var wake_time_hh = (wake_time.slice(0,2));
      var wake_time_hh_sixty = (wake_time_hh * 60);
      var wake_time_mm = wake_time.slice(-2);
      var wake_time_hm = (Number(wake_time_hh_sixty) + Number(wake_time_mm));
      var bed_time = (document.getElementById("bed_time_var").value);
      var bed_time_hh = (bed_time.slice(0,2));
      var bed_time_hh_sixty = (bed_time_hh * 60);
      var bed_time_mm = bed_time.slice(-2);
      var bed_time_hm = (Number(bed_time_hh_sixty) + Number(bed_time_mm));
      var now = new Date(); //sets the variable now equal to the current date and time
      var hh = now.getHours(); //sets the variable hh equal to the number of hours that have passed since the day started.
      var hh_sixty = hh * 60; //sets the variable hh_sixty equal to the number of minutes in the day at the time of the last hour change.
      var mm = now.getMinutes(); //sets the variable mm equal to the number of minutes since the last hour
      var hm = hh_sixty + mm; //sets the variable hm equal to the total number of minutes that have passed since the day began.
      if (Number((document.getElementById("rise_length_bright_mult_var").value)) !== 0) {var rise_length_bright_var = ((document.getElementById("rise_length_bright_mult_var").value) + "x")} else {var rise_length_bright_var = (Number (document.getElementById("rise_length_bright_var").value))} 
      if (Number((document.getElementById("set_length_bright_mult_var").value)) !== 0) {var set_length_bright_var = ((document.getElementById("set_length_bright_mult_var").value) + "x")} else {var set_length_bright_var = (Number (document.getElementById("set_length_bright_var").value))}
      if (Number((document.getElementById("rise_length_CCT_var").value)) == 0) {var rise_length_CCT_var = ((document.getElementById("rise_length_CCT_mult_var").value) + "x")} else {var rise_length_CCT_var = (Number (document.getElementById("rise_length_CCT_var").value))} 
      if (Number((document.getElementById("set_length_CCT_var").value)) == 0) {var set_length_CCT_var = ((document.getElementById("set_length_CCT_mult_var").value) + "x")} else {var set_length_CCT_var = (Number (document.getElementById("set_length_CCT_var").value))}  
      let lighting_parameters = TimeGiver({time: wake_time_hm, wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_CCT: (Number (document.getElementById("max_CCT_var").value)), min_CCT: (Number (document.getElementById("min_CCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_CCT: rise_length_CCT_var, set_length_CCT: set_length_CCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_CCT: (Number (document.getElementById("rise_slope_CCT_var").value)), set_slope_CCT: (Number (document.getElementById("set_slope_CCT_var").value))})
      let lighting_parameters2 = TimeGiver({time: bed_time_hm, wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_CCT: (Number (document.getElementById("max_CCT_var").value)), min_CCT: (Number (document.getElementById("min_CCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_CCT: rise_length_CCT_var, set_length_CCT: set_length_CCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_CCT: (Number (document.getElementById("rise_slope_CCT_var").value)), set_slope_CCT: (Number (document.getElementById("set_slope_CCT_var").value))})
      let lighting_parameters3 = TimeGiver({time: hm, wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_CCT: (Number (document.getElementById("max_CCT_var").value)), min_CCT: (Number (document.getElementById("min_CCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_CCT: rise_length_CCT_var, set_length_CCT: set_length_CCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_CCT: (Number (document.getElementById("rise_slope_CCT_var").value)), set_slope_CCT: (Number (document.getElementById("set_slope_CCT_var").value))})
      var c = document.getElementById("visualizer");
      var ctx = c.getContext("2d");
      ctx.beginPath();
      ctx.font = "30px Arial";
      ctx.fillStyle = "black";
      ctx.fillText("", ((wake_time_hm/2)-20), (274-lighting_parameters.bright_int_ret));
      ctx.fillText("", ((bed_time_hm/2)-25), (274-lighting_parameters2.bright_int_ret));
      ctx.fillText("", ((hm/2)), (284-lighting_parameters3.bright_int_ret));
      return;}
}

function check() {
  if ((document.querySelector('#blueyellowactive:checked') !== null)) {
    document.getElementById("max_CCT_var").value = 7500;
    document.getElementById("min_CCT_var").value = 4000;
    var max_CCT_output = document.getElementById("max_CCT_label");
    max_CCT_output.innerHTML = (7500);
    var min_CCT_output = document.getElementById("min_CCT_label");
    min_CCT_output.innerHTML = (4000);
    document.getElementById("blueyellowsettings").style.display = "block";
    document.getElementById("blueyellowsettingsuparrow").style.display = "inline-block";
    document.getElementById("blueyellowsettingsdownarrow").style.display = "none";
    document.getElementById("bluelightlisttext").style.display = "block";
    document.getElementById("bluelightlist").style.display = "block";
    document.getElementById("bluelightlistuparrow").style.display = "inline-block";
    document.getElementById("bluelightlistdownarrow").style.display = "none";
    document.getElementById("yellowlightlisttext").style.display = "block";
    document.getElementById("yellowlightlist").style.display = "block";
    document.getElementById("yellowlightlistuparrow").style.display = "inline-block";
    document.getElementById("yellowlightlistdownarrow").style.display = "none";
    document.getElementById("bluelightlist").style.display = "inline-block";
    document.getElementById("yellowlightlist").style.display = "inline-block";} else if ((document.querySelector('#blueyellowactive:checked') === null)) {
    document.getElementById("max_CCT_var").value = 6000;
    document.getElementById("min_CCT_var").value = 2700;
    var max_CCT_output = document.getElementById("max_CCT_label");
    max_CCT_output.innerHTML = (6000);
    var min_CCT_output = document.getElementById("min_CCT_label");
    min_CCT_output.innerHTML = (2700);
    document.getElementById("blueyellowsettings").style.display = "none";
    document.getElementById("blueyellowsettingsuparrow").style.display = "none";
    document.getElementById("blueyellowsettingsdownarrow").style.display = "inline-block";
    document.getElementById("bluelightlist").style.display = "block";
    document.getElementById("bluelightlistuparrow").style.display = "none";
    document.getElementById("bluelightlistdownarrow").style.display = "inline-block";
    document.getElementById("yellowlightlist").style.display = "block";
    document.getElementById("yellowlightlistuparrow").style.display = "none";
    document.getElementById("yellowlightlistdownarrow").style.display = "inline-block";}
  lineremover()}

function lineremover() {
  var c = document.getElementById("visualizer");
  var ctx = c.getContext("2d");
  ctx.clearRect(0, 0, 720, 274);
  ctx.fillStyle = "white";
  ctx.fillRect(0, 0, 720, 274);
  if ((document.querySelector('#blueyellowactive:checked') !== null)) {
    //document.getElementById("max_bright_var").disabled = true;
    //document.getElementById("min_bright_var").disabled = true;
    //document.getElementById("rise_length_bright_var").disabled = true;  
    //document.getElementById("rise_length_bright_mult_var").disabled = true; 
    //document.getElementById("set_length_bright_var").disabled = true; 
    //document.getElementById("set_length_bright_mult_var").disabled = true;
    //document.getElementById("rise_slope_bright_var").disabled = true; 
    //document.getElementById("set_slope_bright_var").disabled = true;
    document.getElementById("max_bright_yellow_var").disabled = false;
    document.getElementById("min_bright_yellow_var").disabled = false;
    document.getElementById("max_bright_blue_var").disabled = false;
    document.getElementById("min_bright_blue_var").disabled = false;
    document.getElementById("max_scatdist_var").disabled = false;
    document.getElementById("min_scatdist_var").disabled = false;
    document.getElementById("max_scatangshift_var").disabled = false;
    document.getElementById("min_scatangshift_var").disabled = false;    
    document.getElementById("rise_length_bright_yellow_var").disabled = false;
    document.getElementById("set_length_bright_yellow_var").disabled = false;
    document.getElementById("rise_length_bright_blue_var").disabled = false;
    document.getElementById("set_length_bright_blue_var").disabled = false;
    document.getElementById("rise_length_scatdist_mult_var").disabled = false;
    document.getElementById("set_length_scatdist_mult_var").disabled = false;
    document.getElementById("rise_length_scatangshift_var").disabled = false;
    document.getElementById("set_length_scatangshift_var").disabled = false;
    document.getElementById("rise_length_bright_yellow_mult_var").disabled = false;
    document.getElementById("set_length_bright_yellow_mult_var").disabled = false;
    document.getElementById("rise_length_bright_blue_mult_var").disabled = false;
    document.getElementById("set_length_bright_blue_mult_var").disabled = false;
    document.getElementById("rise_length_scatdist_var").disabled = false;
    document.getElementById("set_length_scatdist_var").disabled = false;
    document.getElementById("rise_length_scatangshift_mult_var").disabled = false;
    document.getElementById("set_length_scatangshift_mult_var").disabled = false;
    document.getElementById("rise_slope_scatdist_var").disabled = false;
    document.getElementById("set_slope_scatdist_var").disabled = false;
    document.getElementById("rise_slope_scatangshift_var").disabled = false;
    document.getElementById("set_slope_scatangshift_var").disabled = false;
    document.getElementById("rise_slope_bright_yellow_var").disabled = false;
    document.getElementById("set_slope_bright_yellow_var").disabled = false;
    document.getElementById("rise_slope_bright_blue_var").disabled = false;
    document.getElementById("set_slope_bright_blue_var").disabled = false;
    blueyellowlinedrawer({time: 0})
} else if ((document.querySelector('#blueyellowactive:checked') === null)) {
    //document.getElementById("max_bright_var").disabled = false;
    //document.getElementById("min_bright_var").disabled = false;
    document.getElementById("max_bright_yellow_var").disabled = true;
    document.getElementById("min_bright_yellow_var").disabled = true;
    document.getElementById("max_bright_blue_var").disabled = true;
    document.getElementById("min_bright_blue_var").disabled = true;
    document.getElementById("max_scatdist_var").disabled = true;
    document.getElementById("min_scatdist_var").disabled = true;
    document.getElementById("max_scatangshift_var").disabled = true;
    document.getElementById("min_scatangshift_var").disabled = true;    
    document.getElementById("rise_length_bright_yellow_var").disabled = true;
    document.getElementById("set_length_bright_yellow_var").disabled = true;
    document.getElementById("rise_length_bright_blue_var").disabled = true;
    document.getElementById("set_length_bright_blue_var").disabled = true;
    document.getElementById("rise_length_scatdist_mult_var").disabled = true;
    document.getElementById("set_length_scatdist_mult_var").disabled = true;
    document.getElementById("rise_length_scatangshift_var").disabled = true;
    document.getElementById("set_length_scatangshift_var").disabled = true;
    document.getElementById("rise_length_bright_yellow_mult_var").disabled = true;
    document.getElementById("set_length_bright_yellow_mult_var").disabled = true;
    document.getElementById("rise_length_bright_blue_mult_var").disabled = true;
    document.getElementById("set_length_bright_blue_mult_var").disabled = true;
    document.getElementById("rise_length_scatdist_var").disabled = true;
    document.getElementById("set_length_scatdist_var").disabled = true;
    document.getElementById("rise_length_scatangshift_mult_var").disabled = true;
    document.getElementById("set_length_scatangshift_mult_var").disabled = true;
    document.getElementById("rise_slope_scatdist_var").disabled = true;
    document.getElementById("set_slope_scatdist_var").disabled = true;
    document.getElementById("rise_slope_scatangshift_var").disabled = true;
    document.getElementById("set_slope_scatangshift_var").disabled = true;
    document.getElementById("rise_slope_bright_yellow_var").disabled = true;
    document.getElementById("set_slope_bright_yellow_var").disabled = true;
    document.getElementById("rise_slope_bright_blue_var").disabled = true;
    document.getElementById("set_slope_bright_blue_var").disabled = true;
    //document.getElementById("rise_length_bright_var").disabled = false;  
    //document.getElementById("rise_length_bright_mult_var").disabled = false; 
    //document.getElementById("set_length_bright_var").disabled = false; 
    //document.getElementById("set_length_bright_mult_var").disabled = false;
    //document.getElementById("rise_slope_bright_var").disabled = false; 
    //document.getElementById("set_slope_bright_var").disabled = false;
    linedrawer({time: 0})
    
    }

  //var scheduler = setInterval (lightchanger(), 3000); 

}




    </script>
    
</head>
<body>

<canvas class= "canvas" id="visualizer" width="720" height="274">
Your browser does not support the canvas element.
</canvas>


<div>
    <p class="header">Welcome to TimeGiver's demo for Philips Hue smart lights</p>
    <p class="topleveltext">TimeGiver is a piece of computer code that builds smart lighting rhythms: 24-hour schedules that tell the lights how to change during the day to copy the sun. The rhythm tells the lights when to rise in the morning, how to get cooler around noon and warmer in the afternoon, and when to set in the evening. In nature, these kinds of changes in sunlight tell our brains when to have energy and when to feel sleepy. But humans today spend most of our time indoors, so our brains may get confused about when to be awake and when to be tired. By building a rhythm for indoor lights around your daily schedule, TimeGiver may help you feel more alert during the day and sleep better at night. TimeGiver also has a blue sky simulator that uses two sets of color lights, one to copy the yellow of the sun and the other to copy the blue of the sky, making for a more natural-feeling light. The simulator can copy everything from the crisp blue of midday to the golden hour of late afternoon and mellow blues of dusk, all while making colors look natural.</p>
    <p class="topleveltext">TimeGiver has lots of settings that allow you to make your rhythm just right for you and your home. But all the settings have good defaults, so to get started all you need to do is pick times to wake up and go to sleep. The box above shows your rhythm over 24 hours, starting at midnight. Taller lines are brighter, and the color of the lines is the real color that the lights will have at each moment. The sun and moon show your wake time and bed time and how bright your lights are at that moment. The person raising hands shows where you are in the rhythm right now. You can change the settings below and see the difference in your rhythm. Press the Start Demo button to set up your rhythm to work with your Philips Hue smart lights, and then use the lists of lights that show up to pick which of your lights you want to change and which you want to have turn on by themselves in the morning. The demo will only work as long as this page is open and your computer is awake and connected to your network, and lights will only follow the schedule when they are turned on. For more information about TimeGiver, check out: <a href="http://github.com/timotheonpaulonlee/TimeGiver" target="_blank"> TimeGiver on GitHub </a></p>
    <button class="topleveltext" type="button" id="startdemobutton" onclick="startdemo()">Start Demo</button>
    <button class="topleveltext" type="button" id="stopdemobutton" onclick="stopdemo()" disabled="true">Stop Demo</button>

    <p onclick="toggleelement('generalpurposesettings'); togglearrow('generalpurposesettingsuparrow'); togglearrow('generalpurposesettingsdownarrow');" class="settingheader1">General Purpose Rhythm Settings<span  id ="generalpurposesettingsuparrow" style="display: inline-block;"></span><span  id ="generalpurposesettingsdownarrow" style="display: none;"></span></p>
    <div id="generalpurposesettings" style="display: block;">

    <p onclick="toggleelement('generalpurposeimportantsettings'); togglearrow('generalpurposeimportantsettingsuparrow'); togglearrow('generalpurposeimportantsettingsdownarrow')" class="settingheader2">Settings most people may want to change<span  id ="generalpurposeimportantsettingsuparrow" style="display: inline-block;"></span><span  id ="generalpurposeimportantsettingsdownarrow" style="display: none;"></span></p>
    <div id="generalpurposeimportantsettings">

    <p class="settingheader3" onclick="toggleelement('whitelightlisttext'); togglearrow('whitelightlistuparrow'); togglearrow('whitelightlistdownarrow');">White Lights<span  id ="whitelightlistuparrow" style="display: inline-block;"></span><span  id ="whitelightlistdownarrow" style="display: none;"></span></p>
    <div id="whitelightlisttext"><p>Your Hue lights will appear here, allowing you to check next to the lights you want on your general white rhythm.<div id="whitelightlist"></div></p></div>

    <p class="settingheader3" onclick="toggleelement('autoonlightlisttext'); togglearrow('autoonlightlistuparrow'); togglearrow('autoonlightlistdownarrow');">Lights to turn on at sunrise<span  id ="autoonlightlistuparrow" style="display: inline-block;"></span><span  id ="autoonlightlistdownarrow" style="display: none;"></span></p>
    <div id="autoonlightlisttext"><p>Your lights controlled by the demo will appear here, allowing you to check next to the lights you want to turn on automatically at the beginning of your sunrise (i.e. probably your bedroom lights). The lights will only turn on automatically if they have power and are accessible from the app. Always set a backup alarm when using this feature, as a precaution.<div id="autoonlightlist"></div></p></div>
    
    <p class="settingheader3" onclick="toggleelement('overridesensorlisttext'); togglearrow('overridesensorlistuparrow'); togglearrow('overridesensorlistdownarrow');">Override Switches<span  id ="overridesensorlistuparrow" style="display: none;"></span><span  id ="overridesensorlistdownarrow" style="display: inline-block;"></span></p>
    <div id="overridesensorlisttext" style="display: none;"><p>Your Hue Dimmer Switches will appear here. Checking next to a switch will show you all the active lights on your rhythm, allowing you to check next to the lights you want to override with that switch. Pressing the up or down buttons on that switch will set those lights into an override mode, allowing the lights to be turned up or down as needed until the on or off button is pressed or an hour has passed.<div id="overridesensorlist"></div></p></div>

    <input type="time" id="wake_time_var" value="07:00" onchange="lineremover()"><div class="tooltip"> Wake Time</input><span class="tooltiptext">The time you actually plan to be awake and ready to get out of bed, allowing some time for the lights to wake you up.</span></div><br>
    <input type="time" id="bed_time_var" value="22:00" onchange="lineremover()"><div class="tooltip"> Bed Time</input><span class="tooltiptext">The time you actually plan to be in bed, allowing some time for the lights be dim before you go to bed.</span></div><br>  
    <div class="slidecontainer"><input type="range" min="0" max="1" value="1" step = "0.01" class="slider" id="max_bright_var" onchange="lineremover()"><div class="tooltip">Maximum Brightness: <span id="max_bright_label"></span> %</input><span class="tooltiptext">The brightest you want your lights to get at midday, which is 100% for most lights.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="1" value="0.05" step = "0.01" class="slider" id="min_bright_var" onchange="lineremover()"><div class="tooltip">Minimum Brightness: <span id="min_bright_label"></span> %</input><span class="tooltiptext">The dimmest you want your lights to get in the late evening and overnight. Think of this as your nightlight level, just enough light to safely use the bathroom or grab a snack.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="1000" max="12000" value="6000" step = "100" class="slider" id="max_CCT_var" onchange="lineremover()"><div class="tooltip">Maximum Color Temperature: <span id="max_CCT_label"></span> K</input><span class="tooltiptext">The coolest (or bluest) you want your lights to get at midday. Higher is cooler, and most lights max out around 6500K.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="1000" max="12000" value="2700" step = "100" class="slider" id="min_CCT_var" onchange="lineremover()"><div class="tooltip">Minimum Color Temperature: <span id="min_CCT_label"></span> K</input><span class="tooltiptext">The warmest (or reddest) you want your lights to get in the mornings and evenings. Lower is warmer, and most lights bottom out around 2700K.</span></div></div><br>
    </div>

    <p onclick="toggleelement('generalpurposeoptionalsettings'); togglearrow('generalpurposeoptionalsettingsuparrow'); togglearrow('generalpurposeoptionalsettingsdownarrow')" class="settingheader2">Settings some people may want to change<span  id ="generalpurposeoptionalsettingsuparrow" style="display: none;"></span><span  id ="generalpurposeoptionalsettingsdownarrow" style="display: inline-block;"></span></p>
    <div id="generalpurposeoptionalsettings" style="display: none;">
    <div class="slidecontainer"><input type="range" min="0" max="60" value="30" class="slider" id="wake_offset_var" onchange="lineremover()"><div class="tooltip">Wake Offset: <span id="wake_offset_label"></span> minutes</input><span class="tooltiptext">How soon before your wake time should the sunrise start. This should be higher for deep sleepers and lower for light sleepers.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="60" value="30" class="slider" id="bed_offset_var" onchange="lineremover()"><div class="tooltip">Bed Offset: <span id="bed_offset_label"></span> minutes</input><span class="tooltiptext">How soon before your bed time should the sunset end. This should be higher for hard sleepers and lower for easy sleepers.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="180" value="45" step = "5" class="slider" id="rise_length_bright_var" onchange="lineremover()"><div class="tooltip">Sunrise Brightness Length: <span id="rise_length_bright_label"></span> minutes, or:   </input><span class="tooltiptext">How fast your lights get brighter in the morning in minutes from sunrise.</span></div><input type="range" min="0" max="1" value="0" step = "0.05" class="slider" id="rise_length_bright_mult_var" onchange="lineremover()"><div class="tooltip"><span id="rise_length_bright_mult_label"></span>x times half day length </input><span class="tooltiptext">How fast should your lights get brighter in the morning as a fraction of half of your day length.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="180" value="180" step = "5" class="slider" id="set_length_bright_var" onchange="lineremover()"><div class="tooltip">Sunset Brightness Length: <span id="set_length_bright_label"></span> minutes, or:   </input><span class="tooltiptext">How fast your light get dimmer in the evening in minutes from before sunset.</span></div><input type="range" min="0" max="1" value="0" step = "0.05" class="slider" id="set_length_bright_mult_var" onchange="lineremover()"><div class="tooltip"><span id="set_length_bright_mult_label"></span>x times half day length </input><span class="tooltiptext">How fast should your lights get dimmer in the evening as a fraction of half of your day length.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="1" value="1" step = "0.05" class="slider" id="rise_length_CCT_mult_var" onchange="lineremover()"><div class="tooltip">Sunrise Color Temperature Length: <span id="rise_length_CCT_mult_label"></span>x times half day length, or:   </input><span class="tooltiptext">How fast your lights go from warm to cool in the morning as a fraction of half your day length.</span></div><input type="range" min="0" max="180" value="0" step = "5" class="slider" id="rise_length_CCT_var" onchange="lineremover()"><div class="tooltip"><span id="rise_length_CCT_label"></span> minutes</input><span class="tooltiptext">How fast should your lights go from warm to cool in the morning in minutes from sunrise.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="1" value="1" step = "0.05" class="slider" id="set_length_CCT_mult_var" onchange="lineremover()"><div class="tooltip">Sunset Color Temperature Length: <span id="set_length_CCT_mult_label"></span>x times half day length, or:   </input><span class="tooltiptext">How fast your lights go from cool back to warm in the evening as a fraction of half your day length.</span></div><input type="range" min="0" max="180" value="0" step = "5" class="slider" id="set_length_CCT_var" onchange="lineremover()"><div class="tooltip"><span id="set_length_CCT_label"></span> minutes</input><span class="tooltiptext">How fast should your lights go from cool back to warm in the afternoon in minutes from before sunset.</span></div></div><br>
    </div>

    
    <p onclick="toggleelement('generalpurposeadvancedsettings'); togglearrow('generalpurposeadvanceduparrow'); togglearrow('generalpurposeadvanceddownarrow');" class="settingheader2">Settings few people may want to change<span  id ="generalpurposeadvanceduparrow" style="display: none;"></span><span  id ="generalpurposeadvanceddownarrow" style="display: inline-block;"></span></p>
    <div id="generalpurposeadvancedsettings" style="display: none;">
    <div class="slidecontainer"><input type="range" min="-100" max="100" value="0" step = "1" class="slider" id="rise_slope_bright_var" onchange="lineremover()"><div class="tooltip">Sunrise Brightness Slope: <span id="rise_slope_bright_label"></span></input><span class="tooltiptext">How fast your lights get brighter early in the morning compared to later. Higher numbers mean fast early sunrises that slow down later.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-100" max="100" value="0" step = "1" class="slider" id="set_slope_bright_var" onchange="lineremover()"><div class="tooltip">Sunset Brightness Slope: <span id="set_slope_bright_label"></span></input><span class="tooltiptext">How fast your lights get dimmer later in the evening compared to earlier. Higher numbers mean slow early sunsets that speed up later.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-100" max="100" value="0" step = "1" class="slider" id="rise_slope_CCT_var" onchange="lineremover()"><div class="tooltip">Sunrise Color Temperature Slope: <span id="rise_slope_CCT_label"></span></input><span class="tooltiptext">How fast your lights get cooler early in the morning compared to later. Higher numbers mean fast early sunrises that slow down later.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-100" max="100" value="0" step = "1" class="slider" id="set_slope_CCT_var" onchange="lineremover()"><div class="tooltip">Sunset Color Temperature Slope: <span id="set_slope_CCT_label"></span></input><span class="tooltiptext">How fast your lights get dimmer later in the evening compared to earlier. Higher numbers mean slow early sunsets that speed up later.</span></div></div><br>
    </div>
    </div>

    <input class="topleveltext" type="checkbox" id="blueyellowactive" value="true" onchange="check()">Blue Sky Sunlight Simulator Active</input><br>
    <p onclick="toggleelement('blueyellowsettings'); togglearrow('blueyellowsettingsuparrow'); togglearrow('blueyellowsettingsdownarrow');" class="settingheader1" style="white-space: nowrap;">Blue Sky Sunlight Simulator Specific Settings <span  id ="blueyellowsettingsuparrow" style="display: none;"></span><span  id ="blueyellowsettingsdownarrow" style="display: inline-block;"></span></p>
    <div id="blueyellowsettings" style="display: none;">
    <p onclick="toggleelement('blueyellowimportantsettings'); togglearrow('blueyellowimportantsettingsuparrow'); togglearrow('blueyellowimportantsettingsdownarrow');" class="settingheader2">Settings most people may want to change<span  id ="blueyellowimportantsettingsuparrow" style="display: inline-block;"></span><span  id ="blueyellowimportantsettingsdownarrow" style="display: none;"></span></p>
    <div id="blueyellowimportantsettings">
    
    <p class="settingheader3" onclick="toggleelement('bluelightlisttext'); togglearrow('bluelightlistuparrow'); togglearrow('bluelightlistdownarrow');">Color Lights for Blue Sky<span  id ="bluelightlistuparrow" style="display: none;"></span><span  id ="bluelightlistdownarrow" style="display: inline-block;"></span></p>
    <p id="bluelightlisttext" style="display: none;">Your Hue color lights will appear here, allowing you to check next to the lights you want on your blue rhythm when using the blue sky sunlight simulator.<div id="bluelightlist" style="display: none;"></div></p>

    <p class="settingheader3" onclick="toggleelement('yellowlightlisttext'); togglearrow('yellowlightlistuparrow'); togglearrow('yellowlightlistdownarrow');">Color Lights for Direct Sun<span  id ="yellowlightlistuparrow" style="display: none;"></span><span  id ="yellowlightlistdownarrow" style="display: inline-block;"></span></p>
    <p id="yellowlightlisttext" style="display: none;">Your Hue color lights will appear here, allowing you to check next to the lights you want on your yellow rhythm when using the blue sky sunlight simulator. <div id="yellowlightlist" style="display: none;"></div></p>

    <div class="slidecontainer"><input type="range" min="0" max="1" value="1" step = "0.01" class="slider" id="max_bright_yellow_var" onchange="lineremover()"><div class="tooltip">Maximum Yellow Brightness: <span id="max_bright_yellow_label"></span> %</input><span class="tooltiptext">The brightest you want your yellow lights to get at midday, which is 100% for most lights. Setting this higher than the maximum blue brightness mimics direct sunlight at midday.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="1" value="0.05" step = "0.01" class="slider" id="min_bright_yellow_var" onchange="lineremover()"><div class="tooltip">Minimum Yellow Brightness: <span id="min_bright_yellow_label"></span> %</input><span class="tooltiptext">The dimmest you want your yellow lights to get in the late evening and overnight. Think of this as your nightlight level, just enough light to safely use the bathroom or grab a snack. Setting this higher than the minimum blue brightness mimics direct sunlight in the late evening.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="1" value="1" step = "0.01" class="slider" id="max_bright_blue_var" onchange="lineremover()"><div class="tooltip">Maximum Blue Brightness: <span id="max_bright_blue_label"></span> %</input><span class="tooltiptext">The brightest you want your blue lights to get at midday, which is 100% for most lights. Setting this higher than the maximum yellow brightness mimics indirect sunlight at midday.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="1" value="0.05" step = "0.01" class="slider" id="min_bright_blue_var" onchange="lineremover()"><div class="tooltip">Minimum Blue Brightness: <span id="min_bright_blue_label"></span> %</input><span class="tooltiptext">The dimmest you want your blue lights to get in the late evening and overnight. Think of this as your nightlight level, just enough light to safely use the bathroom or grab a snack. Setting this higher than the minimum yellow brightness mimics indirect sunlight in the late evening.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="4000" value="3000" step = "100" class="slider" id="max_scatdist_var" onchange="lineremover()"><div class="tooltip">Maximum Blue-Yellow Scatter Distance: <span id="max_scatdist_label"></span> K</input><span class="tooltiptext">How extreme the contrast between your blue and yellow lights will be at midday. Higher numbers make for more saturated colors at midday.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="4000" value="2000" step = "100" class="slider" id="min_scatdist_var" onchange="lineremover()"><div class="tooltip">Minimum Blue-Yellow Scatter Distance: <span id="min_scatdist_label"></span> K</input><span class="tooltiptext">How extreme the contrast between your blue and yellow lights will be in the early morning and late evening. Higher numbers make for more saturated colors at sunrise and sunset.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-30" max="60" value="15" step = "1" class="slider" id="max_scatangshift_var" onchange="lineremover()"><div class="tooltip">Maximum Blue-Yellow Angle Shift: <span id="max_scatangshift_label"></span> degrees</input><span class="tooltiptext">How much the yellow lights are shifted toward deeper yellows and your blue lights are shifted toward deeper blues in the early morning and late evening. Higher numbers make for more yellow sunsets, but numbers too high can bring out greens and purples beyond a typical sunset. Lower numbers make for more white or pink sunsets.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-30" max="60" value="0" step = "1" class="slider" id="min_scatangshift_var" onchange="lineremover()"><div class="tooltip">Minimum Blue-Yellow Angle Shift: <span id="min_scatangshift_label"></span> degrees</input><span class="tooltiptext">How much the yellow lights are shifted toward deeper yellows and your blue lights are shifted toward deeper blues around midday. Higher numbers make for more dramatic, colorful middays, as in the region around a wildfire. This should usually be left at 0.</span></div></div><br>
    </div>

    <p onclick="toggleelement('blueyellowoptionalsettings'); togglearrow('blueyellowoptionalsettingsuparrow'); togglearrow('blueyellowoptionalsettingsdownarrow');" class="settingheader2">Settings some people may want to change<span  id ="blueyellowoptionalsettingsuparrow" style="display: none;"></span><span  id ="blueyellowoptionalsettingsdownarrow" style="display: inline-block;"></span></p>
    <div id="blueyellowoptionalsettings" style="display: none;">
    <div class="slidecontainer"><input type="range" min="0" max="180" value="30" step = "5" class="slider" id="rise_length_bright_yellow_var" onchange="lineremover()"><div class="tooltip">Sunrise Yellow Brightness Length: <span id="rise_length_bright_yellow_label"></span> minutes, or:   </input><span class="tooltiptext">How fast your yellow lights get brighter in the morning in minutes from sunrise. Setting this lower than the sunrise blue brightness length makes for a more dramatic golden hour around sunrise.</span></div><input type="range" min="0" max="1" value="0" step = "0.05" class="slider" id="rise_length_bright_yellow_mult_var" onchange="lineremover()"><div class="tooltip"><span id="rise_length_bright_yellow_mult_label"></span>x times half day length </input><span class="tooltiptext">How fast your yellow lights get brighter in the morning as a fraction of the half day length. Setting this lower than the sunrise blue brightness length makes for a more dramatic golden hour around sunrise.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="180" value="90" step = "5" class="slider" id="set_length_bright_yellow_var" onchange="lineremover()"><div class="tooltip">Sunset Yellow Brightness Length: <span id="set_length_bright_yellow_label"></span> minutes, or:   </input><span class="tooltiptext">How fast your yellow lights get dimmer in the evening in minutes from before sunset. Setting this lower than the sunset blue brightness length makes for a more dramatic golden hour around sunset.</span></div><input type="range" min="0" max="1" value="0" step = "0.05" class="slider" id="set_length_bright_yellow_mult_var" onchange="lineremover()"><div class="tooltip"><span id="set_length_bright_yellow_mult_label"></span>x times half day length </input><span class="tooltiptext">How fast your yellow lights get dimmer in the evening as a fraction of the half day length. Setting this lower than the sunset blue brightness length makes for a more dramatic golden hour around sunset.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="180" value="60" step = "5" class="slider" id="rise_length_bright_blue_var" onchange="lineremover()"><div class="tooltip">Sunrise Blue Brightness Length: <span id="rise_length_bright_blue_label"></span> minutes, or:   </input><span class="tooltiptext">How fast your blue lights get brighter in the morning in minutes from sunrise. Setting this higher than the sunrise yellow brightness length makes for a more dramatic golden hour around sunrise.</span></div><input type="range" min="0" max="1" value="0" step = "0.05" class="slider" id="rise_length_bright_blue_mult_var" onchange="lineremover()"><div class="tooltip"><span id="rise_length_bright_blue_mult_label"></span>x times half day length </input><span class="tooltiptext">How fast your blue lights get brighter in the morning as a fraction of the half day length. Setting this higher than the sunrise yellow brightness length makes for a more dramatic golden hour around sunrise.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="180" value="180" step = "5" class="slider" id="set_length_bright_blue_var" onchange="lineremover()"><div class="tooltip">Sunset Blue Brightness Length: <span id="set_length_bright_blue_label"></span> minutes, or:   </input><span class="tooltiptext">How fast your blue lights get dimmer in the evening in minutes from before sunset. Setting this higher than the sunset yellow brightness length makes for a more dramatic golden hour around sunset.</span></div><input type="range" min="0" max="1" value="0" step = "0.05" class="slider" id="set_length_bright_blue_mult_var" onchange="lineremover()"><div class="tooltip"><span id="set_length_bright_blue_mult_label"></span>x times half day length </input><span class="tooltiptext">How fast your blue lights get dimmer in the evening in minutes as a fraction of the half day length. Setting this higher than the sunset yellow brightness length makes for a more dramatic golden hour around sunset.</span></div></div><br>
    </div>

    <p onclick="toggleelement('blueyellowadvancedsettings'); togglearrow('blueyellowadvancedsettingsuparrow'); togglearrow('blueyellowadvancedsettingsdownarrow');" class="settingheader2">Settings few people may want to change<span  id ="blueyellowadvancedsettingsuparrow" style="display: none;"></span><span  id ="blueyellowadvancedsettingsdownarrow" style="display: inline-block;"></span></p>
    <div id="blueyellowadvancedsettings" style="display: none;">
    <div class="slidecontainer"><input type="range" min="0" max="1" value="1" step = "0.05" class="slider" id="rise_length_scatdist_mult_var" onchange="lineremover()"><div class="tooltip">Sunrise Blue-Yellow Scatter Distance Length: <span id="rise_length_scatdist_mult_label"></span>x times half day length, or:   </input><span class="tooltiptext">How fast the contrast between your blue and yellow lights gets more extreme in the morning as a fraction of half day length. Higher numbers make for a smoother transition between the saturated colors of sunrise and the paler colors of midday.</span></div><input type="range" min="0" max="180" value="0" step = "5" class="slider" id="rise_length_scatdist_var" onchange="lineremover()"><div class="tooltip"><span id="rise_length_scatdist_label"></span> minutes</input><span class="tooltiptext">How fast the contrast between your blue and yellow lights gets more extreme in the morning in minutes from sunrise. Higher numbers make for a smoother transition between the saturated colors of sunrise and sunset and the paler colors of midday.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="1" value="1" step = "0.05" class="slider" id="set_length_scatdist_mult_var" onchange="lineremover()"><div class="tooltip">Sunset Blue-Yellow Scatter Distance Length: <span id="set_length_scatdist_mult_label"></span>x times half day length, or:   </input><span class="tooltiptext">How fast the contrast between your blue and yellow lights gets less extreme in the evening as a fraction of half day length. Higher numbers make for a smoother transition between the paler colors of midday and the saturated colors of sunset.</span></div><input type="range" min="0" max="180" value="0" step = "5" class="slider" id="set_length_scatdist_var" onchange="lineremover()"><div class="tooltip"><span id="set_length_scatdist_label"></span> minutes</input><span class="tooltiptext">How fast the contrast between your blue and yellow lights gets less extreme in the evening in minutes from before sunset. Higher numbers make for a smoother transition between the paler colors of midday and the saturated colors of sunset.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="300" value="240" step = "5" class="slider" id="rise_length_scatangshift_var" onchange="lineremover()"><div class="tooltip">Sunrise Blue-Yellow Angle Shift Length: <span id="rise_length_scatangshift_label"></span> minutes, or:   </input><span class="tooltiptext">How fast the shift of your yellow lights toward deeper yellows and your blue lights toward deeper blues fades in the morning in minutes from sunrise. Higher numbers make for a longer morning golden hour.</span></div><input type="range" min="0" max="1" value="0" step = "0.05" class="slider" id="rise_length_scatangshift_mult_var" onchange="lineremover()"><div class="tooltip"><span id="rise_length_scatangshift_mult_label"></span>x times half day length </input><span class="tooltiptext">How fast the shift of your yellow lights toward deeper yellows and your blue lights toward deeper blues fades in the morning as a fraction of half day length. Higher numbers make for a longer morning golden hour.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="300" value="240" step = "5" class="slider" id="set_length_scatangshift_var" onchange="lineremover()"><div class="tooltip">Sunset Blue-Yellow Angle Shift Length: <span id="set_length_scatangshift_label"></span> minutes, or:   </input><span class="tooltiptext">How fast the shift of your yellow lights toward deeper yellows and your blue lights toward deeper blues increases in the evening in minutes from before sunset. Higher numbers make for a longer afternoon golden hour.</span></div><input type="range" min="0" max="1" value="0" step = "0.05" class="slider" id="set_length_scatangshift_mult_var" onchange="lineremover()"><div class="tooltip"><span id="set_length_scatangshift_mult_label"></span>x times half day length </input><span class="tooltiptext">How fast the shift of your yellow lights toward deeper yellows and your blue lights toward deeper blues increases in the evening as a fraction of half day length. Higher numbers make for a longer afternoon golden hour.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-100" max="100" value="0" step = "1" class="slider" id="rise_slope_scatdist_var" onchange="lineremover()"><div class="tooltip">Sunrise Blue-Yellow Scatter Distance Slope: <span id="rise_slope_scatdist_label"></span></input><span class="tooltiptext">How fast the contrast between your blue and yellow lights gets more extreme early in the morning compared to later. Higher numbers mean more pronounced increase in saturation of colors earlier in the morning and less change around midday.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-100" max="100" value="0" step = "1" class="slider" id="set_slope_scatdist_var" onchange="lineremover()"><div class="tooltip">Sunset Blue-Yellow Scatter Distance Slope: <span id="set_slope_scatdist_label"></span></input><span class="tooltiptext">How fast the contrast between your blue and yellow lights gets less extreme late in the afternoon compared to earlier. Higher numbers mean more pronounced decrease in saturation of colors later in the evening and less change around midday.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-100" max="100" value="0" step = "1" class="slider" id="rise_slope_scatangshift_var" onchange="lineremover()"><div class="tooltip">Sunrise Blue-Yellow Angle Shift Slope: <span id="rise_slope_scatangshift_label"></span></input><span class="tooltiptext">How fast the shift of your yellow lights toward deeper yellows and your blue lights toward deeper blues decreases early in the morning compared to later. Higher numbers mean shorter golden hours in the morning without changing coloration at midday.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-100" max="100" value="0" step = "1" class="slider" id="set_slope_scatangshift_var" onchange="lineremover()"><div class="tooltip">Sunset Blue-Yellow Angle Shift Slope: <span id="set_slope_scatangshift_label"></span></input><span class="tooltiptext">How fast the shift of your yellow lights toward deeper yellows and your blue lights toward deeper blues increases late in the evening compared to earlier. Higher numbers mean shorter golden hours in the evening without changing coloration at midday.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-100" max="100" value="0" step = "1" class="slider" id="rise_slope_bright_yellow_var" onchange="lineremover()"><div class="tooltip">Sunrise Yellow Brightness Slope: <span id="rise_slope_bright_yellow_label"></span></input><span class="tooltiptext">How fast your yellow lights get brighter early in the morning compared to later. Higher numbers mean fast early sunrises that slow down later.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-100" max="100" value="0" step = "1" class="slider" id="set_slope_bright_yellow_var" onchange="lineremover()"><div class="tooltip">Sunset Yellow Brightness Slope: <span id="set_slope_bright_yellow_label"></span></input><span class="tooltiptext">How fast your yellow lights get dimmer later in the evening compared to earlier. Higher numbers mean slow early sunsets that speed up later.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-100" max="100" value="0" step = "1" class="slider" id="rise_slope_bright_blue_var" onchange="lineremover()"><div class="tooltip">Sunrise Blue Brightness Slope: <span id="rise_slope_bright_blue_label"></span></input><span class="tooltiptext">How fast your blue lights get brighter early in the morning compared to later. Higher numbers mean fast early sunrises that slow down later.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-100" max="100" value="0" step = "1" class="slider" id="set_slope_bright_blue_var" onchange="lineremover()"><div class="tooltip">Sunset Blue Brightness Slope: <span id="set_slope_bright_blue_label"></span></input><span class="tooltiptext">How fast your blue lights get dimmer later in the evening compared to earlier. Higher numbers mean slow early sunsets that speed up later.</span></div></div><br>
    </div>
    </div>

    <button class="topleveltext" type="button" id="savesettingsbutton" onclick="savesettings()">Save Settings</button>
    <button class="topleveltext" type="button" id="restoresettingsbutton" onclick="restoresettings()">Restore Saved Settings</button>

    <p onclick="toggleelement('attributionssettings'); togglearrow('attributionssettingsuparrow'); togglearrow('attributionssettingsdownarrow');" class="settingheader1">Attributions<span  id="attributionssettingsuparrow" style="display: inline-block;"></span><span  id="attributionssettingsdownarrow" style="display: none;"></span></p>
    <p class="topleveltext" id="attributionssettings">TimeGiver is based on the research and development work of Timothy Lee, a 3rd-year medical student at Mayo Clinic Alix School of Medicine with strong interests in circadian rhythm disorders and the importance of regular, restorative sleep to good mental health. Questions and comments can be directed to Timothy Lee on <a href= "https://github.com/timotheonpaulonlee" target="_blank">Github</a> or <a href= "http://linkedin.com/in/timothy-paul-lee/" target="_blank">LinkedIn</a>.</p>

    <p onclick="toggleelement('disclaimersettings'); togglearrow('disclaimersettingsuparrow'); togglearrow('disclaimersettingsdownarrow');" class="settingheader1">License & Disclaimer<span  id="disclaimersettingsuparrow" style="display: none;"></span><span  id="disclaimersettingsdownarrow" style="display: inline-block;"></span></p>
    <div id="disclaimersettings" style="display: none;"><p>MIT License Copyright (c) 2020 Timothy Lee</p>
    <p class="topleveltext">Permission is hereby granted, free of charge, to any person obtaining a copy
      of this software and associated documentation files (the "Software"), to deal
      in the Software without restriction, including without limitation the rights
      to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
      copies of the Software, and to permit persons to whom the Software is
      furnished to do so, subject to the following conditions:</p>
    <p class="topleveltext">The above copyright notice and this permission notice shall be included in all
      copies or substantial portions of the Software.</p>
    <p class="topleveltext">THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
      IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
      FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
      AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
      LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
      OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
      SOFTWARE.</p>
    <p class="topleveltext">This demo also relies heavily on <a href= "https://github.com/timotheonpaulonlee/jshue" target="_blank">jshue</a>, an open-source javascript API wrapper for Philips Hue
      developed by John Peloquin available under the <a href= "https://github.com/blargoner/jshue/blob/master/LICENSE" target="_blank">MIT License</a> as shown above, Copyright 2013 - 2017, John Peloquin 
      and the jsHue contributors.
    </p>
    </div>
</div>

<script>
    var wake_offset_slider = document.getElementById("wake_offset_var");
    var wake_offset_output = document.getElementById("wake_offset_label");
    wake_offset_output.innerHTML = wake_offset_slider.value;
    wake_offset_slider.oninput = function() {wake_offset_output.innerHTML = this.value;}

    var bed_offset_slider = document.getElementById("bed_offset_var");
    var bed_offset_output = document.getElementById("bed_offset_label");
    bed_offset_output.innerHTML = bed_offset_slider.value;
    bed_offset_slider.oninput = function() {bed_offset_output.innerHTML = this.value;}

    var max_bright_slider = document.getElementById("max_bright_var");
    var max_bright_output = document.getElementById("max_bright_label");
    max_bright_output.innerHTML = (max_bright_slider.value * 100);
    max_bright_slider.oninput = function() {max_bright_output.innerHTML = (Math.round(this.value * 100));}

    var min_bright_slider = document.getElementById("min_bright_var");
    var min_bright_output = document.getElementById("min_bright_label");
    min_bright_output.innerHTML = (min_bright_slider.value * 100);
    min_bright_slider.oninput = function() {min_bright_output.innerHTML = (Math.round(this.value * 100));}

    var max_CCT_slider = document.getElementById("max_CCT_var");
    var max_CCT_output = document.getElementById("max_CCT_label");
    max_CCT_output.innerHTML = (max_CCT_slider.value);
    max_CCT_slider.oninput = function() {max_CCT_output.innerHTML = (Math.round(this.value));}

    var min_CCT_slider = document.getElementById("min_CCT_var");
    var min_CCT_output = document.getElementById("min_CCT_label");
    min_CCT_output.innerHTML = (min_CCT_slider.value);
    min_CCT_slider.oninput = function() {min_CCT_output.innerHTML = (Math.round(this.value));}

    var rise_length_bright_slider = document.getElementById("rise_length_bright_var");
    var rise_length_bright_output = document.getElementById("rise_length_bright_label");
    rise_length_bright_output.innerHTML = rise_length_bright_slider.value;
    rise_length_bright_slider.oninput = function() {rise_length_bright_output.innerHTML = this.value;}

    var rise_length_bright_mult_slider = document.getElementById("rise_length_bright_mult_var");
    var rise_length_bright_mult_output = document.getElementById("rise_length_bright_mult_label");
    rise_length_bright_mult_output.innerHTML = rise_length_bright_mult_slider.value;
    rise_length_bright_mult_slider.oninput = function() {rise_length_bright_mult_output.innerHTML = this.value;}

    var set_length_bright_slider = document.getElementById("set_length_bright_var");
    var set_length_bright_output = document.getElementById("set_length_bright_label");
    set_length_bright_output.innerHTML = set_length_bright_slider.value;
    set_length_bright_slider.oninput = function() {set_length_bright_output.innerHTML = this.value;}

    var set_length_bright_mult_slider = document.getElementById("set_length_bright_mult_var");
    var set_length_bright_mult_output = document.getElementById("set_length_bright_mult_label");
    set_length_bright_mult_output.innerHTML = set_length_bright_mult_slider.value;
    set_length_bright_mult_slider.oninput = function() {set_length_bright_mult_output.innerHTML = this.value;}

    var rise_length_CCT_slider = document.getElementById("rise_length_CCT_var");
    var rise_length_CCT_output = document.getElementById("rise_length_CCT_label");
    rise_length_CCT_output.innerHTML = rise_length_CCT_slider.value;
    rise_length_CCT_slider.oninput = function() {rise_length_CCT_output.innerHTML = this.value;}

    var rise_length_CCT_mult_slider = document.getElementById("rise_length_CCT_mult_var");
    var rise_length_CCT_mult_output = document.getElementById("rise_length_CCT_mult_label");
    rise_length_CCT_mult_output.innerHTML = rise_length_CCT_mult_slider.value;
    rise_length_CCT_mult_slider.oninput = function() {rise_length_CCT_mult_output.innerHTML = this.value;}

    var set_length_CCT_slider = document.getElementById("set_length_CCT_var");
    var set_length_CCT_output = document.getElementById("set_length_CCT_label");
    set_length_CCT_output.innerHTML = set_length_CCT_slider.value;
    set_length_CCT_slider.oninput = function() {set_length_CCT_output.innerHTML = this.value;}

    var set_length_CCT_mult_slider = document.getElementById("set_length_CCT_mult_var");
    var set_length_CCT_mult_output = document.getElementById("set_length_CCT_mult_label");
    set_length_CCT_mult_output.innerHTML = set_length_CCT_mult_slider.value;
    set_length_CCT_mult_slider.oninput = function() {set_length_CCT_mult_output.innerHTML = this.value;}

    var rise_slope_bright_slider = document.getElementById("rise_slope_bright_var");
    var rise_slope_bright_output = document.getElementById("rise_slope_bright_label");
    rise_slope_bright_output.innerHTML = (rise_slope_bright_slider.value);
    rise_slope_bright_slider.oninput = function() {rise_slope_bright_output.innerHTML = (Math.round(this.value));}

    var set_slope_bright_slider = document.getElementById("set_slope_bright_var");
    var set_slope_bright_output = document.getElementById("set_slope_bright_label");
    set_slope_bright_output.innerHTML = (set_slope_bright_slider.value);
    set_slope_bright_slider.oninput = function() {set_slope_bright_output.innerHTML = (Math.round(this.value));}

    var rise_slope_CCT_slider = document.getElementById("rise_slope_CCT_var");
    var rise_slope_CCT_output = document.getElementById("rise_slope_CCT_label");
    rise_slope_CCT_output.innerHTML = (rise_slope_CCT_slider.value);
    rise_slope_CCT_slider.oninput = function() {rise_slope_CCT_output.innerHTML = (Math.round(this.value));}

    var set_slope_CCT_slider = document.getElementById("set_slope_CCT_var");
    var set_slope_CCT_output = document.getElementById("set_slope_CCT_label");
    set_slope_CCT_output.innerHTML = (set_slope_CCT_slider.value);
    set_slope_CCT_slider.oninput = function() {set_slope_CCT_output.innerHTML = (Math.round(this.value));}

    var max_scatdist_slider = document.getElementById("max_scatdist_var");
    var max_scatdist_output = document.getElementById("max_scatdist_label");
    max_scatdist_output.innerHTML = (max_scatdist_slider.value);
    max_scatdist_slider.oninput = function() {max_scatdist_output.innerHTML = (Math.round(this.value));}

    var min_scatdist_slider = document.getElementById("min_scatdist_var");
    var min_scatdist_output = document.getElementById("min_scatdist_label");
    min_scatdist_output.innerHTML = (min_scatdist_slider.value);
    min_scatdist_slider.oninput = function() {min_scatdist_output.innerHTML = (Math.round(this.value));}

    var max_scatangshift_slider = document.getElementById("max_scatangshift_var");
    var max_scatangshift_output = document.getElementById("max_scatangshift_label");
    max_scatangshift_output.innerHTML = (max_scatangshift_slider.value);
    max_scatangshift_slider.oninput = function() {max_scatangshift_output.innerHTML = (Math.round(this.value));}

    var min_scatangshift_slider = document.getElementById("min_scatangshift_var");
    var min_scatangshift_output = document.getElementById("min_scatangshift_label");
    min_scatangshift_output.innerHTML = (min_scatangshift_slider.value);
    min_scatangshift_slider.oninput = function() {min_scatangshift_output.innerHTML = (Math.round(this.value));}

    var max_bright_yellow_slider = document.getElementById("max_bright_yellow_var");
    var max_bright_yellow_output = document.getElementById("max_bright_yellow_label");
    max_bright_yellow_output.innerHTML = (max_bright_yellow_slider.value * 100);
    max_bright_yellow_slider.oninput = function() {max_bright_yellow_output.innerHTML = (Math.round(this.value * 100));}

    var min_bright_yellow_slider = document.getElementById("min_bright_yellow_var");
    var min_bright_yellow_output = document.getElementById("min_bright_yellow_label");
    min_bright_yellow_output.innerHTML = (min_bright_yellow_slider.value * 100);
    min_bright_yellow_slider.oninput = function() {min_bright_yellow_output.innerHTML = (Math.round(this.value * 100));}

    var max_bright_blue_slider = document.getElementById("max_bright_blue_var");
    var max_bright_blue_output = document.getElementById("max_bright_blue_label");
    max_bright_blue_output.innerHTML = (max_bright_blue_slider.value * 100);
    max_bright_blue_slider.oninput = function() {max_bright_blue_output.innerHTML = (Math.round(this.value * 100));}

    var min_bright_blue_slider = document.getElementById("min_bright_blue_var");
    var min_bright_blue_output = document.getElementById("min_bright_blue_label");
    min_bright_blue_output.innerHTML = (min_bright_blue_slider.value * 100);
    min_bright_blue_slider.oninput = function() {min_bright_blue_output.innerHTML = (Math.round(this.value * 100));}

    var rise_length_scatdist_slider = document.getElementById("rise_length_scatdist_var");
    var rise_length_scatdist_output = document.getElementById("rise_length_scatdist_label");
    rise_length_scatdist_output.innerHTML = rise_length_scatdist_slider.value;
    rise_length_scatdist_slider.oninput = function() {rise_length_scatdist_output.innerHTML = this.value;}

    var rise_length_scatdist_mult_slider = document.getElementById("rise_length_scatdist_mult_var");
    var rise_length_scatdist_mult_output = document.getElementById("rise_length_scatdist_mult_label");
    rise_length_scatdist_mult_output.innerHTML = rise_length_scatdist_mult_slider.value;
    rise_length_scatdist_mult_slider.oninput = function() {rise_length_scatdist_mult_output.innerHTML = this.value;}

    var set_length_scatdist_slider = document.getElementById("set_length_scatdist_var");
    var set_length_scatdist_output = document.getElementById("set_length_scatdist_label");
    set_length_scatdist_output.innerHTML = set_length_scatdist_slider.value;
    set_length_scatdist_slider.oninput = function() {set_length_scatdist_output.innerHTML = this.value;}

    var set_length_scatdist_mult_slider = document.getElementById("set_length_scatdist_mult_var");
    var set_length_scatdist_mult_output = document.getElementById("set_length_scatdist_mult_label");
    set_length_scatdist_mult_output.innerHTML = set_length_scatdist_mult_slider.value;
    set_length_scatdist_mult_slider.oninput = function() {set_length_scatdist_mult_output.innerHTML = this.value;}

    var rise_length_scatangshift_slider = document.getElementById("rise_length_scatangshift_var");
    var rise_length_scatangshift_output = document.getElementById("rise_length_scatangshift_label");
    rise_length_scatangshift_output.innerHTML = rise_length_scatangshift_slider.value;
    rise_length_scatangshift_slider.oninput = function() {rise_length_scatangshift_output.innerHTML = this.value;}

    var rise_length_scatangshift_mult_slider = document.getElementById("rise_length_scatangshift_mult_var");
    var rise_length_scatangshift_mult_output = document.getElementById("rise_length_scatangshift_mult_label");
    rise_length_scatangshift_mult_output.innerHTML = rise_length_scatangshift_mult_slider.value;
    rise_length_scatangshift_mult_slider.oninput = function() {rise_length_scatangshift_mult_output.innerHTML = this.value;}

    var set_length_scatangshift_slider = document.getElementById("set_length_scatangshift_var");
    var set_length_scatangshift_output = document.getElementById("set_length_scatangshift_label");
    set_length_scatangshift_output.innerHTML = set_length_scatangshift_slider.value;
    set_length_scatangshift_slider.oninput = function() {set_length_scatangshift_output.innerHTML = this.value;}

    var set_length_scatangshift_mult_slider = document.getElementById("set_length_scatangshift_mult_var");
    var set_length_scatangshift_mult_output = document.getElementById("set_length_scatangshift_mult_label");
    set_length_scatangshift_mult_output.innerHTML = set_length_scatangshift_mult_slider.value;
    set_length_scatangshift_mult_slider.oninput = function() {set_length_scatangshift_mult_output.innerHTML = this.value;}

    var rise_length_bright_yellow_slider = document.getElementById("rise_length_bright_yellow_var");
    var rise_length_bright_yellow_output = document.getElementById("rise_length_bright_yellow_label");
    rise_length_bright_yellow_output.innerHTML = rise_length_bright_yellow_slider.value;
    rise_length_bright_yellow_slider.oninput = function() {rise_length_bright_yellow_output.innerHTML = this.value;}

    var rise_length_bright_yellow_mult_slider = document.getElementById("rise_length_bright_yellow_mult_var");
    var rise_length_bright_yellow_mult_output = document.getElementById("rise_length_bright_yellow_mult_label");
    rise_length_bright_yellow_mult_output.innerHTML = rise_length_bright_yellow_mult_slider.value;
    rise_length_bright_yellow_mult_slider.oninput = function() {rise_length_bright_yellow_mult_output.innerHTML = this.value;}

    var set_length_bright_yellow_slider = document.getElementById("set_length_bright_yellow_var");
    var set_length_bright_yellow_output = document.getElementById("set_length_bright_yellow_label");
    set_length_bright_yellow_output.innerHTML = set_length_bright_yellow_slider.value;
    set_length_bright_yellow_slider.oninput = function() {set_length_bright_yellow_output.innerHTML = this.value;}

    var set_length_bright_yellow_mult_slider = document.getElementById("set_length_bright_yellow_mult_var");
    var set_length_bright_yellow_mult_output = document.getElementById("set_length_bright_yellow_mult_label");
    set_length_bright_yellow_mult_output.innerHTML = set_length_bright_yellow_mult_slider.value;
    set_length_bright_yellow_mult_slider.oninput = function() {set_length_bright_yellow_mult_output.innerHTML = this.value;}

    var rise_length_bright_blue_slider = document.getElementById("rise_length_bright_blue_var");
    var rise_length_bright_blue_output = document.getElementById("rise_length_bright_blue_label");
    rise_length_bright_blue_output.innerHTML = rise_length_bright_blue_slider.value;
    rise_length_bright_blue_slider.oninput = function() {rise_length_bright_blue_output.innerHTML = this.value;}

    var rise_length_bright_blue_mult_slider = document.getElementById("rise_length_bright_blue_mult_var");
    var rise_length_bright_blue_mult_output = document.getElementById("rise_length_bright_blue_mult_label");
    rise_length_bright_blue_mult_output.innerHTML = rise_length_bright_blue_mult_slider.value;
    rise_length_bright_blue_mult_slider.oninput = function() {rise_length_bright_blue_mult_output.innerHTML = this.value;}

    var set_length_bright_blue_slider = document.getElementById("set_length_bright_blue_var");
    var set_length_bright_blue_output = document.getElementById("set_length_bright_blue_label");
    set_length_bright_blue_output.innerHTML = set_length_bright_blue_slider.value;
    set_length_bright_blue_slider.oninput = function() {set_length_bright_blue_output.innerHTML = this.value;}

    var set_length_bright_blue_mult_slider = document.getElementById("set_length_bright_blue_mult_var");
    var set_length_bright_blue_mult_output = document.getElementById("set_length_bright_blue_mult_label");
    set_length_bright_blue_mult_output.innerHTML = set_length_bright_blue_mult_slider.value;
    set_length_bright_blue_mult_slider.oninput = function() {set_length_bright_blue_mult_output.innerHTML = this.value;}
    
    var rise_slope_scatdist_slider = document.getElementById("rise_slope_scatdist_var");
    var rise_slope_scatdist_output = document.getElementById("rise_slope_scatdist_label");
    rise_slope_scatdist_output.innerHTML = (rise_slope_scatdist_slider.value);
    rise_slope_scatdist_slider.oninput = function() {rise_slope_scatdist_output.innerHTML = (Math.round(this.value));}

    var set_slope_scatdist_slider = document.getElementById("set_slope_scatdist_var");
    var set_slope_scatdist_output = document.getElementById("set_slope_scatdist_label");
    set_slope_scatdist_output.innerHTML = (set_slope_scatdist_slider.value);
    set_slope_scatdist_slider.oninput = function() {set_slope_scatdist_output.innerHTML = (Math.round(this.value));}
    
    var rise_slope_scatangshift_slider = document.getElementById("rise_slope_scatangshift_var");
    var rise_slope_scatangshift_output = document.getElementById("rise_slope_scatangshift_label");
    rise_slope_scatangshift_output.innerHTML = (rise_slope_scatangshift_slider.value);
    rise_slope_scatangshift_slider.oninput = function() {rise_slope_scatangshift_output.innerHTML = (Math.round(this.value));}

    var set_slope_scatangshift_slider = document.getElementById("set_slope_scatangshift_var");
    var set_slope_scatangshift_output = document.getElementById("set_slope_scatangshift_label");
    set_slope_scatangshift_output.innerHTML = (set_slope_scatangshift_slider.value);
    set_slope_scatangshift_slider.oninput = function() {set_slope_scatangshift_output.innerHTML = (Math.round(this.value));}

    var rise_slope_bright_yellow_slider = document.getElementById("rise_slope_bright_yellow_var");
    var rise_slope_bright_yellow_output = document.getElementById("rise_slope_bright_yellow_label");
    rise_slope_bright_yellow_output.innerHTML = (rise_slope_bright_yellow_slider.value);
    rise_slope_bright_yellow_slider.oninput = function() {rise_slope_bright_yellow_output.innerHTML = (Math.round(this.value));}

    var set_slope_bright_yellow_slider = document.getElementById("set_slope_bright_yellow_var");
    var set_slope_bright_yellow_output = document.getElementById("set_slope_bright_yellow_label");
    set_slope_bright_yellow_output.innerHTML = (set_slope_bright_yellow_slider.value);
    set_slope_bright_yellow_slider.oninput = function() {set_slope_bright_yellow_output.innerHTML = (Math.round(this.value));}

    var rise_slope_bright_blue_slider = document.getElementById("rise_slope_bright_blue_var");
    var rise_slope_bright_blue_output = document.getElementById("rise_slope_bright_blue_label");
    rise_slope_bright_blue_output.innerHTML = (rise_slope_bright_blue_slider.value);
    rise_slope_bright_blue_slider.oninput = function() {rise_slope_bright_blue_output.innerHTML = (Math.round(this.value));}

    var set_slope_bright_blue_slider = document.getElementById("set_slope_bright_blue_var");
    var set_slope_bright_blue_output = document.getElementById("set_slope_bright_blue_label");
    set_slope_bright_blue_output.innerHTML = (set_slope_bright_blue_slider.value);
    set_slope_bright_blue_slider.oninput = function() {set_slope_bright_blue_output.innerHTML = (Math.round(this.value));}
    lineremover()

    visualizerscheduler = setInterval(() => {
      lineremover()
    }, 300000); 

</script>

</body>
</html>