<?php header("Access-Control-Allow-Origin: *"); ?>
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

  <title> 
    TimeGiver 
</title>
    <style>
body {
  background-color: #CCFFFF;
}

p {
  max-width: 1000px;
  font-size: medium;
  font-family: 'Times New Roman', Times, serif;
  margin-top: 20px;
  margin-bottom: 0px;
  margin-left: 4rem;
}

p.topleveltext {
  max-width: 1000px;
  font-size: medium;
  font-family: 'Times New Roman', Times, serif;
  margin-top: 20px;
  margin-bottom: 0px;
  margin-left: 0.5rem;
}

.topleveltext {
  margin-left: 0.5rem;
  margin-top: 30px;
}

.header {
  margin-left: 0.5rem;
  margin-top: 20px;
  margin-bottom: 0px;
  font-size: x-large;
  font-weight: bold;
}

ul {
  margin-top: 0px;
  margin-block-start: 0px;
  margin-bottom: 0px;
  margin-block-end: 0px;
}

li {
  margin-block-start: 0px;
  margin-left: 0px;
}

canvas {
  border:1px solid #003366; position: -webkit-sticky;
  position: sticky;
  top: 20px;
  left: 20px;
  bottom: 20px;
  margin-left: 0.5rem;
  z-index: 5;
  box-shadow: 5px 5px 8px gray;
}

canvas#cie1931visualizer {
  border:1px solid #003366; position: -webkit-sticky;
  position: static;
  top: 20px;
  left: 20px;
  bottom: 20px;
  margin-left: 4rem;
  margin-top: 10px;
  z-index: 10;
  box-shadow: 5px 5px 8px gray;
}

.settingheader1 {
  font-size: large;
  font-weight: bold;
  margin-top: 10px;
  margin-bottom: 0px;
  margin-left: 0.5rem;
  cursor: pointer; 
}

.settingheader2 {
  font-size: medium;
  font-weight: bold;
  margin-top: 10px;
  margin-bottom: 0px;
  margin-left: 1.6rem;
  cursor: pointer; 
}

.settingheader3 {
  font-size: small;
  font-weight: bold;
  margin-top: 10px;
  margin-bottom: 0px;
  margin-left: 2.8rem;
  cursor: pointer; 
}

.slidecontainer {
  width: 100%; 
  margin-top: 0px;
  margin-bottom: 0px;
  margin-left: 2.8em;
}

.level0element {
  margin-left: 0rem;
}

.level4element {
  margin-left: 4rem;
}

.level5element {
  margin-left: 5.2rem;
}

.slider {
  -webkit-appearance: none;  
  appearance: none;
  width: 20em; 
  height: 15px; 
  border-radius: 5px;
  background: #66FF99; 
  outline: none; 
  opacity: 0.7; 
  -webkit-transition: .2s; 
  transition: opacity .2s;
  margin-top: 0px;
  margin-bottom: 0px;
}

.slider:hover {
  opacity: 1; 
}

.slider:hover:disabled {
  opacity: 0.7; 
}

.slider:disabled::-webkit-slider-thumb {
  background: #666666;
  cursor: default;  
}

.slider:disabled::-moz-range-thumb {
  background: #666666; 
  cursor: default; 
}

.slider::-webkit-slider-thumb {
  -webkit-appearance: none; 
  appearance: none;
  width: 20px; 
  height: 20px; 
  border-radius: 50%;
  background: #003366; 
  cursor: pointer; 
}

.slider::-moz-range-thumb {
  width: 20px; 
  height: 20px; 
  border-radius: 50%;
  background: #003366; 
  cursor: pointer; 
}

input {
  margin-top: 20px;
  margin-bottom: 10px;
}

input[type="time"] {
  font-size: small;
  margin-left: 2.8rem;
  margin-right: 0.5rem
}

input.topleveltext[type="checkbox"] {
  margin-left: 0.5rem;
}

input[type="range"]:disabled {
  background: #111111;
}

button {
  margin-left: 2.8rem;
  margin-top: 20px;
  margin-bottom: 10px;
  font-size: small;
}

/* Tooltip container */
.tooltip {
  position: relative;
  display: inline-block;
  margin-top: 0px;
  margin-bottom: 0px;
  margin-right: 0.5rem;
  font-size: medium;
  display: inline-block;
  /*border-bottom: 1px dotted black;*/ /* If you want dots under the hoverable text */
}

.tooltip:hover{
  cursor: help;
}

/* Tooltip text */
.tooltip .tooltiptext {
  visibility: hidden;
  width: 20em;
  background-color: white;
  color: black;
  text-align: left;
  padding: 5px 5px 5px 5px;
  border-radius: 6px;
  border:1px solid #003366;
  box-shadow: 5px 5px 8px gray;
  top: -5px;
  left: 105%;
 
  /* Position the tooltip text - see examples below! */
  position: absolute;
  z-index: 1;
}

/* Show the tooltip text when you mouse over the tooltip container */
.tooltip:hover .tooltiptext {
  visibility: visible;
}

.switch {
  position: relative;
  display: inline-block;
  width: 60px;
  height: 34px;
}

/* Hide default HTML checkbox */
.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

input:checked + .toggle {
  background-color: #66FF99;
  
}

input:focus + .toggle {
  box-shadow: 0 0 1px #66FF99;
}

input:checked + .toggle:before {
  -webkit-transform: translateX(26px);
  -ms-transform: translateX(26px);
  transform: translateX(26px);
  background-color: #003366;
}

/* Rounded toggles */
.toggle.round {
  border-radius: 34px;
}

.toggle.round:before {
  border-radius: 50%;
}

.toggle {
  position: absolute;
  cursor: pointer;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  background: #111111;
  -webkit-transition: .2s;
  transition: .2s;
  opacity: 0.7; 
  height: 15px;
  margin-top: 0px;
  margin-bottom: 0px;
  margin-left: 0;
  margin-right: 0.1rem;
}

.toggle:hover {
  opacity: 1; 
}

.toggle:hover:disabled {
  opacity: 0.7; 
}

/*-webkit-appearance: none;  
  appearance: none;
  width: 20em; 
  height: 15px; 
  border-radius: 5px;
  background: #66FF99; 
  outline: none; 
  opacity: 0.7; 
  -webkit-transition: .2s; 
  transition: opacity .2s;
  margin-top: 0px;
  margin-bottom: 0px;*/
  
.toggle:before {
  position: absolute;
  content: "";
  height: 20px;
  width: 20px;
  left: 4px;
  bottom: -1px;
  background-color: #AAAAAA;
  -webkit-transition: .4s;
  transition: .4s;
}


        </style>
<script type="text/javascript" src="TimeGiverex.js"></script>
<script type="text/javascript" src="xytorgb.js"></script>
<script type= "text/javascript" src="jshue.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
var hue = jsHue();

//detects if user uses Internet Explorer
//returns version of IE or false, if browser is not IE
//Function to detect IE or not
function IEdetection() {
    var ua = window.navigator.userAgent;
    var msie = ua.indexOf('MSIE ');
    if (msie > 0) {
        // IE 10 or older, return version number
        return ('IE ' + parseInt(ua.substring(
        msie + 5, ua.indexOf('.', msie)), 10));
    }
    var trident = ua.indexOf('Trident/');
    if (trident > 0) {
        // IE 11, return version number
        var rv = ua.indexOf('rv:');
        return ('IE ' + parseInt(ua.substring(
          rv + 3, ua.indexOf('.', rv)), 10));
    }
    var edge = ua.indexOf('Edge/');
    if (edge > 0) {
        //Edge (IE 12+), return version number
        return ('IE ' + parseInt(ua.substring(
          edge + 5, ua.indexOf('.', edge)), 10));
    }
    // User uses other browser
    return ('Not IE');
}

function radianstodegrees(radians)
{
  var pi = Math.PI;
  return (radians * (180/pi));
}

function degreestoradians(degrees)
{
  var pi = Math.PI;
  return (degrees * (pi/180));
}

function getCookie(cname) {
  var name = cname + "=";
  var decodedCookie = decodeURIComponent(document.cookie);
  var ca = decodedCookie.split(';');
  for(var i = 0; i < ca.length; i++) {
    var c = ca[i];
    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";}

function setCookie(cname,cvalue,exdays) {
  var d = new Date();
  d.setTime(d.getTime() + (exdays*24*60*60*1000));
  var expires = "expires=" + d.toGMTString();
  document.cookie = (cname + "=" + cvalue + ";" + expires + "SameSite=Lax");
}

function toggleelement(elementid) {
  var x = document.getElementById(elementid);
  if (x.style.display === "none") {
    x.style.display = "block";
  } else {
    x.style.display = "none";
  }
}

function togglearrow(elementid) {
  var x = document.getElementById(elementid);
  if (x.style.display === "none") {
    x.style.display = "inline-block";
  } else {
    x.style.display = "none";
  }
}

function toggleautoonlightlistitem(name_esc) {
  //console.log ("toggle has been triggered for: " + name_esc)
  var autoondiv = ("autoondiv_" + name_esc)
  var autooffdiv = ("autooffdiv_" + name_esc)
  var whitecheckboxchecked = ("#whitelightcheckbox_" + name_esc + ":checked")
  var combcheckboxchecked = ("#comblightcheckbox_" + name_esc + ":checked")
  var bluecheckboxchecked = ("#bluelightcheckbox_" + name_esc + ":checked")
  var yellowcheckboxchecked = ("#yellowlightcheckbox_" + name_esc + ":checked")
  var x = document.getElementById(autoondiv);
  var y = document.getElementById(autooffdiv);
  if (document.querySelector(bluecheckboxchecked) !== null || document.querySelector(yellowcheckboxchecked) !== null || document.querySelector(whitecheckboxchecked) !== null || document.querySelector(combcheckboxchecked) !== null){
    x.style.display = "block";
    y.style.display = "block";
  } else {
    x.style.display = "none";
    y.style.display = "none";
  }
}

function toggleoverridelistitem(lightname_esc) {
  //console.log ("toggle has been triggered for: " + lightname_esc)
  var autoondiv = ("autoondiv_" + lightname_esc)
  var whitecheckboxchecked = ("#whitelightcheckbox_" + lightname_esc + ":checked")
  var bluecheckboxchecked = ("#bluelightcheckbox_" + lightname_esc + ":checked")
  var yellowcheckboxchecked = ("#yellowlightcheckbox_" + lightname_esc + ":checked")
  var combcheckboxchecked = ("#comblightcheckbox_" + lightname_esc + ":checked")
  for (i in switches){
    var sensorname = (switches[i].name);
    var sensorname_esc = (sensorname.replace(/\s+/g, ''));
    var sensorname_esc = (sensorname_esc.replace(/'/g, ''));
    var productname = switches[i].productname;
    var overridesensordiv = ("overridesensordiv_" + sensorname_esc)
    var overridecheckboxlist = ("overridecheckboxlist_" + sensorname_esc)
    var overridecheckbox = (overridesensordiv + "_light_" + lightname_esc)
    var x = document.getElementById(overridecheckbox);
    if (x){
      if (document.querySelector(combcheckboxchecked) !== null || document.querySelector(bluecheckboxchecked) !== null || document.querySelector(yellowcheckboxchecked) !== null || document.querySelector(whitecheckboxchecked) !== null){
        x.style.display = "block";
      } else {
        x.style.display = "none";
      }
    }
  }
}

function toggleoverridelist() {
  for (i in switches){
    //console.log ("toggle has been triggered for: " + sensorname_esc)
    var sensorname = (switches[i].name);
    var sensorname_esc = (sensorname.replace(/\s+/g, ''));
    var sensorname_esc = (sensorname_esc.replace(/'/g, ''));
    var overridesensordiv = ("overridesensordiv_" + sensorname_esc)
    var overridecheckbox = ("overridecheckbox_" + sensorname_esc)
    var overridecheckboxlist = ("overridecheckboxlist_" + sensorname_esc)
    var overridecheckboxlistchecked = ("#overridecheckbox_" + sensorname_esc + ":checked")
    var x = document.getElementById(overridecheckboxlist);
    if (x){
      if (document.querySelector(overridecheckboxlistchecked) !== null){
        x.style.display = "block";
      } else {
        x.style.display = "none";
      }
    }
  }
}

function listswitch(color, name){
  var bluecheckboxchecked = ("#bluelightcheckbox_" + name + ":checked");
  var bluecheckbox = ("bluelightcheckbox_" + name);
  var yellowcheckboxchecked = ("#yellowlightcheckbox_" + name + ":checked");
  var yellowcheckbox = ("yellowlightcheckbox_" + name);
  var combcheckboxchecked = ("#comblightcheckbox_" + name + ":checked");
  var combcheckbox = ("comblightcheckbox_" + name);
  if (color.includes("comb")){
    //console.log (color)
    document.getElementById("yellowlightcheckbox_" + name).checked = false
    document.getElementById("whitelightcheckbox_" + name).checked = false
    document.getElementById("bluelightcheckbox_" + name).checked = false
    
    if (document.querySelector(combcheckboxchecked) !== null){
      var combdiv = name + "_combdiv"
      var combdiv2 = document.getElementById(combdiv);
      combdiv2.style.display = "block";

      var combaz_div = name + "_combaz_div"
      var combaz_div2 = document.getElementById(combaz_div);
      combaz_div2.style.display = "block";

      var combalt_div = name + "_combalt_div"
      var combalt_div2 = document.getElementById(combalt_div);
      combalt_div2.style.display = "block";} else {

      var combdiv = name + "_combdiv"
      var combdiv2 = document.getElementById(combdiv);
      combdiv2.style.display = "none";

      var combaz_div = name + "_combaz_div"
      var combaz_div2 = document.getElementById(combaz_div);
      combaz_div2.style.display = "none";

      var combalt_div = name + "_combalt_div"
      var combalt_div2 = document.getElementById(combalt_div);
      combalt_div2.style.display = "none";}

    var yellowdiv = name + "_yellowdiv"
    var yellowdiv2 = document.getElementById(yellowdiv);
    yellowdiv2.style.display = "none";

    var yellowaz_div = name + "_yellowaz_div"
    var yellowaz_div2 = document.getElementById(yellowaz_div);
    yellowaz_div2.style.display = "none";

    var yellowalt_div = name + "_yellowalt_div"
    var yellowalt_div2 = document.getElementById(yellowalt_div);
    yellowalt_div2.style.display = "none";

    var bluediv = name + "_bluediv"
    var bluediv2 = document.getElementById(bluediv);
    bluediv2.style.display = "none";

    var blueaz_div = name + "_blueaz_div"
    var blueaz_div2 = document.getElementById(blueaz_div);
    blueaz_div2.style.display = "none";

    var bluealt_div = name + "_bluealt_div"
    var bluealt_div2 = document.getElementById(bluealt_div);
    bluealt_div2.style.display = "none";

    
  } else if (color.includes("blue")){
    //console.log (color)
    document.getElementById("yellowlightcheckbox_" + name).checked = false
    document.getElementById("whitelightcheckbox_" + name).checked = false
    document.getElementById("comblightcheckbox_" + name).checked = false
    
    if (document.querySelector(bluecheckboxchecked) !== null){
      var bluediv = name + "_bluediv"
      var bluediv2 = document.getElementById(bluediv);
      bluediv2.style.display = "block";

      var blueaz_div = name + "_blueaz_div"
      var blueaz_div2 = document.getElementById(blueaz_div);
      blueaz_div2.style.display = "block";

      var bluealt_div = name + "_bluealt_div"
      var bluealt_div2 = document.getElementById(bluealt_div);
      bluealt_div2.style.display = "block";} else {

      var bluediv = name + "_bluediv"
      var bluediv2 = document.getElementById(bluediv);
      bluediv2.style.display = "none";

      var blueaz_div = name + "_blueaz_div"
      var blueaz_div2 = document.getElementById(blueaz_div);
      blueaz_div2.style.display = "none";

      var bluealt_div = name + "_bluealt_div"
      var bluealt_div2 = document.getElementById(bluealt_div);
      bluealt_div2.style.display = "none";}

    var yellowdiv = name + "_yellowdiv"
    var yellowdiv2 = document.getElementById(yellowdiv);
    yellowdiv2.style.display = "none";

    var yellowaz_div = name + "_yellowaz_div"
    var yellowaz_div2 = document.getElementById(yellowaz_div);
    yellowaz_div2.style.display = "none";

    var yellowalt_div = name + "_yellowalt_div"
    var yellowalt_div2 = document.getElementById(yellowalt_div);
    yellowalt_div2.style.display = "none";

    var combdiv = name + "_combdiv"
    var combdiv2 = document.getElementById(combdiv);
    combdiv2.style.display = "none";

    var combaz_div = name + "_combaz_div"
    var combaz_div2 = document.getElementById(combaz_div);
    combaz_div2.style.display = "none";

    var combalt_div = name + "_combalt_div"
    var combalt_div2 = document.getElementById(combalt_div);
    combalt_div2.style.display = "none";

    
  } else if (color.includes("yellow")) {
    //console.log (color)
    document.getElementById("bluelightcheckbox_" + name).checked = false
    document.getElementById("whitelightcheckbox_" + name).checked = false
    document.getElementById("comblightcheckbox_" + name).checked = false
    var bluediv = name + "_bluediv"
    var bluediv2 = document.getElementById(bluediv);
    bluediv2.style.display = "none";
    
    var blueaz_div = name + "_blueaz_div"
    var blueaz_div2 = document.getElementById(blueaz_div);
    blueaz_div2.style.display = "none";

    var bluealt_div = name + "_bluealt_div"
    var bluealt_div2 = document.getElementById(bluealt_div);
    bluealt_div2.style.display = "none";

    var combdiv = name + "_combdiv"
    var combdiv2 = document.getElementById(combdiv);
    combdiv2.style.display = "none";

    var combaz_div = name + "_combaz_div"
    var combaz_div2 = document.getElementById(combaz_div);
    combaz_div2.style.display = "none";

    var combalt_div = name + "_combalt_div"
    var combalt_div2 = document.getElementById(combalt_div);
    combalt_div2.style.display = "none";


    if (document.querySelector(yellowcheckboxchecked) !== null){
      var yellowdiv = name + "_yellowdiv"
      var yellowdiv2 = document.getElementById(yellowdiv);
      yellowdiv2.style.display = "block";

      var yellowaz_div = name + "_yellowaz_div"
      var yellowaz_div2 = document.getElementById(yellowaz_div);
      yellowaz_div2.style.display = "block";

      var yellowalt_div = name + "_yellowalt_div"
      var yellowalt_div2 = document.getElementById(yellowalt_div);
      yellowalt_div2.style.display = "block";} else {

      var yellowdiv = name + "_yellowdiv"
      var yellowdiv2 = document.getElementById(yellowdiv);
      yellowdiv2.style.display = "none";

      var yellowaz_div = name + "_yellowaz_div"
      var yellowaz_div2 = document.getElementById(yellowaz_div);
      yellowaz_div2.style.display = "none";

      var yellowalt_div = name + "_yellowalt_div"
      var yellowalt_div2 = document.getElementById(yellowalt_div);
      yellowalt_div2.style.display = "none"; 
    }



  } else if (color.includes("white")) {
    //console.log (color)
    document.getElementById("bluelightcheckbox_" + name).checked = false
    document.getElementById("yellowlightcheckbox_" + name).checked = false
    document.getElementById("comblightcheckbox_" + name).checked = false
    var bluediv = name + "_bluediv"
    var bluediv2 = document.getElementById(bluediv);
    bluediv2.style.display = "none";

    var blueaz_div = name + "_blueaz_div"
    var blueaz_div2 = document.getElementById(blueaz_div);
    blueaz_div2.style.display = "none";

    var bluealt_div = name + "_bluealt_div"
    var bluealt_div2 = document.getElementById(bluealt_div);
    bluealt_div2.style.display = "none";

    var combdiv = name + "_combdiv"
    var combdiv2 = document.getElementById(combdiv);
    combdiv2.style.display = "none";

    var combaz_div = name + "_combaz_div"
    var combaz_div2 = document.getElementById(combaz_div);
    combaz_div2.style.display = "none";

    var combalt_div = name + "_combalt_div"
    var combalt_div2 = document.getElementById(combalt_div);
    combalt_div2.style.display = "none";

    var yellowdiv = name + "_yellowdiv"
    var yellowdiv2 = document.getElementById(yellowdiv);
    yellowdiv2.style.display = "none";

    var yellowaz_div = name + "_yellowaz_div"
    var yellowaz_div2 = document.getElementById(yellowaz_div);
    yellowaz_div2.style.display = "none";

    var yellowalt_div = name + "_yellowalt_div"
    var yellowalt_div2 = document.getElementById(yellowalt_div);
    yellowalt_div2.style.display = "none";

  }
}

function savesettings(){
  setCookie("wake_time_var_cookie", (document.getElementById("wake_time_var").value), 365);
  setCookie("bed_time_var_cookie", (document.getElementById("bed_time_var").value), 365);
  setCookie("max_bright_var_cookie", (document.getElementById("max_bright_var").value), 365);
  setCookie("min_bright_var_cookie", (document.getElementById("min_bright_var").value), 365);
  setCookie("max_whiteCCT_var_cookie", (document.getElementById("max_whiteCCT_var").value), 365);
  setCookie("min_whiteCCT_var_cookie", (document.getElementById("min_whiteCCT_var").value), 365);
  setCookie("max_colorCCT_var_cookie", (document.getElementById("max_colorCCT_var").value), 365);
  setCookie("min_colorCCT_var_cookie", (document.getElementById("min_colorCCT_var").value), 365);
  setCookie("transtime_var_cookie", (document.getElementById("transtime_var").value), 365);
  setCookie("wake_offset_var_cookie", (document.getElementById("wake_offset_var").value), 365);
  setCookie("bed_offset_var_cookie", (document.getElementById("bed_offset_var").value), 365);
  setCookie("rise_length_bright_var_cookie", (document.getElementById("rise_length_bright_var").value), 365);
  setCookie("rise_length_bright_mult_var_cookie", (document.getElementById("rise_length_bright_mult_var").value), 365);
  setCookie("set_length_bright_var_cookie", (document.getElementById("set_length_bright_var").value), 365);
  setCookie("set_length_bright_mult_var_cookie", (document.getElementById("set_length_bright_mult_var").value), 365);
  setCookie("rise_length_whiteCCT_mult_var_cookie", (document.getElementById("rise_length_whiteCCT_mult_var").value), 365);
  setCookie("rise_length_whiteCCT_var_cookie", (document.getElementById("rise_length_whiteCCT_var").value), 365);
  setCookie("set_length_whiteCCT_mult_var_cookie", (document.getElementById("set_length_whiteCCT_mult_var").value), 365);
  setCookie("set_length_whiteCCT_var_cookie", (document.getElementById("set_length_whiteCCT_var").value), 365);
  setCookie("rise_length_colorCCT_mult_var_cookie", (document.getElementById("rise_length_colorCCT_mult_var").value), 365);
  setCookie("rise_length_colorCCT_var_cookie", (document.getElementById("rise_length_colorCCT_var").value), 365);
  setCookie("set_length_colorCCT_mult_var_cookie", (document.getElementById("set_length_colorCCT_mult_var").value), 365);
  setCookie("set_length_colorCCT_var_cookie", (document.getElementById("set_length_colorCCT_var").value), 365);
  setCookie("rise_slope_bright_var_cookie", (document.getElementById("rise_slope_bright_var").value), 365);
  setCookie("set_slope_bright_var_cookie", (document.getElementById("set_slope_bright_var").value), 365);
  setCookie("rise_slope_whiteCCT_var_cookie", (document.getElementById("rise_slope_whiteCCT_var").value), 365);
  setCookie("set_slope_whiteCCT_var_cookie", (document.getElementById("set_slope_whiteCCT_var").value), 365);
  setCookie("rise_slope_colorCCT_var_cookie", (document.getElementById("rise_slope_colorCCT_var").value), 365);
  setCookie("set_slope_colorCCT_var_cookie", (document.getElementById("set_slope_colorCCT_var").value), 365);
  setCookie("max_bright_yellow_var_cookie", (document.getElementById("max_bright_yellow_var").value), 365);
  setCookie("min_bright_yellow_var_cookie", (document.getElementById("min_bright_yellow_var").value), 365);
  setCookie("max_bright_blue_var_cookie", (document.getElementById("max_bright_blue_var").value), 365);
  setCookie("min_bright_blue_var_cookie", (document.getElementById("min_bright_blue_var").value), 365);
  setCookie("max_scatdist_var_cookie", (document.getElementById("max_scatdist_var").value), 365);
  setCookie("min_scatdist_var_cookie", (document.getElementById("min_scatdist_var").value), 365);
  setCookie("max_scatangshift_var_cookie", (document.getElementById("max_scatangshift_var").value), 365);
  setCookie("min_scatangshift_var_cookie", (document.getElementById("min_scatangshift_var").value), 365);
  setCookie("rise_length_bright_yellow_var_cookie", (document.getElementById("rise_length_bright_yellow_var").value), 365);
  setCookie("rise_length_bright_yellow_mult_var_cookie", (document.getElementById("rise_length_bright_yellow_mult_var").value), 365);
  setCookie("set_length_bright_yellow_var_cookie", (document.getElementById("set_length_bright_yellow_var").value), 365);
  setCookie("set_length_bright_yellow_mult_var_cookie", (document.getElementById("set_length_bright_yellow_mult_var").value), 365);
  setCookie("rise_length_bright_blue_var_cookie", (document.getElementById("rise_length_bright_blue_var").value), 365);
  setCookie("rise_length_bright_blue_mult_var_cookie", (document.getElementById("rise_length_bright_blue_mult_var").value), 365);
  setCookie("set_length_bright_blue_var_cookie", (document.getElementById("set_length_bright_blue_var").value), 365);
  setCookie("set_length_bright_blue_mult_var_cookie", (document.getElementById("set_length_bright_blue_mult_var").value), 365);
  setCookie("rise_length_scatdist_mult_var_cookie", (document.getElementById("rise_length_scatdist_mult_var").value), 365);
  setCookie("rise_length_scatdist_var_cookie", (document.getElementById("rise_length_scatdist_var").value), 365);
  setCookie("set_length_scatdist_mult_var_cookie", (document.getElementById("set_length_scatdist_mult_var").value), 365);
  setCookie("set_length_scatdist_var_cookie", (document.getElementById("set_length_scatdist_var").value), 365);
  setCookie("rise_length_scatangshift_var_cookie", (document.getElementById("rise_length_scatangshift_var").value), 365);
  setCookie("rise_length_scatangshift_mult_var_cookie", (document.getElementById("rise_length_scatangshift_mult_var").value), 365);
  setCookie("set_length_scatangshift_var_cookie", (document.getElementById("set_length_scatangshift_var").value), 365);
  setCookie("set_length_scatangshift_mult_var_cookie", (document.getElementById("set_length_scatangshift_mult_var").value), 365);
  setCookie("rise_slope_scatdist_var_cookie", (document.getElementById("rise_slope_scatdist_var").value), 365);
  setCookie("set_slope_scatdist_var_cookie", (document.getElementById("set_slope_scatdist_var").value), 365);
  setCookie("rise_slope_scatangshift_var_cookie", (document.getElementById("rise_slope_scatangshift_var").value), 365);
  setCookie("set_slope_scatangshift_var_cookie", (document.getElementById("set_slope_scatangshift_var").value), 365);
  setCookie("rise_slope_bright_yellow_var_cookie", (document.getElementById("rise_slope_bright_yellow_var").value), 365);
  setCookie("set_slope_bright_yellow_var_cookie", (document.getElementById("set_slope_bright_yellow_var").value), 365);
  setCookie("rise_slope_bright_blue_var_cookie", (document.getElementById("rise_slope_bright_blue_var").value), 365);
  setCookie("set_slope_bright_blue_var_cookie", (document.getElementById("set_slope_bright_blue_var").value), 365);
  alert ("Your current TimeGiver settings have been saved by your browser and can be reloaded at any time by pressing 'Restore Saved Settings'!")
}

function restoresettings(){
  var wake_time_var_cookie = getCookie ("wake_time_var_cookie");
  if (wake_time_var_cookie) {document.getElementById("wake_time_var").value = wake_time_var_cookie;};
  var bed_time_var_cookie = getCookie ("bed_time_var_cookie");
  if (bed_time_var_cookie) {document.getElementById("bed_time_var").value = bed_time_var_cookie;};
  var max_bright_var_cookie = getCookie ("max_bright_var_cookie");
  if (max_bright_var_cookie) {document.getElementById("max_bright_var").value = max_bright_var_cookie;};
  var min_bright_var_cookie = getCookie ("min_bright_var_cookie");
  if (min_bright_var_cookie) {document.getElementById("min_bright_var").value = min_bright_var_cookie;};
  var max_whiteCCT_var_cookie = getCookie ("max_whiteCCT_var_cookie");
  if (max_whiteCCT_var_cookie) {document.getElementById("max_whiteCCT_var").value = max_whiteCCT_var_cookie;};
  var min_whiteCCT_var_cookie = getCookie ("min_whiteCCT_var_cookie");
  if (min_whiteCCT_var_cookie) {document.getElementById("min_whiteCCT_var").value = min_whiteCCT_var_cookie;};
  var max_colorCCT_var_cookie = getCookie ("max_colorCCT_var_cookie");
  if (max_colorCCT_var_cookie) {document.getElementById("max_colorCCT_var").value = max_colorCCT_var_cookie;};
  var min_colorCCT_var_cookie = getCookie ("min_colorCCT_var_cookie");
  if (min_colorCCT_var_cookie) {document.getElementById("min_colorCCT_var").value = min_colorCCT_var_cookie;};
  var transtime_var_cookie = getCookie ("transtime_var_cookie");
  if (transtime_var_cookie) {document.getElementById("transtime_var").value = transtime_var_cookie;};
  var wake_offset_var_cookie = getCookie ("wake_offset_var_cookie");
  if (wake_offset_var_cookie) {document.getElementById("wake_offset_var").value = wake_offset_var_cookie;};
  var bed_offset_var_cookie = getCookie ("bed_offset_var_cookie");
  if (bed_offset_var_cookie) {document.getElementById("bed_offset_var").value = bed_offset_var_cookie;};
  var rise_length_bright_var_cookie = getCookie ("rise_length_bright_var_cookie");
  if (rise_length_bright_var_cookie) {document.getElementById("rise_length_bright_var").value = rise_length_bright_var_cookie;};
  var rise_length_bright_mult_var_cookie = getCookie ("rise_length_bright_mult_var_cookie");
  if (rise_length_bright_mult_var_cookie) {document.getElementById("rise_length_bright_mult_var").value = rise_length_bright_mult_var_cookie;};
  var set_length_bright_var_cookie = getCookie ("set_length_bright_var_cookie");
  if (set_length_bright_var_cookie) {document.getElementById("set_length_bright_var").value = set_length_bright_var_cookie;};
  var set_length_bright_mult_var_cookie = getCookie ("set_length_bright_mult_var_cookie");
  if (set_length_bright_mult_var_cookie) {document.getElementById("set_length_bright_mult_var").value = set_length_bright_mult_var_cookie;};
  var rise_length_whiteCCT_mult_var_cookie = getCookie ("rise_length_whiteCCT_mult_var_cookie");
  if (rise_length_whiteCCT_mult_var_cookie) {document.getElementById("rise_length_whiteCCT_mult_var").value = rise_length_whiteCCT_mult_var_cookie;};
  var rise_length_whiteCCT_var_cookie = getCookie ("rise_length_whiteCCT_var_cookie");
  if (rise_length_whiteCCT_var_cookie) {document.getElementById("rise_length_whiteCCT_var").value = rise_length_whiteCCT_var_cookie;};
  var set_length_whiteCCT_mult_var_cookie = getCookie ("set_length_whiteCCT_mult_var_cookie");
  if (set_length_whiteCCT_mult_var_cookie) {document.getElementById("set_length_whiteCCT_mult_var").value = set_length_whiteCCT_mult_var_cookie;};
  var set_length_whiteCCT_var_cookie = getCookie ("set_length_whiteCCT_var_cookie");
  if (set_length_whiteCCT_var_cookie) {document.getElementById("set_length_whiteCCT_var").value = set_length_whiteCCT_var_cookie;};
  var rise_length_colorCCT_mult_var_cookie = getCookie ("rise_length_colorCCT_mult_var_cookie");
  if (rise_length_colorCCT_mult_var_cookie) {document.getElementById("rise_length_colorCCT_mult_var").value = rise_length_colorCCT_mult_var_cookie;};
  var rise_length_colorCCT_var_cookie = getCookie ("rise_length_colorCCT_var_cookie");
  if (rise_length_colorCCT_var_cookie) {document.getElementById("rise_length_colorCCT_var").value = rise_length_colorCCT_var_cookie;};
  var set_length_colorCCT_mult_var_cookie = getCookie ("set_length_colorCCT_mult_var_cookie");
  if (set_length_colorCCT_mult_var_cookie) {document.getElementById("set_length_colorCCT_mult_var").value = set_length_colorCCT_mult_var_cookie;};
  var set_length_colorCCT_var_cookie = getCookie ("set_length_colorCCT_var_cookie");
  if (set_length_colorCCT_var_cookie) {document.getElementById("set_length_colorCCT_var").value = set_length_colorCCT_var_cookie;};
  var rise_slope_bright_var_cookie = getCookie ("rise_slope_bright_var_cookie");
  if (rise_slope_bright_var_cookie) {document.getElementById("rise_slope_bright_var").value = rise_slope_bright_var_cookie;};
  var set_slope_bright_var_cookie = getCookie ("set_slope_bright_var_cookie");
  if (set_slope_bright_var_cookie) {document.getElementById("set_slope_bright_var").value = set_slope_bright_var_cookie;};
  var rise_slope_whiteCCT_var_cookie = getCookie ("rise_slope_whiteCCT_var_cookie");
  if (rise_slope_whiteCCT_var_cookie) {document.getElementById("rise_slope_whiteCCT_var").value = rise_slope_whiteCCT_var_cookie;};
  var set_slope_whiteCCT_var_cookie = getCookie ("set_slope_whiteCCT_var_cookie");
  if (set_slope_whiteCCT_var_cookie) {document.getElementById("set_slope_whiteCCT_var").value = set_slope_whiteCCT_var_cookie;};
  var rise_slope_colorCCT_var_cookie = getCookie ("rise_slope_colorCCT_var_cookie");
  if (rise_slope_colorCCT_var_cookie) {document.getElementById("rise_slope_colorCCT_var").value = rise_slope_colorCCT_var_cookie;};
  var set_slope_colorCCT_var_cookie = getCookie ("set_slope_colorCCT_var_cookie");
  if (set_slope_colorCCT_var_cookie) {document.getElementById("set_slope_colorCCT_var").value = set_slope_colorCCT_var_cookie;};
  var max_bright_yellow_var_cookie = getCookie ("max_bright_yellow_var_cookie");
  if (max_bright_yellow_var_cookie) {document.getElementById("max_bright_yellow_var").value = max_bright_yellow_var_cookie;};
  var min_bright_yellow_var_cookie = getCookie ("min_bright_yellow_var_cookie");
  if (min_bright_yellow_var_cookie) {document.getElementById("min_bright_yellow_var").value = min_bright_yellow_var_cookie;};
  var max_bright_blue_var_cookie = getCookie ("max_bright_blue_var_cookie");
  if (max_bright_blue_var_cookie) {document.getElementById("max_bright_blue_var").value = max_bright_blue_var_cookie;};
  var min_bright_blue_var_cookie = getCookie ("min_bright_blue_var_cookie");
  if (min_bright_blue_var_cookie) {document.getElementById("min_bright_blue_var").value = min_bright_blue_var_cookie;};
  var max_scatdist_var_cookie = getCookie ("max_scatdist_var_cookie");
  if (max_scatdist_var_cookie) {document.getElementById("max_scatdist_var").value = max_scatdist_var_cookie;};
  var min_scatdist_var_cookie = getCookie ("min_scatdist_var_cookie");
  if (min_scatdist_var_cookie) {document.getElementById("min_scatdist_var").value = min_scatdist_var_cookie;};
  var max_scatangshift_var_cookie = getCookie ("max_scatangshift_var_cookie");
  if (max_scatangshift_var_cookie) {document.getElementById("max_scatangshift_var").value = max_scatangshift_var_cookie;};
  var min_scatangshift_var_cookie = getCookie ("min_scatangshift_var_cookie");
  if (min_scatangshift_var_cookie) {document.getElementById("min_scatangshift_var").value = min_scatangshift_var_cookie;};
  var rise_length_bright_yellow_var_cookie = getCookie ("rise_length_bright_yellow_var_cookie");
  if (rise_length_bright_yellow_var_cookie) {document.getElementById("rise_length_bright_yellow_var").value = rise_length_bright_yellow_var_cookie;};
  var rise_length_bright_yellow_mult_var_cookie = getCookie ("rise_length_bright_yellow_mult_var_cookie");
  if (rise_length_bright_yellow_mult_var_cookie) {document.getElementById("rise_length_bright_yellow_mult_var").value = rise_length_bright_yellow_mult_var_cookie;};
  var set_length_bright_yellow_var_cookie = getCookie ("set_length_bright_yellow_var_cookie");
  if (set_length_bright_yellow_var_cookie) {document.getElementById("set_length_bright_yellow_var").value = set_length_bright_yellow_var_cookie;};
  var set_length_bright_yellow_mult_var_cookie = getCookie ("set_length_bright_yellow_mult_var_cookie");
  if (set_length_bright_yellow_mult_var_cookie) {document.getElementById("set_length_bright_yellow_mult_var").value = set_length_bright_yellow_mult_var_cookie;};
  var rise_length_bright_blue_var_cookie = getCookie ("rise_length_bright_blue_var_cookie");
  if (rise_length_bright_blue_var_cookie) {document.getElementById("rise_length_bright_blue_var").value = rise_length_bright_blue_var_cookie;};
  var rise_length_bright_blue_mult_var_cookie = getCookie ("rise_length_bright_blue_mult_var_cookie");
  if (rise_length_bright_blue_mult_var_cookie) {document.getElementById("rise_length_bright_blue_mult_var").value = rise_length_bright_blue_mult_var_cookie;};
  var set_length_bright_blue_var_cookie = getCookie ("set_length_bright_blue_var_cookie");
  if (set_length_bright_blue_var_cookie) {document.getElementById("set_length_bright_blue_var").value = set_length_bright_blue_var_cookie;};
  var set_length_bright_blue_mult_var_cookie = getCookie ("set_length_bright_blue_mult_var_cookie");
  if (set_length_bright_blue_mult_var_cookie) {document.getElementById("set_length_bright_blue_mult_var").value = set_length_bright_blue_mult_var_cookie;};
  var rise_length_scatdist_mult_var_cookie = getCookie ("rise_length_scatdist_mult_var_cookie");
  if (rise_length_scatdist_mult_var_cookie) {document.getElementById("rise_length_scatdist_mult_var").value = rise_length_scatdist_mult_var_cookie;};
  var rise_length_scatdist_var_cookie = getCookie ("rise_length_scatdist_var_cookie");
  if (rise_length_scatdist_var_cookie) {document.getElementById("rise_length_scatdist_var").value = rise_length_scatdist_var_cookie;};
  var set_length_scatdist_mult_var_cookie = getCookie ("set_length_scatdist_mult_var_cookie");
  if (set_length_scatdist_mult_var_cookie) {document.getElementById("set_length_scatdist_mult_var").value = set_length_scatdist_mult_var_cookie;};
  var set_length_scatdist_var_cookie = getCookie ("set_length_scatdist_var_cookie");
  if (set_length_scatdist_var_cookie) {document.getElementById("set_length_scatdist_var").value = set_length_scatdist_var_cookie;};
  var rise_length_scatangshift_var_cookie = getCookie ("rise_length_scatangshift_var_cookie");
  if (rise_length_scatangshift_var_cookie) {document.getElementById("rise_length_scatangshift_var").value = rise_length_scatangshift_var_cookie;};
  var rise_length_scatangshift_mult_var_cookie = getCookie ("rise_length_scatangshift_mult_var_cookie");
  if (rise_length_scatangshift_mult_var_cookie) {document.getElementById("rise_length_scatangshift_mult_var").value = rise_length_scatangshift_mult_var_cookie;};
  var set_length_scatangshift_var_cookie = getCookie ("set_length_scatangshift_var_cookie");
  if (set_length_scatangshift_var_cookie) {document.getElementById("set_length_scatangshift_var").value = set_length_scatangshift_var_cookie;};
  var set_length_scatangshift_mult_var_cookie = getCookie ("set_length_scatangshift_mult_var_cookie");
  if (set_length_scatangshift_mult_var_cookie) {document.getElementById("set_length_scatangshift_mult_var").value = set_length_scatangshift_mult_var_cookie;};
  var rise_slope_scatdist_var_cookie = getCookie ("rise_slope_scatdist_var_cookie");
  if (rise_slope_scatdist_var_cookie) {document.getElementById("rise_slope_scatdist_var").value = rise_slope_scatdist_var_cookie;};
  var set_slope_scatdist_var_cookie = getCookie ("set_slope_scatdist_var_cookie");
  if (set_slope_scatdist_var_cookie) {document.getElementById("set_slope_scatdist_var").value = set_slope_scatdist_var_cookie;};
  var rise_slope_scatangshift_var_cookie = getCookie ("rise_slope_scatangshift_var_cookie");
  if (rise_slope_scatangshift_var_cookie) {document.getElementById("rise_slope_scatangshift_var").value = rise_slope_scatangshift_var_cookie;};
  var set_slope_scatangshift_var_cookie = getCookie ("set_slope_scatangshift_var_cookie");
  if (set_slope_scatangshift_var_cookie) {document.getElementById("set_slope_scatangshift_var").value = set_slope_scatangshift_var_cookie;};
  var rise_slope_bright_yellow_var_cookie = getCookie ("rise_slope_bright_yellow_var_cookie");
  if (rise_slope_bright_yellow_var_cookie) {document.getElementById("rise_slope_bright_yellow_var").value = rise_slope_bright_yellow_var_cookie;};
  var set_slope_bright_yellow_var_cookie = getCookie ("set_slope_bright_yellow_var_cookie");
  if (set_slope_bright_yellow_var_cookie) {document.getElementById("set_slope_bright_yellow_var").value = set_slope_bright_yellow_var_cookie;};
  var rise_slope_bright_blue_var_cookie = getCookie ("rise_slope_bright_blue_var_cookie");
  if (rise_slope_bright_blue_var_cookie) {document.getElementById("rise_slope_bright_blue_var").value = rise_slope_bright_blue_var_cookie;};
  var set_slope_bright_blue_var_cookie = getCookie ("set_slope_bright_blue_var_cookie");
  if (set_slope_bright_blue_var_cookie) {document.getElementById("set_slope_bright_blue_var").value = set_slope_bright_blue_var_cookie;};

  var transtime_slider = document.getElementById("transtime_var");
  var transtime_output = document.getElementById("transtime_label");
  transtime_output.innerHTML = transtime_slider.value;
  transtime_slider.oninput = function() {transtime_output.innerHTML = this.value;}

  var wake_offset_slider = document.getElementById("wake_offset_var");
  var wake_offset_output = document.getElementById("wake_offset_label");
  wake_offset_output.innerHTML = wake_offset_slider.value;
  wake_offset_slider.oninput = function() {wake_offset_output.innerHTML = this.value;}
  
  var bed_offset_slider = document.getElementById("bed_offset_var");
  var bed_offset_output = document.getElementById("bed_offset_label");
  bed_offset_output.innerHTML = bed_offset_slider.value;
  bed_offset_slider.oninput = function() {bed_offset_output.innerHTML = this.value;}
  
  var max_bright_slider = document.getElementById("max_bright_var");
  var max_bright_output = document.getElementById("max_bright_label");
  max_bright_output.innerHTML = (max_bright_slider.value * 100);
  max_bright_slider.oninput = function() {max_bright_output.innerHTML = (Math.round(this.value * 100));}
  
  var min_bright_slider = document.getElementById("min_bright_var");
  var min_bright_output = document.getElementById("min_bright_label");
  min_bright_output.innerHTML = (min_bright_slider.value * 100);
  min_bright_slider.oninput = function() {min_bright_output.innerHTML = (Math.round(this.value * 100));}
  
  var max_whiteCCT_slider = document.getElementById("max_whiteCCT_var");
  var max_whiteCCT_output = document.getElementById("max_whiteCCT_label");
  max_whiteCCT_output.innerHTML = (max_whiteCCT_slider.value);
  max_whiteCCT_slider.oninput = function() {max_whiteCCT_output.innerHTML = (Math.round(this.value));}
  
  var min_whiteCCT_slider = document.getElementById("min_whiteCCT_var");
  var min_whiteCCT_output = document.getElementById("min_whiteCCT_label");
  min_whiteCCT_output.innerHTML = (min_whiteCCT_slider.value);
  min_whiteCCT_slider.oninput = function() {min_whiteCCT_output.innerHTML = (Math.round(this.value));}

  var max_colorCCT_slider = document.getElementById("max_colorCCT_var");
  var max_colorCCT_output = document.getElementById("max_colorCCT_label");
  max_colorCCT_output.innerHTML = (max_colorCCT_slider.value);
  max_colorCCT_slider.oninput = function() {max_colorCCT_output.innerHTML = (Math.round(this.value));}
  
  var min_colorCCT_slider = document.getElementById("min_colorCCT_var");
  var min_colorCCT_output = document.getElementById("min_colorCCT_label");
  min_colorCCT_output.innerHTML = (min_colorCCT_slider.value);
  min_colorCCT_slider.oninput = function() {min_colorCCT_output.innerHTML = (Math.round(this.value));}
  
  var rise_length_bright_slider = document.getElementById("rise_length_bright_var");
  var rise_length_bright_output = document.getElementById("rise_length_bright_label");
  rise_length_bright_output.innerHTML = rise_length_bright_slider.value;
  rise_length_bright_slider.oninput = function() {rise_length_bright_output.innerHTML = this.value;}
  
  var rise_length_bright_mult_slider = document.getElementById("rise_length_bright_mult_var");
  var rise_length_bright_mult_output = document.getElementById("rise_length_bright_mult_label");
  rise_length_bright_mult_output.innerHTML = rise_length_bright_mult_slider.value;
  rise_length_bright_mult_slider.oninput = function() {rise_length_bright_mult_output.innerHTML = this.value;}
  
  var set_length_bright_slider = document.getElementById("set_length_bright_var");
  var set_length_bright_output = document.getElementById("set_length_bright_label");
  set_length_bright_output.innerHTML = set_length_bright_slider.value;
  set_length_bright_slider.oninput = function() {set_length_bright_output.innerHTML = this.value;}
  
  var set_length_bright_mult_slider = document.getElementById("set_length_bright_mult_var");
  var set_length_bright_mult_output = document.getElementById("set_length_bright_mult_label");
  set_length_bright_mult_output.innerHTML = set_length_bright_mult_slider.value;
  set_length_bright_mult_slider.oninput = function() {set_length_bright_mult_output.innerHTML = this.value;}
  
  var rise_length_whiteCCT_slider = document.getElementById("rise_length_whiteCCT_var");
  var rise_length_whiteCCT_output = document.getElementById("rise_length_whiteCCT_label");
  rise_length_whiteCCT_output.innerHTML = rise_length_whiteCCT_slider.value;
  rise_length_whiteCCT_slider.oninput = function() {rise_length_whiteCCT_output.innerHTML = this.value;}
  
  var rise_length_whiteCCT_mult_slider = document.getElementById("rise_length_whiteCCT_mult_var");
  var rise_length_whiteCCT_mult_output = document.getElementById("rise_length_whiteCCT_mult_label");
  rise_length_whiteCCT_mult_output.innerHTML = rise_length_whiteCCT_mult_slider.value;
  rise_length_whiteCCT_mult_slider.oninput = function() {rise_length_whiteCCT_mult_output.innerHTML = this.value;}
  
  var set_length_whiteCCT_slider = document.getElementById("set_length_whiteCCT_var");
  var set_length_whiteCCT_output = document.getElementById("set_length_whiteCCT_label");
  set_length_whiteCCT_output.innerHTML = set_length_whiteCCT_slider.value;
  set_length_whiteCCT_slider.oninput = function() {set_length_whiteCCT_output.innerHTML = this.value;}
  
  var set_length_whiteCCT_mult_slider = document.getElementById("set_length_whiteCCT_mult_var");
  var set_length_whiteCCT_mult_output = document.getElementById("set_length_whiteCCT_mult_label");
  set_length_whiteCCT_mult_output.innerHTML = set_length_whiteCCT_mult_slider.value;
  set_length_whiteCCT_mult_slider.oninput = function() {set_length_whiteCCT_mult_output.innerHTML = this.value;}

  var rise_length_colorCCT_slider = document.getElementById("rise_length_colorCCT_var");
  var rise_length_colorCCT_output = document.getElementById("rise_length_colorCCT_label");
  rise_length_colorCCT_output.innerHTML = rise_length_colorCCT_slider.value;
  rise_length_colorCCT_slider.oninput = function() {rise_length_colorCCT_output.innerHTML = this.value;}
  
  var rise_length_colorCCT_mult_slider = document.getElementById("rise_length_colorCCT_mult_var");
  var rise_length_colorCCT_mult_output = document.getElementById("rise_length_colorCCT_mult_label");
  rise_length_colorCCT_mult_output.innerHTML = rise_length_colorCCT_mult_slider.value;
  rise_length_colorCCT_mult_slider.oninput = function() {rise_length_colorCCT_mult_output.innerHTML = this.value;}
  
  var set_length_colorCCT_slider = document.getElementById("set_length_colorCCT_var");
  var set_length_colorCCT_output = document.getElementById("set_length_colorCCT_label");
  set_length_colorCCT_output.innerHTML = set_length_colorCCT_slider.value;
  set_length_colorCCT_slider.oninput = function() {set_length_colorCCT_output.innerHTML = this.value;}
  
  var set_length_colorCCT_mult_slider = document.getElementById("set_length_colorCCT_mult_var");
  var set_length_colorCCT_mult_output = document.getElementById("set_length_colorCCT_mult_label");
  set_length_colorCCT_mult_output.innerHTML = set_length_colorCCT_mult_slider.value;
  set_length_colorCCT_mult_slider.oninput = function() {set_length_colorCCT_mult_output.innerHTML = this.value;}
  
  var rise_slope_bright_slider = document.getElementById("rise_slope_bright_var");
  var rise_slope_bright_output = document.getElementById("rise_slope_bright_label");
  rise_slope_bright_output.innerHTML = (rise_slope_bright_slider.value);
  rise_slope_bright_slider.oninput = function() {rise_slope_bright_output.innerHTML = (Math.round(this.value));}
  
  var set_slope_bright_slider = document.getElementById("set_slope_bright_var");
  var set_slope_bright_output = document.getElementById("set_slope_bright_label");
  set_slope_bright_output.innerHTML = (set_slope_bright_slider.value);
  set_slope_bright_slider.oninput = function() {set_slope_bright_output.innerHTML = (Math.round(this.value));}
  
  var rise_slope_whiteCCT_slider = document.getElementById("rise_slope_whiteCCT_var");
  var rise_slope_whiteCCT_output = document.getElementById("rise_slope_whiteCCT_label");
  rise_slope_whiteCCT_output.innerHTML = (rise_slope_whiteCCT_slider.value);
  rise_slope_whiteCCT_slider.oninput = function() {rise_slope_whiteCCT_output.innerHTML = (Math.round(this.value));}
  
  var set_slope_whiteCCT_slider = document.getElementById("set_slope_whiteCCT_var");
  var set_slope_whiteCCT_output = document.getElementById("set_slope_whiteCCT_label");
  set_slope_whiteCCT_output.innerHTML = (set_slope_whiteCCT_slider.value);
  set_slope_whiteCCT_slider.oninput = function() {set_slope_whiteCCT_output.innerHTML = (Math.round(this.value));}

  var rise_slope_colorCCT_slider = document.getElementById("rise_slope_colorCCT_var");
  var rise_slope_colorCCT_output = document.getElementById("rise_slope_colorCCT_label");
  rise_slope_colorCCT_output.innerHTML = (rise_slope_colorCCT_slider.value);
  rise_slope_colorCCT_slider.oninput = function() {rise_slope_colorCCT_output.innerHTML = (Math.round(this.value));}
  
  var set_slope_colorCCT_slider = document.getElementById("set_slope_colorCCT_var");
  var set_slope_colorCCT_output = document.getElementById("set_slope_colorCCT_label");
  set_slope_colorCCT_output.innerHTML = (set_slope_colorCCT_slider.value);
  set_slope_colorCCT_slider.oninput = function() {set_slope_colorCCT_output.innerHTML = (Math.round(this.value));}
  
  var max_scatdist_slider = document.getElementById("max_scatdist_var");
  var max_scatdist_output = document.getElementById("max_scatdist_label");
  max_scatdist_output.innerHTML = (max_scatdist_slider.value);
  max_scatdist_slider.oninput = function() {max_scatdist_output.innerHTML = (Math.round(this.value));}
  
  var min_scatdist_slider = document.getElementById("min_scatdist_var");
  var min_scatdist_output = document.getElementById("min_scatdist_label");
  min_scatdist_output.innerHTML = (min_scatdist_slider.value);
  min_scatdist_slider.oninput = function() {min_scatdist_output.innerHTML = (Math.round(this.value));}
  
  var max_scatangshift_slider = document.getElementById("max_scatangshift_var");
  var max_scatangshift_output = document.getElementById("max_scatangshift_label");
  max_scatangshift_output.innerHTML = (max_scatangshift_slider.value);
  max_scatangshift_slider.oninput = function() {max_scatangshift_output.innerHTML = (Math.round(this.value));}
  
  var min_scatangshift_slider = document.getElementById("min_scatangshift_var");
  var min_scatangshift_output = document.getElementById("min_scatangshift_label");
  min_scatangshift_output.innerHTML = (min_scatangshift_slider.value);
  min_scatangshift_slider.oninput = function() {min_scatangshift_output.innerHTML = (Math.round(this.value));}
  
  var max_bright_yellow_slider = document.getElementById("max_bright_yellow_var");
  var max_bright_yellow_output = document.getElementById("max_bright_yellow_label");
  max_bright_yellow_output.innerHTML = (max_bright_yellow_slider.value * 100);
  max_bright_yellow_slider.oninput = function() {max_bright_yellow_output.innerHTML = (Math.round(this.value * 100));}
  
  var min_bright_yellow_slider = document.getElementById("min_bright_yellow_var");
  var min_bright_yellow_output = document.getElementById("min_bright_yellow_label");
  min_bright_yellow_output.innerHTML = (min_bright_yellow_slider.value * 100);
  min_bright_yellow_slider.oninput = function() {min_bright_yellow_output.innerHTML = (Math.round(this.value * 100));}
  
  var max_bright_blue_slider = document.getElementById("max_bright_blue_var");
  var max_bright_blue_output = document.getElementById("max_bright_blue_label");
  max_bright_blue_output.innerHTML = (max_bright_blue_slider.value * 100);
  max_bright_blue_slider.oninput = function() {max_bright_blue_output.innerHTML = (Math.round(this.value * 100));}
  
  var min_bright_blue_slider = document.getElementById("min_bright_blue_var");
  var min_bright_blue_output = document.getElementById("min_bright_blue_label");
  min_bright_blue_output.innerHTML = (min_bright_blue_slider.value * 100);
  min_bright_blue_slider.oninput = function() {min_bright_blue_output.innerHTML = (Math.round(this.value * 100));}
  
  var rise_length_scatdist_slider = document.getElementById("rise_length_scatdist_var");
  var rise_length_scatdist_output = document.getElementById("rise_length_scatdist_label");
  rise_length_scatdist_output.innerHTML = rise_length_scatdist_slider.value;
  rise_length_scatdist_slider.oninput = function() {rise_length_scatdist_output.innerHTML = this.value;}
  
  var rise_length_scatdist_mult_slider = document.getElementById("rise_length_scatdist_mult_var");
  var rise_length_scatdist_mult_output = document.getElementById("rise_length_scatdist_mult_label");
  rise_length_scatdist_mult_output.innerHTML = rise_length_scatdist_mult_slider.value;
  rise_length_scatdist_mult_slider.oninput = function() {rise_length_scatdist_mult_output.innerHTML = this.value;}
  
  var set_length_scatdist_slider = document.getElementById("set_length_scatdist_var");
  var set_length_scatdist_output = document.getElementById("set_length_scatdist_label");
  set_length_scatdist_output.innerHTML = set_length_scatdist_slider.value;
  set_length_scatdist_slider.oninput = function() {set_length_scatdist_output.innerHTML = this.value;}
  
  var set_length_scatdist_mult_slider = document.getElementById("set_length_scatdist_mult_var");
  var set_length_scatdist_mult_output = document.getElementById("set_length_scatdist_mult_label");
  set_length_scatdist_mult_output.innerHTML = set_length_scatdist_mult_slider.value;
  set_length_scatdist_mult_slider.oninput = function() {set_length_scatdist_mult_output.innerHTML = this.value;}
  
  var rise_length_scatangshift_slider = document.getElementById("rise_length_scatangshift_var");
  var rise_length_scatangshift_output = document.getElementById("rise_length_scatangshift_label");
  rise_length_scatangshift_output.innerHTML = rise_length_scatangshift_slider.value;
  rise_length_scatangshift_slider.oninput = function() {rise_length_scatangshift_output.innerHTML = this.value;}
  
  var rise_length_scatangshift_mult_slider = document.getElementById("rise_length_scatangshift_mult_var");
  var rise_length_scatangshift_mult_output = document.getElementById("rise_length_scatangshift_mult_label");
  rise_length_scatangshift_mult_output.innerHTML = rise_length_scatangshift_mult_slider.value;
  rise_length_scatangshift_mult_slider.oninput = function() {rise_length_scatangshift_mult_output.innerHTML = this.value;}
  
  var set_length_scatangshift_slider = document.getElementById("set_length_scatangshift_var");
  var set_length_scatangshift_output = document.getElementById("set_length_scatangshift_label");
  set_length_scatangshift_output.innerHTML = set_length_scatangshift_slider.value;
  set_length_scatangshift_slider.oninput = function() {set_length_scatangshift_output.innerHTML = this.value;}
  
  var set_length_scatangshift_mult_slider = document.getElementById("set_length_scatangshift_mult_var");
  var set_length_scatangshift_mult_output = document.getElementById("set_length_scatangshift_mult_label");
  set_length_scatangshift_mult_output.innerHTML = set_length_scatangshift_mult_slider.value;
  set_length_scatangshift_mult_slider.oninput = function() {set_length_scatangshift_mult_output.innerHTML = this.value;}
  
  var rise_length_bright_yellow_slider = document.getElementById("rise_length_bright_yellow_var");
  var rise_length_bright_yellow_output = document.getElementById("rise_length_bright_yellow_label");
  rise_length_bright_yellow_output.innerHTML = rise_length_bright_yellow_slider.value;
  rise_length_bright_yellow_slider.oninput = function() {rise_length_bright_yellow_output.innerHTML = this.value;}
  
  var rise_length_bright_yellow_mult_slider = document.getElementById("rise_length_bright_yellow_mult_var");
  var rise_length_bright_yellow_mult_output = document.getElementById("rise_length_bright_yellow_mult_label");
  rise_length_bright_yellow_mult_output.innerHTML = rise_length_bright_yellow_mult_slider.value;
  rise_length_bright_yellow_mult_slider.oninput = function() {rise_length_bright_yellow_mult_output.innerHTML = this.value;}
  
  var set_length_bright_yellow_slider = document.getElementById("set_length_bright_yellow_var");
  var set_length_bright_yellow_output = document.getElementById("set_length_bright_yellow_label");
  set_length_bright_yellow_output.innerHTML = set_length_bright_yellow_slider.value;
  set_length_bright_yellow_slider.oninput = function() {set_length_bright_yellow_output.innerHTML = this.value;}
  
  var set_length_bright_yellow_mult_slider = document.getElementById("set_length_bright_yellow_mult_var");
  var set_length_bright_yellow_mult_output = document.getElementById("set_length_bright_yellow_mult_label");
  set_length_bright_yellow_mult_output.innerHTML = set_length_bright_yellow_mult_slider.value;
  set_length_bright_yellow_mult_slider.oninput = function() {set_length_bright_yellow_mult_output.innerHTML = this.value;}
  
  var rise_length_bright_blue_slider = document.getElementById("rise_length_bright_blue_var");
  var rise_length_bright_blue_output = document.getElementById("rise_length_bright_blue_label");
  rise_length_bright_blue_output.innerHTML = rise_length_bright_blue_slider.value;
  rise_length_bright_blue_slider.oninput = function() {rise_length_bright_blue_output.innerHTML = this.value;}
  
  var rise_length_bright_blue_mult_slider = document.getElementById("rise_length_bright_blue_mult_var");
  var rise_length_bright_blue_mult_output = document.getElementById("rise_length_bright_blue_mult_label");
  rise_length_bright_blue_mult_output.innerHTML = rise_length_bright_blue_mult_slider.value;
  rise_length_bright_blue_mult_slider.oninput = function() {rise_length_bright_blue_mult_output.innerHTML = this.value;}
  
  var set_length_bright_blue_slider = document.getElementById("set_length_bright_blue_var");
  var set_length_bright_blue_output = document.getElementById("set_length_bright_blue_label");
  set_length_bright_blue_output.innerHTML = set_length_bright_blue_slider.value;
  set_length_bright_blue_slider.oninput = function() {set_length_bright_blue_output.innerHTML = this.value;}
  
  var set_length_bright_blue_mult_slider = document.getElementById("set_length_bright_blue_mult_var");
  var set_length_bright_blue_mult_output = document.getElementById("set_length_bright_blue_mult_label");
  set_length_bright_blue_mult_output.innerHTML = set_length_bright_blue_mult_slider.value;
  set_length_bright_blue_mult_slider.oninput = function() {set_length_bright_blue_mult_output.innerHTML = this.value;}
  
  var rise_slope_scatdist_slider = document.getElementById("rise_slope_scatdist_var");
  var rise_slope_scatdist_output = document.getElementById("rise_slope_scatdist_label");
  rise_slope_scatdist_output.innerHTML = (rise_slope_scatdist_slider.value);
  rise_slope_scatdist_slider.oninput = function() {rise_slope_scatdist_output.innerHTML = (Math.round(this.value));}
  
  var set_slope_scatdist_slider = document.getElementById("set_slope_scatdist_var");
  var set_slope_scatdist_output = document.getElementById("set_slope_scatdist_label");
  set_slope_scatdist_output.innerHTML = (set_slope_scatdist_slider.value);
  set_slope_scatdist_slider.oninput = function() {set_slope_scatdist_output.innerHTML = (Math.round(this.value));}
  
  var rise_slope_scatangshift_slider = document.getElementById("rise_slope_scatangshift_var");
  var rise_slope_scatangshift_output = document.getElementById("rise_slope_scatangshift_label");
  rise_slope_scatangshift_output.innerHTML = (rise_slope_scatangshift_slider.value);
  rise_slope_scatangshift_slider.oninput = function() {rise_slope_scatangshift_output.innerHTML = (Math.round(this.value));}
  
  var set_slope_scatangshift_slider = document.getElementById("set_slope_scatangshift_var");
  var set_slope_scatangshift_output = document.getElementById("set_slope_scatangshift_label");
  set_slope_scatangshift_output.innerHTML = (set_slope_scatangshift_slider.value);
  set_slope_scatangshift_slider.oninput = function() {set_slope_scatangshift_output.innerHTML = (Math.round(this.value));}
  
  var rise_slope_bright_yellow_slider = document.getElementById("rise_slope_bright_yellow_var");
  var rise_slope_bright_yellow_output = document.getElementById("rise_slope_bright_yellow_label");
  rise_slope_bright_yellow_output.innerHTML = (rise_slope_bright_yellow_slider.value);
  rise_slope_bright_yellow_slider.oninput = function() {rise_slope_bright_yellow_output.innerHTML = (Math.round(this.value));}
  
  var set_slope_bright_yellow_slider = document.getElementById("set_slope_bright_yellow_var");
  var set_slope_bright_yellow_output = document.getElementById("set_slope_bright_yellow_label");
  set_slope_bright_yellow_output.innerHTML = (set_slope_bright_yellow_slider.value);
  set_slope_bright_yellow_slider.oninput = function() {set_slope_bright_yellow_output.innerHTML = (Math.round(this.value));}
  
  var rise_slope_bright_blue_slider = document.getElementById("rise_slope_bright_blue_var");
  var rise_slope_bright_blue_output = document.getElementById("rise_slope_bright_blue_label");
  rise_slope_bright_blue_output.innerHTML = (rise_slope_bright_blue_slider.value);
  rise_slope_bright_blue_slider.oninput = function() {rise_slope_bright_blue_output.innerHTML = (Math.round(this.value));}
  
  var set_slope_bright_blue_slider = document.getElementById("set_slope_bright_blue_var");
  var set_slope_bright_blue_output = document.getElementById("set_slope_bright_blue_label");
  set_slope_bright_blue_output.innerHTML = (set_slope_bright_blue_slider.value);
  set_slope_bright_blue_slider.oninput = function() {set_slope_bright_blue_output.innerHTML = (Math.round(this.value));}

  if (max_bright_var_cookie) {alert ("Your previously saved TimeGiver settings have been restored!")} else {alert ("No previously saved TimeGiver settings were found to restore.");};

  lineremover()
}

var huebridgeaddress = [];
var huebridgeusername = [];
var lights = [];
var switches = [];

async function gethuebridgeaddresscookie (){
  var addresscookie = getCookie ("huebridgeaddress");
  if (addresscookie.length > 3) {huebridgeaddress = unescape(addresscookie); /*alert ("Address cookie is" + addresscookie);*/ return huebridgeaddress;} else {
    async function discoverbridge() {
      await hue.discover().then(bridges => {
      if(bridges.length === 0) {
        console.log("The demo can't find a Hue bridge on your network. Make sure that you actually have a Hue bridge (not just lights you control with Bluetooth) and that this device is connected to the same network as that bridge. This demo does not currently support controlling Hue lights remotely.");
      }
      else {
        bridges.forEach(b => console.log('Bridge found at IP address %s.', b.internalipaddress));
        bridges.forEach(b => {setCookie("huebridgeaddress", escape (b.internalipaddress), 365)});
        bridges.forEach(b => huebridgeaddress = (b.internalipaddress));
        //console.log ("Hue bridge found: " + huebridgeaddress)
        return huebridgeaddress;}
    }).catch(e => {console.log("The demo can't find a Hue bridge on your network. Make sure that you actually have a Hue bridge (not just lights you control with Bluetooth) and that this device is connected to the same network as that bridge. This demo does not currently support controlling Hue lights remotely.", e)});
    }
  await discoverbridge();
  return huebridgeaddress;
  }
}

async function gethuebridgeaddressnocookie (){
  async function discoverbridge() {
      await hue.discover().then(bridges => {
      if(bridges.length === 0) {
        alert("The demo can't find a Hue bridge on your network. Make sure that you actually have a Hue bridge (not just lights you control with Bluetooth) and that this device is connected to the same network as that bridge. This demo does not currently support controlling Hue lights remotely.");
      }
      else {
        bridges.forEach(b => console.log('Bridge found at IP address %s.', b.internalipaddress));
        bridges.forEach(b => {setCookie("huebridgeaddress", escape (b.internalipaddress), 365)});
        bridges.forEach(b => huebridgeaddress = (b.internalipaddress));
        //console.log ("Hue bridge found: " + huebridgeaddress)
        return huebridgeaddress;}
    }).catch(e => {alert("The demo can't find a Hue bridge on your network. Make sure that you actually have a Hue bridge (not just lights you control with Bluetooth) and that this device is connected to the same network as that bridge. This demo does not currently support controlling Hue lights remotely.", e)});
    }
  await discoverbridge();
  return huebridgeaddress;
}

function testbridgeaddress(url) {
    var encodedURL = encodeURIComponent(url);
    var isValid = false;

    $.ajax({
      url: "http://" + encodedURL + "/api",
      type: "get",
      async: false,
      dataType: "json",
      success: function(data) {
        isValid = true;
      },
      error: function(){
        isValid = false;
      }
    });

    return isValid;
}

function testusername(url, username) {
    var encodedURL = encodeURIComponent(url);
    var isValid = false;

    $.ajax({
      url: "http://" + encodedURL + "/api/" + username,
      type: "get",
      async: false,
      dataType: "json",
      success: function(data) {
        var errortype = (data && data[0] && data[0].error && data[0].error.type)
        if (typeof(errortype) == 'undefined') {isValid = true;} else {isValid = false}   
      },
      error: function(){
        isValid = false;
      }
    });

    return isValid;
}

async function gethueusername(huebridgeaddress){
    var bridge = await hue.bridge(huebridgeaddress);
    return bridge.createUser('TimeGiverDemo#WebBrowser').then(data => {
      //extract bridge-generated username from returned data
      var username = data[0].success.username;
      var huebridgeusername = username;
      setCookie("huebridgeusername", escape (huebridgeusername), 365);
      console.log('New username:', username);
      //console.log (huebridgeusername);
      return huebridgeusername;
      }).catch(e => {alert('The link button on top of your Hue hub has not been pressed. Try pressing it and then starting the demo again less than 30 seconds later.', e); var huebridgeusername = 1; return huebridgeusername});
    return huebridgeusername;
}

function stopdemo (){
  //alert (scheduler)
  window.clearInterval(scheduler)
  document.getElementById("startdemobutton").disabled = false;
  document.getElementById("stopdemobutton").disabled = true;
}

function labelchanger (x, mult) {
  var _slider = document.getElementById(x.concat("_var"));
  //console.log (x)
  var _output = document.getElementById(x.concat("_label"));
  _output.innerHTML = (_slider.value * mult);
  _slider.oninput = function() {_output.innerHTML = (Math.round(this.value  * mult));}
}

async function startdemo (){
  await gethuebridgeaddresscookie();
  //var huebridgeaddress = "192.168.1.38"
  var bridgeaddresstest = testbridgeaddress(huebridgeaddress);
  //console.log (bridgeaddresstest);
  if (bridgeaddresstest === false) {await gethuebridgeaddressnocookie(); var bridge = await hue.bridge(huebridgeaddress);} else {console.log("bridge found at " + huebridgeaddress); var bridge = await hue.bridge(huebridgeaddress);}
  //alert (huebridgeaddress)
  if (huebridgeaddress.length > 3) {
    //alert (huebridgeaddress + " is being used as address")
    var usernamecookie = getCookie ("huebridgeusername");
    if (usernamecookie.length > 3) {
      var usernametest = testusername(huebridgeaddress, usernamecookie)
      console.log(usernametest)
      if (usernametest === true){
        huebridgeusername = unescape(usernamecookie);
        console.log("Usable username found from cookie: "  + huebridgeusername)
      } else {
        var huebridgeusername = await gethueusername(huebridgeaddress);
        console.log ("New username is: " + huebridgeusername);}
    } else {
      var huebridgeusername = await gethueusername(huebridgeaddress);
      console.log ("New username is: " + huebridgeusername);
    }
    if (huebridgeusername.length > 3){
      //console.log (huebridgeaddress);
      //console.log (huebridgeusername);
      var user = await bridge.user(huebridgeusername);
    
      await user.getLights()
        .then(function(result) {
          //console.log(result); // "initResolve"
          //console.log(result[1].state.on)
          return result;
        })
        .then(function(result) {
          //console.log(result); // "normalReturn"
        });

      lights = await user.getLights();
      var colorlights = [];
      for (i in lights){
        if (lights[i].capabilities.control.colorgamuttype) {
          colorlights[i] = lights[i]
        }
      }

      document.getElementById("overridesensorlist").innerHTML = null;

      await user.getSensors()
        .then(function(result) {
          //console.log(result); // "initResolve"
          //console.log(result[1].state.on)
          return result;
        })
        .then(function(result) {
          //console.log(result); // "normalReturn"
        });

      switches = await user.getSensors();

      for (i in switches){
        var sensorname = (switches[i].name);
        var sensorname_esc = (sensorname.replace(/\s+/g, ''));
        var sensorname_esc = (sensorname_esc.replace(/'/g, ''));
        var productname = switches[i].productname;
        var producttype = switches[i].type;
        var overridesensordiv = ("overridesensordiv_" + sensorname_esc)
        var overridecheckboxlist = ("overridecheckboxlist_" + sensorname_esc)
        if (productname) {
          var huedimmerswitch = productname.includes("Hue dimmer switch");
          var lutronaurora = productname.includes("Lutron Aurora");
          var producttypeincludes = producttype.includes("Rotary");
          if (producttypeincludes === true && lutronaurora === true) {
            document.getElementById("overridesensorlist").innerHTML = (document.getElementById("overridesensorlist").innerHTML + "<div class='level4element' style='display:block' id='overridesensordiv_" + sensorname_esc + "'><input onclick='toggleoverridelist();' type='checkbox' id='overridecheckbox_" + sensorname_esc + "'>" + switches[i].name + "<ul style='display:none' id='overridecheckboxlist_" + sensorname_esc + "'></ul></input></div>")
            for (i in lights){
              var lightname = (lights[i].name);
              var lightname_esc = (lightname.replace(/\s+/g, ''));
              var lightname_esc = (lightname_esc.replace(/'/g, ''));
              document.getElementById(overridecheckboxlist).innerHTML = (document.getElementById(overridecheckboxlist).innerHTML + "<li style='display:none' id='" + overridesensordiv + "_light_" + lightname_esc + "'><input type='checkbox' id='" + overridesensordiv + "_lightcheckbox_" + lightname_esc + "'>" + lights[i].name + "</input></li></div>")
            }
          }
          if (huedimmerswitch === true) {
            //console.log ("Dimmer created");
            //console.log (document.getElementById("overridesensorlisttext").innerHTML)
            document.getElementById("overridesensorlist").innerHTML = (document.getElementById("overridesensorlist").innerHTML + "<div class='level4element' style='display:block' id='overridesensordiv_" + sensorname_esc + "'><input onclick='toggleoverridelist();' type='checkbox' id='overridecheckbox_" + sensorname_esc + "'>" + switches[i].name + "<ul style='display:none' id='overridecheckboxlist_" + sensorname_esc + "'></ul></input></div>")
            for (i in lights){
              var lightname = (lights[i].name);
              var lightname_esc = (lightname.replace(/\s+/g, ''));
              var lightname_esc = (lightname_esc.replace(/'/g, ''));
              document.getElementById(overridecheckboxlist).innerHTML = (document.getElementById(overridecheckboxlist).innerHTML + "<li style='display:none' id='" + overridesensordiv + "_light_" + lightname_esc + "'><input type='checkbox' id='" + overridesensordiv + "_lightcheckbox_" + lightname_esc + "'>" + lights[i].name + "</input></li></div>")
            }
          }
        }
      }
      

      document.getElementById("lightlist").innerHTML = null;

      for (i in lights) {
        var lightname = (lights[i].name);
        var lightname_esc = (lightname.replace(/\s+/g, ''))
        var lightname_esc = (lightname_esc.replace(/'/g, ''))
        var lightoptions = "lightoptions_" + lightname_esc
        document.getElementById("lightlist").innerHTML = (document.getElementById("lightlist").innerHTML + "<li class='level4element'>" + lightname + "</li><div id='lightoptions_" + lightname_esc + "'><input class='level4element' type='checkbox' id='whitelightcheckbox_" + lightname_esc + "' onclick='toggleoverridelistitem(\"" + lightname_esc + "\"); toggleautoonlightlistitem(\"" + lightname_esc + "\"); listswitch(\"white\", \"" + lightname_esc + "\")'>White</input><br></div>")
      }

      for (i in colorlights){
        var colorlightname = (colorlights[i].name);
        var colorlightname_esc = (colorlightname.replace(/\s+/g, ''))
        var colorlightname_esc = (colorlightname_esc.replace(/'/g, ''))
        var lightoptions = "lightoptions_" + colorlightname_esc
        document.getElementById(lightoptions).innerHTML = (document.getElementById(lightoptions).innerHTML + "<input class='level4element' type='checkbox' id='comblightcheckbox_" + colorlightname_esc + "' onclick='toggleoverridelistitem(\"" + colorlightname_esc + "\");toggleautoonlightlistitem(\"" + colorlightname_esc + "\"); listswitch(\"comb\", \"" + colorlightname_esc + "\"); labelchanger(\"" + colorlightname_esc + "_combalt\", 1); labelchanger(\"" + colorlightname_esc + "_combaz\", 1)'>Sky</input><br><div class='slidecontainer' style='display:none' id='" + colorlightname_esc + "_combdiv'><div class='slidecontainer' id='" + colorlightname_esc + "_combalt_div' style='display:none'><input min='0' max='90' value='45' step='5' class='slider' type='range' id='" + colorlightname_esc + "_combalt_var' onchange='labelchanger(\"" + colorlightname_esc + "_combalt\", 1)'><div class='tooltip'>Light Altitude: <span id='" + colorlightname_esc + "_combalt_label'></span> degrees</input><span class='tooltiptext'>The altitude in degrees of the point in the sky being simulated, typically the part of the wall closest to " + colorlights[i].name + ".  The zenith or top of the sky is 90 degrees while the horizon is 0 degrees.</span></br></div></div><div class='slidecontainer' id='" + colorlightname_esc + "_combaz_div' style='display:none'><input min='0' max='360' value='0' step='5' class='slider' type='range' id='" + colorlightname_esc + "_combaz_var' onchange='labelchanger(\"" + colorlightname_esc + "_combaz\", 1)'><div class='tooltip'>Light Azimuth: <span id='" + colorlightname_esc + "_combaz_label'></span> degrees</input><span class='tooltiptext'>The azimuth in degrees of the point in the sky being simulated, typically the part of the wall closest to " + colorlights[i].name + ".  North is 0 degrees, east is 90 degrees, and so on.</span></br></div></div></div>")
        document.getElementById(lightoptions).innerHTML = (document.getElementById(lightoptions).innerHTML + "<input class='level4element' type='checkbox' id='bluelightcheckbox_" + colorlightname_esc + "' onclick='toggleoverridelistitem(\"" + colorlightname_esc + "\");toggleautoonlightlistitem(\"" + colorlightname_esc + "\"); listswitch(\"blue\", \"" + colorlightname_esc + "\"); labelchanger(\"" + colorlightname_esc + "_bluealt\", 1); labelchanger(\"" + colorlightname_esc + "_blueaz\", 1)'>Blue</input><br><div class='slidecontainer' style='display:none' id='" + colorlightname_esc + "_bluediv'><div class='slidecontainer' id='" + colorlightname_esc + "_bluealt_div' style='display:none'><input min='0' max='90' value='45' step='5' class='slider' type='range' id='" + colorlightname_esc + "_bluealt_var' onchange='labelchanger(\"" + colorlightname_esc + "_bluealt\", 1)'><div class='tooltip'>Light Altitude: <span id='" + colorlightname_esc + "_bluealt_label'></span> degrees</input><span class='tooltiptext'>The altitude in degrees of the point in the sky being simulated, typically the part of the wall closest to " + colorlights[i].name + ".  The zenith or top of the sky is 90 degrees while the horizon is 0 degrees.</span></br></div></div><div class='slidecontainer' id='" + colorlightname_esc + "_blueaz_div' style='display:none'><input min='0' max='360' value='0' step='5' class='slider' type='range' id='" + colorlightname_esc + "_blueaz_var' onchange='labelchanger(\"" + colorlightname_esc + "_blueaz\", 1)'><div class='tooltip'>Light Azimuth: <span id='" + colorlightname_esc + "_blueaz_label'></span> degrees</input><span class='tooltiptext'>The azimuth in degrees of the point in the sky being simulated, typically the part of the wall closest to " + colorlights[i].name + ".  North is 0 degrees, east is 90 degrees, and so on.</span></br></div></div></div>")
        document.getElementById(lightoptions).innerHTML = (document.getElementById(lightoptions).innerHTML + "<input class='level4element' type='checkbox' id='yellowlightcheckbox_" + colorlightname_esc + "' onclick='toggleoverridelistitem(\"" + colorlightname_esc + "\");toggleautoonlightlistitem(\"" + colorlightname_esc + "\"); listswitch(\"yellow\", \"" + colorlightname_esc + "\"); labelchanger(\"" + colorlightname_esc + "_yellowalt\", 1); labelchanger(\"" + colorlightname_esc + "_yellowaz\", 1)'>Yellow</input><br><div class='slidecontainer' style='display:none' id='" + colorlightname_esc + "_yellowdiv'><div class='slidecontainer' id='" + colorlightname_esc + "_yellowalt_div' style='display:none'><input min='0' max='90' value='45' step='5' class='slider' type='range' id='" + colorlightname_esc + "_yellowalt_var' onchange='labelchanger(\"" + colorlightname_esc + "_yellowalt\", 1)'><div class='tooltip'>Light Altitude: <span id='" + colorlightname_esc + "_yellowalt_label'></span> degrees</input><span class='tooltiptext'>The altitude in degrees of the point in the sky being simulated, typically the part of the wall closest to " + colorlights[i].name + ".  The zenith or top of the sky is 90 degrees while the horizon is 0 degrees.</span></br></div></div><div class='slidecontainer' id='" + colorlightname_esc + "_yellowaz_div' style='display:none'><input min='0' max='360' value='0' step='5' class='slider' type='range' id='" + colorlightname_esc + "_yellowaz_var' onchange='labelchanger(\"" + colorlightname_esc + "_yellowaz\", 1)'><div class='tooltip'>Light Azimuth: <span id='" + colorlightname_esc + "_yellowaz_label'></span> degrees</input><span class='tooltiptext'>The azimuth in degrees of the point in the sky being simulated, typically the part of the wall closest to " + colorlights[i].name + ".  North is 0 degrees, east is 90 degrees, and so on.</span></br></div></div></div>")
      }

      for (i in lights) {
        var lightname = (lights[i].name);
        var lightname_esc = (lightname.replace(/\s+/g, ''))
        var lightname_esc = (lightname_esc.replace(/'/g, ''))
        var lightoptions = "lightoptions_" + lightname_esc
        document.getElementById(lightoptions).innerHTML = (document.getElementById(lightoptions).innerHTML + "<div style='display:none' id='autoondiv_" + lightname_esc + "'><input class='level4element' type='checkbox' id='autooncheckbox_" + lightname_esc + "'><div class='tooltip'>Morning On <span id='" + lightname_esc + "_autoon_label'></span></input><span class='tooltiptext'>When checked, " + lights[i].name + " will turn on automatically around your chosen wakeup time.  Your lights will only turn on automatically if they have power and are accessible from the app. Always set a backup alarm when using this feature, as a precaution.</span></br></div></div>")
        document.getElementById(lightoptions).innerHTML = (document.getElementById(lightoptions).innerHTML + "<div style='display:none' id='autooffdiv_" + lightname_esc + "'><input class='level4element' type='checkbox' id='autooffcheckbox_" + lightname_esc + "'><div class='tooltip'>Evening Off <span id='" + lightname_esc + "_autooff_label'></span></input><span class='tooltiptext'>When checked, " + lights[i].name + " will turn off automatically around your chosen bedtime.  Consider setting only certain lights to turn off, leaving the others as nightlights</span></br></div></div>")
      }
      

      scheduler = setInterval(() => {
        lightchanger(huebridgeaddress, huebridgeusername);
        //console.log (scheduler);
      }, 3000); 
      document.getElementById("startdemobutton").disabled = true;
      document.getElementById("stopdemobutton").disabled = false;
    } else { alert ("The demo didn't start because your link button was not pressed or the demo was not able to establish secure communication with your Hue bridge. Make sure that you have a bridge (not just lights you control with Bluetooth) and that this device is connected to the same network as that bridge. Then press the link button on the top of the bridge, refresh this page, and restart the demo.")}
  } else {alert ("The demo can't find a Hue bridge on your network. Make sure that you actually have a Hue bridge (not just lights you control with Bluetooth) and that this device is connected to the same network as that bridge, and then refresh the page and restart the demo. This demo does not currently support controlling Hue lights remotely.");}
}

async function lightchanger (huebridgeaddress, huebridgeusername) {
  //alert ("lightchanger activated")
  var now = new Date(); //sets the variable now equal to the current date and time
  var hh = now.getHours(); //sets the variable hh equal to the number of hours that have passed since the day started.
  var hh_sixty = hh * 60; //sets the variable hh_sixty equal to the number of minutes in the day at the time of the last hour change.
  var mm = now.getMinutes(); //sets the variable mm equal to the number of minutes since the last hour
  var hm = hh_sixty + mm; //sets the variable hm equal to the total number of minutes that have passed since the day began.
  var wake_time = (document.getElementById("wake_time_var").value);
  var wake_time_hh = (wake_time.slice(0,2));
  var wake_time_hh_sixty = (wake_time_hh * 60);
  var wake_time_mm = wake_time.slice(-2);
  var wake_time_hm = (Number(wake_time_hh_sixty) + Number(wake_time_mm));
  var bed_time = (document.getElementById("bed_time_var").value);
  var bed_time_hh = (bed_time.slice(0,2));
  var bed_time_hh_sixty = (bed_time_hh * 60);
  var bed_time_mm = bed_time.slice(-2);
  var bed_time_hm = (Number(bed_time_hh_sixty) + Number(bed_time_mm));
  var wake_offset = (Number(document.getElementById("wake_offset_var").value));
  var bed_offset = (Number(document.getElementById("bed_offset_var").value));
  var rise_length_bright = (Number(document.getElementById("rise_length_bright_var").value));

  if (Number((document.getElementById("rise_length_bright_mult_var").value)) !== 0) {var rise_length_bright_var = ((document.getElementById("rise_length_bright_mult_var").value) + "x")} else {var rise_length_bright_var = (Number (document.getElementById("rise_length_bright_var").value))} 
  if (Number((document.getElementById("set_length_bright_mult_var").value)) !== 0) {var set_length_bright_var = ((document.getElementById("set_length_bright_mult_var").value) + "x")} else {var set_length_bright_var = (Number (document.getElementById("set_length_bright_var").value))}
  if (Number((document.getElementById("rise_length_whiteCCT_var").value)) == 0) {var rise_length_whiteCCT_var = ((document.getElementById("rise_length_whiteCCT_mult_var").value) + "x")} else {var rise_length_whiteCCT_var = (Number (document.getElementById("rise_length_whiteCCT_var").value))} 
  if (Number((document.getElementById("set_length_whiteCCT_var").value)) == 0) {var set_length_whiteCCT_var = ((document.getElementById("set_length_whiteCCT_mult_var").value) + "x")} else {var set_length_whiteCCT_var = (Number (document.getElementById("set_length_whiteCCT_var").value))}  
  if (Number((document.getElementById("rise_length_colorCCT_var").value)) == 0) {var rise_length_colorCCT_var = ((document.getElementById("rise_length_colorCCT_mult_var").value) + "x")} else {var rise_length_colorCCT_var = (Number (document.getElementById("rise_length_colorCCT_var").value))} 
  if (Number((document.getElementById("set_length_colorCCT_var").value)) == 0) {var set_length_colorCCT_var = ((document.getElementById("set_length_colorCCT_mult_var").value) + "x")} else {var set_length_colorCCT_var = (Number (document.getElementById("set_length_colorCCT_var").value))}  
  if (Number((document.getElementById("rise_length_scatdist_var").value)) == 0) {var rise_length_scatdist_var = ((document.getElementById("rise_length_scatdist_mult_var").value) + "x")} else {var rise_length_scatdist_var = (Number (document.getElementById("rise_length_scatdist_var").value))} 
  if (Number((document.getElementById("set_length_scatdist_var").value)) == 0) {var set_length_scatdist_var = ((document.getElementById("set_length_scatdist_mult_var").value) + "x")} else {var set_length_scatdist_var = (Number (document.getElementById("set_length_scatdist_var").value))}  
  if (Number((document.getElementById("rise_length_scatangshift_mult_var").value)) !== 0) {var rise_length_scatangshift_var = ((document.getElementById("rise_length_scatangshift_mult_var").value) + "x")} else {var rise_length_scatangshift_var = (Number (document.getElementById("rise_length_scatangshift_var").value))} 
  if (Number((document.getElementById("set_length_scatangshift_mult_var").value)) !== 0) {var set_length_scatangshift_var = ((document.getElementById("set_length_scatangshift_mult_var").value) + "x")} else {var set_length_scatangshift_var = (Number (document.getElementById("set_length_scatangshift_var").value))}
  if (Number((document.getElementById("rise_length_bright_yellow_mult_var").value)) !== 0) {var rise_length_bright_yellow_var = ((document.getElementById("rise_length_bright_yellow_mult_var").value) + "x")} else {var rise_length_bright_yellow_var = (Number (document.getElementById("rise_length_bright_yellow_var").value))} 
  if (Number((document.getElementById("set_length_bright_yellow_mult_var").value)) !== 0) {var set_length_bright_yellow_var = ((document.getElementById("set_length_bright_yellow_mult_var").value) + "x")} else {var set_length_bright_yellow_var = (Number (document.getElementById("set_length_bright_yellow_var").value))}
  if (Number((document.getElementById("rise_length_bright_blue_mult_var").value)) !== 0) {var rise_length_bright_blue_var = ((document.getElementById("rise_length_bright_blue_mult_var").value) + "x")} else {var rise_length_bright_blue_var = (Number (document.getElementById("rise_length_bright_blue_var").value))} 
  if (Number((document.getElementById("set_length_bright_blue_mult_var").value)) !== 0) {var set_length_bright_blue_var = ((document.getElementById("set_length_bright_blue_mult_var").value) + "x")} else {var set_length_bright_blue_var = (Number (document.getElementById("set_length_bright_blue_var").value))}
  if (document.getElementById('local').checked) {local_var = 1} else {local_var = 0}
  let lighting_parameters = TimeGiver({wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_whiteCCT: (Number (document.getElementById("max_whiteCCT_var").value)), min_whiteCCT: (Number (document.getElementById("min_whiteCCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_whiteCCT: rise_length_whiteCCT_var, set_length_whiteCCT: set_length_whiteCCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_whiteCCT: (Number (document.getElementById("rise_slope_whiteCCT_var").value)), set_slope_whiteCCT: (Number (document.getElementById("set_slope_whiteCCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value)), altitude: (Number (document.getElementById("alt_var").value)), azimuth: (Number (document.getElementById("az_var").value)), min_sun_rad: (Number (document.getElementById("min_sun_rad_var").value)), range_sun_rad: (Number (document.getElementById("range_sun_rad_var").value)), lat: (Number (document.getElementById("lat_var").value)), long: (Number (document.getElementById("long_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), localvalues: local_var, max_colorCCT: (Number (document.getElementById("max_colorCCT_var").value)), min_colorCCT: (Number (document.getElementById("min_colorCCT_var").value)), rise_length_colorCCT: rise_length_colorCCT_var, set_length_colorCCT: set_length_colorCCT_var, rise_slope_colorCCT: (Number (document.getElementById("rise_slope_colorCCT_var").value)), set_slope_colorCCT: (Number (document.getElementById("set_slope_colorCCT_var").value))})
  //console.log ("Scheduler is running!")

  if (wake_time_hm - wake_offset - bed_time_hm + bed_offset > 0 && wake_time_hm - wake_offset - hm > 0) {
    var hm = (hm + 1440);
    var bed_time_hm = (bed_time_hm + 1440);
    } else if (wake_time_hm - wake_offset - bed_time_hm + bed_offset > 0) {var bed_time_hm = (bed_time_hm + 1440)};
  
  //console.log (hm);
  //console.log (bed_time_hm);

  var bridge = await hue.bridge(huebridgeaddress);
  var user = await bridge.user(huebridgeusername);
  //console.log ("username is " + huebridgeusername)

  await user.getSensors()
        .then(function(result) {
          //console.log(result); // "initResolve"
          //console.log(result[1].state.on)
          return result;
        })
        .then(function(result) {
          //console.log(result); // "normalReturn"
        });

  switchesupdate = await user.getSensors(); 

  for (i in lights){
    lights[i].overrideactivated = false;
  }

  for (i in switchesupdate) {
    var sensorname = (switchesupdate[i].name);
    var sensorname_esc = (sensorname.replace(/\s+/g, ''));
    var sensorname_esc = (sensorname_esc.replace(/'/g, ''));
    var productname = switchesupdate[i].productname;
    var producttype = switchesupdate[i].type;
    var overridesensordiv = ("overridesensordiv_" + sensorname_esc)
    var overridecheckboxlist = ("overridecheckboxlist_" + sensorname_esc)
    var overridecheckboxchecked = ("#overridecheckbox_" + sensorname_esc + ":checked")
    if (productname) {
      var huedimmerswitch = productname.includes("Hue dimmer switch");
      var lutronaurora = productname.includes("Lutron Aurora");
      var producttypeincludes = producttype.includes("Rotary");
      if (producttypeincludes === true && lutronaurora === true) {
        //console.log (buttonevent)
        var j = (1 + Number(i))
        //console.log (switchesupdate[j].state.buttonevent)
        var rotaryupdateUTC = (Date.parse(switchesupdate[i].state.lastupdated));
        var buttonupdateUTC = (Date.parse(switchesupdate[j].state.lastupdated));
        var timeoffset = now.getTimezoneOffset();
        var nowUTC = (Date.parse(now) + (timeoffset*60*1000));
        var timesincerotaryupdate = (nowUTC - rotaryupdateUTC)
        var timesincebuttonupdate = (nowUTC - buttonupdateUTC)
        for (i in lights){
          var lightname = (lights[i].name);
          var lightname_esc = (lightname.replace(/\s+/g, ''))
          var lightname_esc = (lightname_esc.replace(/'/g, ''))
          var overridelightcheckboxchecked = ("#overridesensordiv_" + sensorname_esc + "_lightcheckbox_" + lightname_esc + ":checked")
          if (timesincerotaryupdate < timesincebuttonupdate && timesincerotaryupdate <3600000 && (document.querySelector(overridelightcheckboxchecked)) !== null && (document.querySelector(overridecheckboxchecked)) !== null) {
            //console.log ("override activated");
            lights[i].overrideactivated = true;
            //console.log (lights[i].overrideactivated)
          } //else if (buttonevent > 3999 || buttonevent < 1900 || timesincebuttonupdate >3600000 || (document.querySelector(overridecheckboxchecked)) === null){console.log ("Override not activated"); lights[i].overrideactivated = null; }
        }
      }

      if (huedimmerswitch === true) {
        var buttonevent = switchesupdate[i].state.buttonevent;
        //console.log (buttonevent)
        var buttonupdateUTC = (Date.parse(switchesupdate[i].state.lastupdated));
        var timeoffset = now.getTimezoneOffset();
        var nowUTC = (Date.parse(now) + (timeoffset*60*1000));
        var timesincebuttonupdate = (nowUTC - buttonupdateUTC)
        for (i in lights){
          var lightname = (lights[i].name);
          var lightname_esc = (lightname.replace(/\s+/g, ''))
          var lightname_esc = (lightname_esc.replace(/'/g, ''))
          var overridelightcheckboxchecked = ("#overridesensordiv_" + sensorname_esc + "_lightcheckbox_" + lightname_esc + ":checked")
          if (buttonevent < 3999 && buttonevent > 1900 && timesincebuttonupdate <3600000 && (document.querySelector(overridelightcheckboxchecked)) !== null && (document.querySelector(overridecheckboxchecked)) !== null) {
            //console.log ("override activated");
            lights[i].overrideactivated = true;
            //console.log (lights[i].overrideactivated)
          } //else if (buttonevent > 3999 || buttonevent < 1900 || timesincebuttonupdate >3600000 || (document.querySelector(overridecheckboxchecked)) === null){console.log ("Override not activated"); lights[i].overrideactivated = null; }
        }
      }
    }
  }

  var transtime = ((Number((document.getElementById("transtime_var").value))) * 10);
  //console.log (transtime);

  for (i in lights) {
    var lightname = (lights[i].name);
    var lightname_esc = (lightname.replace(/\s+/g, ''));
    var lightname_esc = (lightname_esc.replace(/'/g, ''));
    var autooncheckboxchecked = ("#autooncheckbox_" + lightname_esc + ":checked");
    var autooncheckbox = ("autooncheckbox_" + lightname_esc);
    var autooffcheckboxchecked = ("#autooffcheckbox_" + lightname_esc + ":checked");
    var autooffcheckbox = ("autooffcheckbox_" + lightname_esc);
    var whitecheckbox = ("whitelightcheckbox_" + lightname_esc);
    var whitecheckboxchecked = ("#whitelightcheckbox_" + lightname_esc + ":checked");
    var bluecheckboxchecked = ("#bluelightcheckbox_" + lightname_esc + ":checked");
    var bluecheckbox = ("bluelightcheckbox_" + lightname_esc);
    var yellowcheckboxchecked = ("#yellowlightcheckbox_" + lightname_esc + ":checked");
    var yellowcheckbox = ("yellowlightcheckbox_" + lightname_esc);
    var combcheckboxchecked = ("#comblightcheckbox_" + lightname_esc + ":checked");
    var combcheckbox = ("comblightcheckbox_" + lightname_esc);
    var override = lights[i].overrideactivated;
    //console.log (override)
    if (override === true) {console.log ("override activated");} else {
      if ((document.querySelector(autooncheckboxchecked)) !== null && (hm - (wake_time_hm - wake_offset)) < 20 && (hm - (wake_time_hm - wake_offset)) > 0) {
        //console.log ("autoon activated for: " + lightname_esc)
          if (document.querySelector(bluecheckboxchecked) !== null){
            let lighting_parameters = TimeGiver({wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_whiteCCT: (Number (document.getElementById("max_whiteCCT_var").value)), min_whiteCCT: (Number (document.getElementById("min_whiteCCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_whiteCCT: rise_length_whiteCCT_var, set_length_whiteCCT: set_length_whiteCCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_whiteCCT: (Number (document.getElementById("rise_slope_whiteCCT_var").value)), set_slope_whiteCCT: (Number (document.getElementById("set_slope_whiteCCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value)), altitude: (Number (document.getElementById(lightname_esc + "_bluealt_var").value)), azimuth: (Number (document.getElementById(lightname_esc + "_blueaz_var").value)), min_sun_rad: (Number (document.getElementById("min_sun_rad_var").value)), range_sun_rad: (Number (document.getElementById("range_sun_rad_var").value)), lat: (Number (document.getElementById("lat_var").value)), long: (Number (document.getElementById("long_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), localvalues: local_var, max_colorCCT: (Number (document.getElementById("max_colorCCT_var").value)), min_colorCCT: (Number (document.getElementById("min_colorCCT_var").value)), rise_length_colorCCT: rise_length_colorCCT_var, set_length_colorCCT: set_length_colorCCT_var, rise_slope_colorCCT: (Number (document.getElementById("rise_slope_colorCCT_var").value)), set_slope_colorCCT: (Number (document.getElementById("set_slope_colorCCT_var").value))})
            if ((hm - (wake_time_hm - wake_offset + (lighting_parameters.sun_dist_ret/10))) < 10 && (hm - (wake_time_hm - wake_offset + (lighting_parameters.sun_dist_ret/10))) > 0) {
            user.setLightState(i, {on: true, bri: lighting_parameters.bright_blue_int_ret, xy:[lighting_parameters.blue_x_shifted_ret,lighting_parameters.blue_y_shifted_ret], transitiontime: 500}).then(data => {})
            document.getElementById(yellowcheckbox).checked = false
            document.getElementById(combcheckbox).checked = false
            document.getElementById(whitecheckbox).checked = false
          
          }}
          if (document.querySelector(yellowcheckboxchecked) !== null){
            let lighting_parameters = TimeGiver({wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_whiteCCT: (Number (document.getElementById("max_whiteCCT_var").value)), min_whiteCCT: (Number (document.getElementById("min_whiteCCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_whiteCCT: rise_length_whiteCCT_var, set_length_whiteCCT: set_length_whiteCCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_whiteCCT: (Number (document.getElementById("rise_slope_whiteCCT_var").value)), set_slope_whiteCCT: (Number (document.getElementById("set_slope_whiteCCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value)), altitude: (Number (document.getElementById(lightname_esc + "_yellowalt_var").value)), azimuth: (Number (document.getElementById(lightname_esc + "_yellowaz_var").value)), min_sun_rad: (Number (document.getElementById("min_sun_rad_var").value)), range_sun_rad: (Number (document.getElementById("range_sun_rad_var").value)), lat: (Number (document.getElementById("lat_var").value)), long: (Number (document.getElementById("long_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), localvalues: local_var, max_colorCCT: (Number (document.getElementById("max_colorCCT_var").value)), min_colorCCT: (Number (document.getElementById("min_colorCCT_var").value)), rise_length_colorCCT: rise_length_colorCCT_var, set_length_colorCCT: set_length_colorCCT_var, rise_slope_colorCCT: (Number (document.getElementById("rise_slope_colorCCT_var").value)), set_slope_colorCCT: (Number (document.getElementById("set_slope_colorCCT_var").value))})
            if ((hm - (wake_time_hm - wake_offset + (lighting_parameters.sun_dist_ret/10))) < 10 && (hm - (wake_time_hm - wake_offset + (lighting_parameters.sun_dist_ret/10))) > 0) {
            user.setLightState(i, {on: true, bri: lighting_parameters.bright_yellow_int_ret, xy:[lighting_parameters.yellow_x_shifted_ret,lighting_parameters.yellow_y_shifted_ret], transitiontime: 500}).then(data => {})
            document.getElementById(bluecheckbox).checked = false
            document.getElementById(combcheckbox).checked = false
            document.getElementById(whitecheckbox).checked = false
          }}
          if (document.querySelector(combcheckboxchecked) !== null){
            let lighting_parameters = TimeGiver({wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_whiteCCT: (Number (document.getElementById("max_whiteCCT_var").value)), min_whiteCCT: (Number (document.getElementById("min_whiteCCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_whiteCCT: rise_length_whiteCCT_var, set_length_whiteCCT: set_length_whiteCCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_whiteCCT: (Number (document.getElementById("rise_slope_whiteCCT_var").value)), set_slope_whiteCCT: (Number (document.getElementById("set_slope_whiteCCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value)), altitude: (Number (document.getElementById(lightname_esc + "_combalt_var").value)), azimuth: (Number (document.getElementById(lightname_esc + "_combaz_var").value)), min_sun_rad: (Number (document.getElementById("min_sun_rad_var").value)), range_sun_rad: (Number (document.getElementById("range_sun_rad_var").value)), lat: (Number (document.getElementById("lat_var").value)), long: (Number (document.getElementById("long_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), localvalues: local_var, max_colorCCT: (Number (document.getElementById("max_colorCCT_var").value)), min_colorCCT: (Number (document.getElementById("min_colorCCT_var").value)), rise_length_colorCCT: rise_length_colorCCT_var, set_length_colorCCT: set_length_colorCCT_var, rise_slope_colorCCT: (Number (document.getElementById("rise_slope_colorCCT_var").value)), set_slope_colorCCT: (Number (document.getElementById("set_slope_colorCCT_var").value))})
            if ((hm - (wake_time_hm - wake_offset + (lighting_parameters.sun_dist_ret/10))) < 10 && (hm - (wake_time_hm - wake_offset + (lighting_parameters.sun_dist_ret/10))) > 0) {
            user.setLightState(i, {on: true, bri: lighting_parameters.bright_comb_int_ret, xy:[lighting_parameters.comb_x_shifted_ret,lighting_parameters.comb_y_shifted_ret], transitiontime: 500}).then(data => {})
            document.getElementById(yellowcheckbox).checked = false
            document.getElementById(bluecheckbox).checked = false
            document.getElementById(whitecheckbox).checked = false
          }}
          if (document.querySelector(whitecheckboxchecked) !== null){
            if ((hm - (wake_time_hm - wake_offset + (lighting_parameters.sun_dist_ret/10))) < 10 && (hm - (wake_time_hm - wake_offset + (lighting_parameters.sun_dist_ret/10))) > 0) {
            if (lighting_parameters.CCT_mired_int_ret > 454 || lighting_parameters.CCT_mired_int_ret < 154) {
              user.setLightState(i, {on: true, bri: lighting_parameters.bright_int_ret, ct: lighting_parameters.CCT_mired_int_ret, xy:[lighting_parameters.white_x_ret,lighting_parameters.white_y_ret], transitiontime: 500}).then(data => {})
            } else {
              user.setLightState(i, {on: true, bri: lighting_parameters.bright_int_ret, ct: lighting_parameters.CCT_mired_int_ret, transitiontime: transtime}).then(data => {})
            }
          }}
      } else if ((document.querySelector(autooffcheckboxchecked)) !== null && (hm - (bed_time_hm - bed_offset)) < 20 && (hm - (bed_time_hm - bed_offset)) > 0) {

        console.log ("autooff activated for: " + lightname_esc)
          if (document.querySelector(bluecheckboxchecked) !== null){
            let lighting_parameters = TimeGiver({wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_whiteCCT: (Number (document.getElementById("max_whiteCCT_var").value)), min_whiteCCT: (Number (document.getElementById("min_whiteCCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_whiteCCT: rise_length_whiteCCT_var, set_length_whiteCCT: set_length_whiteCCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_whiteCCT: (Number (document.getElementById("rise_slope_whiteCCT_var").value)), set_slope_whiteCCT: (Number (document.getElementById("set_slope_whiteCCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value)), altitude: (Number (document.getElementById(lightname_esc + "_bluealt_var").value)), azimuth: (Number (document.getElementById(lightname_esc + "_blueaz_var").value)), min_sun_rad: (Number (document.getElementById("min_sun_rad_var").value)), range_sun_rad: (Number (document.getElementById("range_sun_rad_var").value)), lat: (Number (document.getElementById("lat_var").value)), long: (Number (document.getElementById("long_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), localvalues: local_var, max_colorCCT: (Number (document.getElementById("max_colorCCT_var").value)), min_colorCCT: (Number (document.getElementById("min_colorCCT_var").value)), rise_length_colorCCT: rise_length_colorCCT_var, set_length_colorCCT: set_length_colorCCT_var, rise_slope_colorCCT: (Number (document.getElementById("rise_slope_colorCCT_var").value)), set_slope_colorCCT: (Number (document.getElementById("set_slope_colorCCT_var").value))})
            if ((hm - (bed_time_hm - bed_offset + (lighting_parameters.sun_dist_ret/10))) < 10 && (hm - (bed_time_hm - bed_offset + ((180-lighting_parameters.sun_dist_ret)/10))) > 0) {
            user.setLightState(i, {on: false, bri: lighting_parameters.bright_blue_int_ret, xy:[lighting_parameters.blue_x_shifted_ret,lighting_parameters.blue_y_shifted_ret], transitiontime: 500}).then(data => {})
            document.getElementById(yellowcheckbox).checked = false
            document.getElementById(combcheckbox).checked = false
            document.getElementById(whitecheckbox).checked = false
            console.log("Auto-off is working")
          }}
          if (document.querySelector(yellowcheckboxchecked) !== null){
            let lighting_parameters = TimeGiver({wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_whiteCCT: (Number (document.getElementById("max_whiteCCT_var").value)), min_whiteCCT: (Number (document.getElementById("min_whiteCCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_whiteCCT: rise_length_whiteCCT_var, set_length_whiteCCT: set_length_whiteCCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_whiteCCT: (Number (document.getElementById("rise_slope_whiteCCT_var").value)), set_slope_whiteCCT: (Number (document.getElementById("set_slope_whiteCCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value)), altitude: (Number (document.getElementById(lightname_esc + "_yellowalt_var").value)), azimuth: (Number (document.getElementById(lightname_esc + "_yellowaz_var").value)), min_sun_rad: (Number (document.getElementById("min_sun_rad_var").value)), range_sun_rad: (Number (document.getElementById("range_sun_rad_var").value)), lat: (Number (document.getElementById("lat_var").value)), long: (Number (document.getElementById("long_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), localvalues: local_var, max_colorCCT: (Number (document.getElementById("max_colorCCT_var").value)), min_colorCCT: (Number (document.getElementById("min_colorCCT_var").value)), rise_length_colorCCT: rise_length_colorCCT_var, set_length_colorCCT: set_length_colorCCT_var, rise_slope_colorCCT: (Number (document.getElementById("rise_slope_colorCCT_var").value)), set_slope_colorCCT: (Number (document.getElementById("set_slope_colorCCT_var").value))})
            if ((hm - (bed_time_hm - bed_offset + (lighting_parameters.sun_dist_ret/10))) < 10 && (hm - (bed_time_hm - bed_offset + ((180-lighting_parameters.sun_dist_ret)/10))) > 0) {
            user.setLightState(i, {on: false, bri: lighting_parameters.bright_yellow_int_ret, xy:[lighting_parameters.yellow_x_shifted_ret,lighting_parameters.yellow_y_shifted_ret], transitiontime: 500}).then(data => {})
            document.getElementById(bluecheckbox).checked = false
            document.getElementById(combcheckbox).checked = false
            document.getElementById(whitecheckbox).checked = false
          }}
          if (document.querySelector(combcheckboxchecked) !== null){
            let lighting_parameters = TimeGiver({wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_whiteCCT: (Number (document.getElementById("max_whiteCCT_var").value)), min_whiteCCT: (Number (document.getElementById("min_whiteCCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_whiteCCT: rise_length_whiteCCT_var, set_length_whiteCCT: set_length_whiteCCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_whiteCCT: (Number (document.getElementById("rise_slope_whiteCCT_var").value)), set_slope_whiteCCT: (Number (document.getElementById("set_slope_whiteCCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value)), altitude: (Number (document.getElementById(lightname_esc + "_combalt_var").value)), azimuth: (Number (document.getElementById(lightname_esc + "_combaz_var").value)), min_sun_rad: (Number (document.getElementById("min_sun_rad_var").value)), range_sun_rad: (Number (document.getElementById("range_sun_rad_var").value)), lat: (Number (document.getElementById("lat_var").value)), long: (Number (document.getElementById("long_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), localvalues: local_var, max_colorCCT: (Number (document.getElementById("max_colorCCT_var").value)), min_colorCCT: (Number (document.getElementById("min_colorCCT_var").value)), rise_length_colorCCT: rise_length_colorCCT_var, set_length_colorCCT: set_length_colorCCT_var, rise_slope_colorCCT: (Number (document.getElementById("rise_slope_colorCCT_var").value)), set_slope_colorCCT: (Number (document.getElementById("set_slope_colorCCT_var").value))})
            if ((hm - (bed_time_hm - bed_offset + (lighting_parameters.sun_dist_ret/10))) < 10 && (hm - (bed_time_hm - bed_offset + ((180-lighting_parameters.sun_dist_ret)/10))) > 0) {
            user.setLightState(i, {on: false, bri: lighting_parameters.bright_comb_int_ret, xy:[lighting_parameters.comb_x_shifted_ret,lighting_parameters.comb_y_shifted_ret], transitiontime: 500}).then(data => {})
            document.getElementById(yellowcheckbox).checked = false
            document.getElementById(bluecheckbox).checked = false
            document.getElementById(whitecheckbox).checked = false
          }}
          if (document.querySelector(whitecheckboxchecked) !== null){
            if ((hm - (bed_time_hm - bed_offset + (lighting_parameters.sun_dist_ret/10))) < 10 && (hm - (bed_time_hm - bed_offset + ((180-lighting_parameters.sun_dist_ret)/10))) > 0) {
            if (lighting_parameters.CCT_mired_int_ret > 454 || lighting_parameters.CCT_mired_int_ret < 154) {
              user.setLightState(i, {on: false, bri: lighting_parameters.bright_int_ret, ct: lighting_parameters.CCT_mired_int_ret, xy:[lighting_parameters.white_x_ret,lighting_parameters.white_y_ret], transitiontime: 500}).then(data => {})
            } else {
              user.setLightState(i, {on: false, bri: lighting_parameters.bright_int_ret, ct: lighting_parameters.CCT_mired_int_ret, transitiontime: transtime}).then(data => {})
            }
          }}
      } else if ((hm - (wake_time_hm - wake_offset)) < rise_length_bright && (hm - (wake_time_hm - wake_offset)) > 0) {
        //console.log ("autoon activated for: " + lightname_esc)
          if (document.querySelector(bluecheckboxchecked) !== null){
            let lighting_parameters = TimeGiver({wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_whiteCCT: (Number (document.getElementById("max_whiteCCT_var").value)), min_whiteCCT: (Number (document.getElementById("min_whiteCCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_whiteCCT: rise_length_whiteCCT_var, set_length_whiteCCT: set_length_whiteCCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_whiteCCT: (Number (document.getElementById("rise_slope_whiteCCT_var").value)), set_slope_whiteCCT: (Number (document.getElementById("set_slope_whiteCCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value)), altitude: (Number (document.getElementById(lightname_esc + "_bluealt_var").value)), azimuth: (Number (document.getElementById(lightname_esc + "_blueaz_var").value)), min_sun_rad: (Number (document.getElementById("min_sun_rad_var").value)), range_sun_rad: (Number (document.getElementById("range_sun_rad_var").value)), lat: (Number (document.getElementById("lat_var").value)), long: (Number (document.getElementById("long_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), localvalues: local_var, max_colorCCT: (Number (document.getElementById("max_colorCCT_var").value)), min_colorCCT: (Number (document.getElementById("min_colorCCT_var").value)), rise_length_colorCCT: rise_length_colorCCT_var, set_length_colorCCT: set_length_colorCCT_var, rise_slope_colorCCT: (Number (document.getElementById("rise_slope_colorCCT_var").value)), set_slope_colorCCT: (Number (document.getElementById("set_slope_colorCCT_var").value))})
            user.setLightState(i, {bri: lighting_parameters.bright_blue_int_ret, xy:[lighting_parameters.blue_x_shifted_ret,lighting_parameters.blue_y_shifted_ret], transitiontime: 500}).then(data => {})
            document.getElementById(yellowcheckbox).checked = false
            document.getElementById(whitecheckbox).checked = false
            document.getElementById(combcheckbox).checked = false
          }
          if (document.querySelector(yellowcheckboxchecked) !== null){
            let lighting_parameters = TimeGiver({wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_whiteCCT: (Number (document.getElementById("max_whiteCCT_var").value)), min_whiteCCT: (Number (document.getElementById("min_whiteCCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_whiteCCT: rise_length_whiteCCT_var, set_length_whiteCCT: set_length_whiteCCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_whiteCCT: (Number (document.getElementById("rise_slope_whiteCCT_var").value)), set_slope_whiteCCT: (Number (document.getElementById("set_slope_whiteCCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value)), altitude: (Number (document.getElementById(lightname_esc + "_yellowalt_var").value)), azimuth: (Number (document.getElementById(lightname_esc + "_yellowaz_var").value)), min_sun_rad: (Number (document.getElementById("min_sun_rad_var").value)), range_sun_rad: (Number (document.getElementById("range_sun_rad_var").value)), lat: (Number (document.getElementById("lat_var").value)), long: (Number (document.getElementById("long_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), localvalues: local_var, max_colorCCT: (Number (document.getElementById("max_colorCCT_var").value)), min_colorCCT: (Number (document.getElementById("min_colorCCT_var").value)), rise_length_colorCCT: rise_length_colorCCT_var, set_length_colorCCT: set_length_colorCCT_var, rise_slope_colorCCT: (Number (document.getElementById("rise_slope_colorCCT_var").value)), set_slope_colorCCT: (Number (document.getElementById("set_slope_colorCCT_var").value))})
            user.setLightState(i, {bri: lighting_parameters.bright_yellow_int_ret, xy:[lighting_parameters.yellow_x_shifted_ret,lighting_parameters.yellow_y_shifted_ret], transitiontime: 500}).then(data => {})
            document.getElementById(bluecheckbox).checked = false
            document.getElementById(whitecheckbox).checked = false
            document.getElementById(combcheckbox).checked = false
          }
          if (document.querySelector(combcheckboxchecked) !== null){
            let lighting_parameters = TimeGiver({wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_whiteCCT: (Number (document.getElementById("max_whiteCCT_var").value)), min_whiteCCT: (Number (document.getElementById("min_whiteCCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_whiteCCT: rise_length_whiteCCT_var, set_length_whiteCCT: set_length_whiteCCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_whiteCCT: (Number (document.getElementById("rise_slope_whiteCCT_var").value)), set_slope_whiteCCT: (Number (document.getElementById("set_slope_whiteCCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value)), altitude: (Number (document.getElementById(lightname_esc + "_combalt_var").value)), azimuth: (Number (document.getElementById(lightname_esc + "_combaz_var").value)), min_sun_rad: (Number (document.getElementById("min_sun_rad_var").value)), range_sun_rad: (Number (document.getElementById("range_sun_rad_var").value)), lat: (Number (document.getElementById("lat_var").value)), long: (Number (document.getElementById("long_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), localvalues: local_var, max_colorCCT: (Number (document.getElementById("max_colorCCT_var").value)), min_colorCCT: (Number (document.getElementById("min_colorCCT_var").value)), rise_length_colorCCT: rise_length_colorCCT_var, set_length_colorCCT: set_length_colorCCT_var, rise_slope_colorCCT: (Number (document.getElementById("rise_slope_colorCCT_var").value)), set_slope_colorCCT: (Number (document.getElementById("set_slope_colorCCT_var").value))})
            user.setLightState(i, {bri: lighting_parameters.bright_comb_int_ret, xy:[lighting_parameters.comb_x_shifted_ret,lighting_parameters.comb_y_shifted_ret], transitiontime: 500}).then(data => {})
            document.getElementById(yellowcheckbox).checked = false
            document.getElementById(whitecheckbox).checked = false
            document.getElementById(bluecheckbox).checked = false
          }
          if (document.querySelector(whitecheckboxchecked) !== null){
            if (lighting_parameters.CCT_mired_int_ret > 454 || lighting_parameters.CCT_mired_int_ret < 154) {
              user.setLightState(i, {bri: lighting_parameters.bright_int_ret, ct: lighting_parameters.CCT_mired_int_ret, xy:[lighting_parameters.white_x_ret,lighting_parameters.white_y_ret], transitiontime: 500}).then(data => {})
            } else {
              user.setLightState(i, {bri: lighting_parameters.bright_int_ret, ct: lighting_parameters.CCT_mired_int_ret, transitiontime: 300}).then(data => {})
            }
          }
      } else {
        //console.log ("autoon not activated")
          if (document.querySelector(bluecheckboxchecked) !== null){
            let lighting_parameters = TimeGiver({wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_whiteCCT: (Number (document.getElementById("max_whiteCCT_var").value)), min_whiteCCT: (Number (document.getElementById("min_whiteCCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_whiteCCT: rise_length_whiteCCT_var, set_length_whiteCCT: set_length_whiteCCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_whiteCCT: (Number (document.getElementById("rise_slope_whiteCCT_var").value)), set_slope_whiteCCT: (Number (document.getElementById("set_slope_whiteCCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value)), altitude: (Number (document.getElementById(lightname_esc + "_bluealt_var").value)), azimuth: (Number (document.getElementById(lightname_esc + "_blueaz_var").value)), min_sun_rad: (Number (document.getElementById("min_sun_rad_var").value)), range_sun_rad: (Number (document.getElementById("range_sun_rad_var").value)), lat: (Number (document.getElementById("lat_var").value)), long: (Number (document.getElementById("long_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), localvalues: local_var, max_colorCCT: (Number (document.getElementById("max_colorCCT_var").value)), min_colorCCT: (Number (document.getElementById("min_colorCCT_var").value)), rise_length_colorCCT: rise_length_colorCCT_var, set_length_colorCCT: set_length_colorCCT_var, rise_slope_colorCCT: (Number (document.getElementById("rise_slope_colorCCT_var").value)), set_slope_colorCCT: (Number (document.getElementById("set_slope_colorCCT_var").value))})
            //if (lighting_parameters.bright_blue_int_ret < 5) {user.setLightState(i, {on: false, transitiontime: 30}).then(data => {})} else {
            user.setLightState(i, {bri: lighting_parameters.bright_blue_int_ret, xy:[lighting_parameters.blue_x_shifted_ret,lighting_parameters.blue_y_shifted_ret], transitiontime: transtime}).then(data => {})
            document.getElementById(yellowcheckbox).checked = false
            document.getElementById(whitecheckbox).checked = false
            document.getElementById(combcheckbox).checked = false
          }
          if (document.querySelector(yellowcheckboxchecked) !== null){
            let lighting_parameters = TimeGiver({wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_whiteCCT: (Number (document.getElementById("max_whiteCCT_var").value)), min_whiteCCT: (Number (document.getElementById("min_whiteCCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_whiteCCT: rise_length_whiteCCT_var, set_length_whiteCCT: set_length_whiteCCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_whiteCCT: (Number (document.getElementById("rise_slope_whiteCCT_var").value)), set_slope_whiteCCT: (Number (document.getElementById("set_slope_whiteCCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value)), altitude: (Number (document.getElementById(lightname_esc + "_yellowalt_var").value)), azimuth: (Number (document.getElementById(lightname_esc + "_yellowaz_var").value)), min_sun_rad: (Number (document.getElementById("min_sun_rad_var").value)), range_sun_rad: (Number (document.getElementById("range_sun_rad_var").value)), lat: (Number (document.getElementById("lat_var").value)), long: (Number (document.getElementById("long_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), localvalues: local_var, max_colorCCT: (Number (document.getElementById("max_colorCCT_var").value)), min_colorCCT: (Number (document.getElementById("min_colorCCT_var").value)), rise_length_colorCCT: rise_length_colorCCT_var, set_length_colorCCT: set_length_colorCCT_var, rise_slope_colorCCT: (Number (document.getElementById("rise_slope_colorCCT_var").value)), set_slope_colorCCT: (Number (document.getElementById("set_slope_colorCCT_var").value))})
            //if (lighting_parameters.bright_yellow_int_ret < 5) {user.setLightState(i, {on: false, transitiontime: 30}).then(data => {})} else {
            user.setLightState(i, {bri: lighting_parameters.bright_yellow_int_ret, xy:[lighting_parameters.yellow_x_shifted_ret,lighting_parameters.yellow_y_shifted_ret], transitiontime: transtime}).then(data => {})
            document.getElementById(bluecheckbox).checked = false
            document.getElementById(whitecheckbox).checked = false
            document.getElementById(combcheckbox).checked = false
            console.log (lighting_parameters.yellow_x_shifted_ret)
          }
          if (document.querySelector(combcheckboxchecked) !== null){
            let lighting_parameters = TimeGiver({wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_whiteCCT: (Number (document.getElementById("max_whiteCCT_var").value)), min_whiteCCT: (Number (document.getElementById("min_whiteCCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_whiteCCT: rise_length_whiteCCT_var, set_length_whiteCCT: set_length_whiteCCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_whiteCCT: (Number (document.getElementById("rise_slope_whiteCCT_var").value)), set_slope_whiteCCT: (Number (document.getElementById("set_slope_whiteCCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value)), altitude: (Number (document.getElementById(lightname_esc + "_combalt_var").value)), azimuth: (Number (document.getElementById(lightname_esc + "_combaz_var").value)), min_sun_rad: (Number (document.getElementById("min_sun_rad_var").value)), range_sun_rad: (Number (document.getElementById("range_sun_rad_var").value)), lat: (Number (document.getElementById("lat_var").value)), long: (Number (document.getElementById("long_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), localvalues: local_var, max_colorCCT: (Number (document.getElementById("max_colorCCT_var").value)), min_colorCCT: (Number (document.getElementById("min_colorCCT_var").value)), rise_length_colorCCT: rise_length_colorCCT_var, set_length_colorCCT: set_length_colorCCT_var, rise_slope_colorCCT: (Number (document.getElementById("rise_slope_colorCCT_var").value)), set_slope_colorCCT: (Number (document.getElementById("set_slope_colorCCT_var").value))})
            //if (lighting_parameters.bright_blue_int_ret < 5) {user.setLightState(i, {on: false, transitiontime: 30}).then(data => {})} else {
            user.setLightState(i, {bri: lighting_parameters.bright_comb_int_ret, xy:[lighting_parameters.comb_x_shifted_ret,lighting_parameters.comb_y_shifted_ret], transitiontime: transtime}).then(data => {})
            document.getElementById(yellowcheckbox).checked = false
            document.getElementById(whitecheckbox).checked = false
            document.getElementById(bluecheckbox).checked = false
          }
          if (document.querySelector(whitecheckboxchecked) !== null){
            if (lighting_parameters.CCT_mired_int_ret > 454 || lighting_parameters.CCT_mired_int_ret < 154) {
              //if (lighting_parameters.bright_int_ret < 5) {user.setLightState(i, {on: false, transitiontime: 30}).then(data => {})} else {
              user.setLightState(i, {bri: lighting_parameters.bright_int_ret, ct: lighting_parameters.CCT_mired_int_ret, xy:[lighting_parameters.white_x_ret,lighting_parameters.white_y_ret], transitiontime: transtime}).then(data => {})
            } else {
              //if (lighting_parameters.bright_int_ret < 5) {user.setLightState(i, {on: false, transitiontime: 30}).then(data => {})} else {
              user.setLightState(i, {bri: lighting_parameters.bright_int_ret, ct: lighting_parameters.CCT_mired_int_ret, transitiontime: transtime}).then(data => {})
            }
          }
      }
    }
  }
  var myMusic= document.getElementById("soundeffect");
  myMusic.play();
}

function blueyellowlinedrawer ({time}) {
    var wake_time = (document.getElementById("wake_time_var").value);
    var wake_time_hh = (wake_time.slice(0,2));
    var wake_time_hh_sixty = (wake_time_hh * 60);
    var wake_time_mm = wake_time.slice(-2);
    var wake_time_hm = (Number(wake_time_hh_sixty) + Number(wake_time_mm));
    var bed_time = (document.getElementById("bed_time_var").value);
    var bed_time_hh = (bed_time.slice(0,2));
    var bed_time_hh_sixty = (bed_time_hh * 60);
    var bed_time_mm = bed_time.slice(-2);
    var bed_time_hm = (Number(bed_time_hh_sixty) + Number(bed_time_mm));
    var simulated_time = (document.getElementById("simulated_time_var").value);
    var simulated_time_hh = (simulated_time.slice(0,2));
    var simulated_time_hh_sixty = (simulated_time_hh * 60);
    var simulated_time_mm = simulated_time.slice(-2);
    var simulated_time_hm = (Number(simulated_time_hh_sixty) + Number(simulated_time_mm));
    if (Number((document.getElementById("rise_length_bright_mult_var").value)) !== 0) {var rise_length_bright_var = ((document.getElementById("rise_length_bright_mult_var").value) + "x")} else {var rise_length_bright_var = (Number (document.getElementById("rise_length_bright_var").value))} 
    if (Number((document.getElementById("set_length_bright_mult_var").value)) !== 0) {var set_length_bright_var = ((document.getElementById("set_length_bright_mult_var").value) + "x")} else {var set_length_bright_var = (Number (document.getElementById("set_length_bright_var").value))}
    if (Number((document.getElementById("rise_length_whiteCCT_var").value)) == 0) {var rise_length_whiteCCT_var = ((document.getElementById("rise_length_whiteCCT_mult_var").value) + "x")} else {var rise_length_whiteCCT_var = (Number (document.getElementById("rise_length_whiteCCT_var").value))} 
    if (Number((document.getElementById("set_length_whiteCCT_var").value)) == 0) {var set_length_whiteCCT_var = ((document.getElementById("set_length_whiteCCT_mult_var").value) + "x")} else {var set_length_whiteCCT_var = (Number (document.getElementById("set_length_whiteCCT_var").value))} 
    if (Number((document.getElementById("rise_length_colorCCT_var").value)) == 0) {var rise_length_colorCCT_var = ((document.getElementById("rise_length_colorCCT_mult_var").value) + "x")} else {var rise_length_colorCCT_var = (Number (document.getElementById("rise_length_colorCCT_var").value))} 
    if (Number((document.getElementById("set_length_colorCCT_var").value)) == 0) {var set_length_colorCCT_var = ((document.getElementById("set_length_colorCCT_mult_var").value) + "x")} else {var set_length_colorCCT_var = (Number (document.getElementById("set_length_colorCCT_var").value))}   
    if (Number((document.getElementById("rise_length_scatdist_var").value)) == 0) {var rise_length_scatdist_var = ((document.getElementById("rise_length_scatdist_mult_var").value) + "x")} else {var rise_length_scatdist_var = (Number (document.getElementById("rise_length_scatdist_var").value))} 
    if (Number((document.getElementById("set_length_scatdist_var").value)) == 0) {var set_length_scatdist_var = ((document.getElementById("set_length_scatdist_mult_var").value) + "x")} else {var set_length_scatdist_var = (Number (document.getElementById("set_length_scatdist_var").value))}  
    if (Number((document.getElementById("rise_length_scatangshift_mult_var").value)) !== 0) {var rise_length_scatangshift_var = ((document.getElementById("rise_length_scatangshift_mult_var").value) + "x")} else {var rise_length_scatangshift_var = (Number (document.getElementById("rise_length_scatangshift_var").value))} 
    if (Number((document.getElementById("set_length_scatangshift_mult_var").value)) !== 0) {var set_length_scatangshift_var = ((document.getElementById("set_length_scatangshift_mult_var").value) + "x")} else {var set_length_scatangshift_var = (Number (document.getElementById("set_length_scatangshift_var").value))}
    if (Number((document.getElementById("rise_length_bright_yellow_mult_var").value)) !== 0) {var rise_length_bright_yellow_var = ((document.getElementById("rise_length_bright_yellow_mult_var").value) + "x")} else {var rise_length_bright_yellow_var = (Number (document.getElementById("rise_length_bright_yellow_var").value))} 
    if (Number((document.getElementById("set_length_bright_yellow_mult_var").value)) !== 0) {var set_length_bright_yellow_var = ((document.getElementById("set_length_bright_yellow_mult_var").value) + "x")} else {var set_length_bright_yellow_var = (Number (document.getElementById("set_length_bright_yellow_var").value))}
    if (Number((document.getElementById("rise_length_bright_blue_mult_var").value)) !== 0) {var rise_length_bright_blue_var = ((document.getElementById("rise_length_bright_blue_mult_var").value) + "x")} else {var rise_length_bright_blue_var = (Number (document.getElementById("rise_length_bright_blue_var").value))} 
    if (Number((document.getElementById("set_length_bright_blue_mult_var").value)) !== 0) {var set_length_bright_blue_var = ((document.getElementById("set_length_bright_blue_mult_var").value) + "x")} else {var set_length_bright_blue_var = (Number (document.getElementById("set_length_bright_blue_var").value))}
    if (document.getElementById('local').checked) {local_var = 1} else {local_var = 0}
    let lighting_parameters = TimeGiver({time: time, wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_whiteCCT: (Number (document.getElementById("max_whiteCCT_var").value)), min_whiteCCT: (Number (document.getElementById("min_whiteCCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_whiteCCT: rise_length_whiteCCT_var, set_length_whiteCCT: set_length_whiteCCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_whiteCCT: (Number (document.getElementById("rise_slope_whiteCCT_var").value)), set_slope_whiteCCT: (Number (document.getElementById("set_slope_whiteCCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value)), altitude: (Number (document.getElementById("alt_var").value)), azimuth: (Number (document.getElementById("az_var").value)), min_sun_rad: (Number (document.getElementById("min_sun_rad_var").value)), range_sun_rad: (Number (document.getElementById("range_sun_rad_var").value)), lat: (Number (document.getElementById("lat_var").value)), long: (Number (document.getElementById("long_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), localvalues: local_var, max_colorCCT: (Number (document.getElementById("max_colorCCT_var").value)), min_colorCCT: (Number (document.getElementById("min_colorCCT_var").value)), rise_length_colorCCT: rise_length_colorCCT_var, set_length_colorCCT: set_length_colorCCT_var, rise_slope_colorCCT: (Number (document.getElementById("rise_slope_colorCCT_var").value)), set_slope_colorCCT: (Number (document.getElementById("set_slope_colorCCT_var").value)) /*sun_altitude: (Number (document.getElementById("sun_alt_var").value)), sun_azimuth: (Number (document.getElementById("sun_az_var").value))*/})
    let rgb_values_blue = xytorgb(lighting_parameters.comb_x_shifted_ret, lighting_parameters.comb_y_shifted_ret, 200)
    var rgb_final_blue = "rgb("+rgb_values_blue.r_gamma_ret+","+rgb_values_blue.g_gamma_ret+","+rgb_values_blue.b_gamma_ret+")";
    let rgb_values_yellow = xytorgb(lighting_parameters.yellow_x_shifted_ret, lighting_parameters.yellow_y_shifted_ret, 200)
    var rgb_final_yellow = "rgb("+rgb_values_yellow.r_gamma_ret+","+rgb_values_yellow.g_gamma_ret+","+rgb_values_yellow.b_gamma_ret+")";
    var c = document.getElementById("visualizer");
    var ctx_blue = c.getContext("2d");
    ctx_blue.beginPath();
    ctx_blue.strokeStyle = rgb_final_blue;
    ctx_blue.strokeRect((time/2), ((274 - lighting_parameters.bright_comb_int_ret)/2), 1, (lighting_parameters.bright_comb_int_ret/2));
    ctx_blue.stroke();
    var ctx_yellow = c.getContext("2d");
    ctx_yellow.beginPath();
    ctx_yellow.strokeStyle = rgb_final_yellow;
    ctx_yellow.strokeRect((time/2), ((274/2)), 1, (lighting_parameters.bright_yellow_int_ret/2));
    ctx_yellow.stroke();
    if (time <= 1440) {blueyellowlinedrawer ({time: (time + 2)})} else {
      var wake_time = (document.getElementById("wake_time_var").value);
      var wake_time_hh = (wake_time.slice(0,2));
      var wake_time_hh_sixty = (wake_time_hh * 60);
      var wake_time_mm = wake_time.slice(-2);
      var wake_time_hm = (Number(wake_time_hh_sixty) + Number(wake_time_mm));
      var bed_time = (document.getElementById("bed_time_var").value);
      var bed_time_hh = (bed_time.slice(0,2));
      var bed_time_hh_sixty = (bed_time_hh * 60);
      var bed_time_mm = bed_time.slice(-2);
      var bed_time_hm = (Number(bed_time_hh_sixty) + Number(bed_time_mm));
      var wake_offset = (Number(document.getElementById("wake_offset_var").value));
      var bed_offset = (Number(document.getElementById("bed_offset_var").value));
      var now = new Date(); //sets the variable now equal to the current date and time
      var hh = now.getHours(); //sets the variable hh equal to the number of hours that have passed since the day started.
      var hh_sixty = hh * 60; //sets the variable hh_sixty equal to the number of minutes in the day at the time of the last hour change.
      var mm = now.getMinutes(); //sets the variable mm equal to the number of minutes since the last hour
      var hm = hh_sixty + mm; //sets the variable hm equal to the total number of minutes that have passed since the day began.
      if (Number((document.getElementById("rise_length_bright_mult_var").value)) !== 0) {var rise_length_bright_var = ((document.getElementById("rise_length_bright_mult_var").value) + "x")} else {var rise_length_bright_var = (Number (document.getElementById("rise_length_bright_var").value))} 
      if (Number((document.getElementById("set_length_bright_mult_var").value)) !== 0) {var set_length_bright_var = ((document.getElementById("set_length_bright_mult_var").value) + "x")} else {var set_length_bright_var = (Number (document.getElementById("set_length_bright_var").value))}
      if (Number((document.getElementById("rise_length_whiteCCT_var").value)) == 0) {var rise_length_whiteCCT_var = ((document.getElementById("rise_length_whiteCCT_mult_var").value) + "x")} else {var rise_length_whiteCCT_var = (Number (document.getElementById("rise_length_whiteCCT_var").value))} 
      if (Number((document.getElementById("set_length_whiteCCT_var").value)) == 0) {var set_length_whiteCCT_var = ((document.getElementById("set_length_whiteCCT_mult_var").value) + "x")} else {var set_length_whiteCCT_var = (Number (document.getElementById("set_length_whiteCCT_var").value))}  
      if (Number((document.getElementById("rise_length_colorCCT_var").value)) == 0) {var rise_length_colorCCT_var = ((document.getElementById("rise_length_colorCCT_mult_var").value) + "x")} else {var rise_length_colorCCT_var = (Number (document.getElementById("rise_length_colorCCT_var").value))} 
      if (Number((document.getElementById("set_length_colorCCT_var").value)) == 0) {var set_length_colorCCT_var = ((document.getElementById("set_length_colorCCT_mult_var").value) + "x")} else {var set_length_colorCCT_var = (Number (document.getElementById("set_length_colorCCT_var").value))}  
      if (Number((document.getElementById("rise_length_scatdist_var").value)) == 0) {var rise_length_scatdist_var = ((document.getElementById("rise_length_scatdist_mult_var").value) + "x")} else {var rise_length_scatdist_var = (Number (document.getElementById("rise_length_scatdist_var").value))} 
      if (Number((document.getElementById("set_length_scatdist_var").value)) == 0) {var set_length_scatdist_var = ((document.getElementById("set_length_scatdist_mult_var").value) + "x")} else {var set_length_scatdist_var = (Number (document.getElementById("set_length_scatdist_var").value))}  
      if (Number((document.getElementById("rise_length_scatangshift_mult_var").value)) !== 0) {var rise_length_scatangshift_var = ((document.getElementById("rise_length_scatangshift_mult_var").value) + "x")} else {var rise_length_scatangshift_var = (Number (document.getElementById("rise_length_scatangshift_var").value))} 
      if (Number((document.getElementById("set_length_scatangshift_mult_var").value)) !== 0) {var set_length_scatangshift_var = ((document.getElementById("set_length_scatangshift_mult_var").value) + "x")} else {var set_length_scatangshift_var = (Number (document.getElementById("set_length_scatangshift_var").value))}
      if (Number((document.getElementById("rise_length_bright_yellow_mult_var").value)) !== 0) {var rise_length_bright_yellow_var = ((document.getElementById("rise_length_bright_yellow_mult_var").value) + "x")} else {var rise_length_bright_yellow_var = (Number (document.getElementById("rise_length_bright_yellow_var").value))} 
      if (Number((document.getElementById("set_length_bright_yellow_mult_var").value)) !== 0) {var set_length_bright_yellow_var = ((document.getElementById("set_length_bright_yellow_mult_var").value) + "x")} else {var set_length_bright_yellow_var = (Number (document.getElementById("set_length_bright_yellow_var").value))}
      if (Number((document.getElementById("rise_length_bright_blue_mult_var").value)) !== 0) {var rise_length_bright_blue_var = ((document.getElementById("rise_length_bright_blue_mult_var").value) + "x")} else {var rise_length_bright_blue_var = (Number (document.getElementById("rise_length_bright_blue_var").value))} 
      if (Number((document.getElementById("set_length_bright_blue_mult_var").value)) !== 0) {var set_length_bright_blue_var = ((document.getElementById("set_length_bright_blue_mult_var").value) + "x")} else {var set_length_bright_blue_var = (Number (document.getElementById("set_length_bright_blue_var").value))}
      if (document.getElementById('local').checked) {local_var = 1} else {local_var = 0}
      let lighting_parameters = TimeGiver({time: (wake_time_hm-wake_offset), wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_whiteCCT: (Number (document.getElementById("max_whiteCCT_var").value)), min_whiteCCT: (Number (document.getElementById("min_whiteCCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_whiteCCT: rise_length_whiteCCT_var, set_length_whiteCCT: set_length_whiteCCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_whiteCCT: (Number (document.getElementById("rise_slope_whiteCCT_var").value)), set_slope_whiteCCT: (Number (document.getElementById("set_slope_whiteCCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value)), altitude: (Number (document.getElementById("alt_var").value)), azimuth: (Number (document.getElementById("az_var").value)), lat: (Number (document.getElementById("lat_var").value)), long: (Number (document.getElementById("long_var").value)), min_sun_rad: (Number (document.getElementById("min_sun_rad_var").value)), range_sun_rad: (Number (document.getElementById("range_sun_rad_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), localvalues: local_var, max_colorCCT: (Number (document.getElementById("max_colorCCT_var").value)), min_colorCCT: (Number (document.getElementById("min_colorCCT_var").value)), rise_length_colorCCT: rise_length_colorCCT_var, set_length_colorCCT: set_length_colorCCT_var, rise_slope_colorCCT: (Number (document.getElementById("rise_slope_colorCCT_var").value)), set_slope_colorCCT: (Number (document.getElementById("set_slope_colorCCT_var").value)) /*sun_altitude: (Number (document.getElementById("sun_alt_var").value)), sun_azimuth: (Number (document.getElementById("sun_az_var").value))*/})
      let lighting_parameters2 = TimeGiver({time: (bed_time_hm-bed_offset), wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_whiteCCT: (Number (document.getElementById("max_whiteCCT_var").value)), min_whiteCCT: (Number (document.getElementById("min_whiteCCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_whiteCCT: rise_length_whiteCCT_var, set_length_whiteCCT: set_length_whiteCCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_whiteCCT: (Number (document.getElementById("rise_slope_whiteCCT_var").value)), set_slope_whiteCCT: (Number (document.getElementById("set_slope_whiteCCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value)), altitude: (Number (document.getElementById("alt_var").value)), azimuth: (Number (document.getElementById("az_var").value)), lat: (Number (document.getElementById("lat_var").value)), long: (Number (document.getElementById("long_var").value)), min_sun_rad: (Number (document.getElementById("min_sun_rad_var").value)), range_sun_rad: (Number (document.getElementById("range_sun_rad_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), localvalues: local_var, max_colorCCT: (Number (document.getElementById("max_colorCCT_var").value)), min_colorCCT: (Number (document.getElementById("min_colorCCT_var").value)), rise_length_colorCCT: rise_length_colorCCT_var, set_length_colorCCT: set_length_colorCCT_var, rise_slope_colorCCT: (Number (document.getElementById("rise_slope_colorCCT_var").value)), set_slope_colorCCT: (Number (document.getElementById("set_slope_colorCCT_var").value)) /*sun_altitude: (Number (document.getElementById("sun_alt_var").value)), sun_azimuth: (Number (document.getElementById("sun_az_var").value))*/})
      let lighting_parameters3 = TimeGiver({wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_whiteCCT: (Number (document.getElementById("max_whiteCCT_var").value)), min_whiteCCT: (Number (document.getElementById("min_whiteCCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_whiteCCT: rise_length_whiteCCT_var, set_length_whiteCCT: set_length_whiteCCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_whiteCCT: (Number (document.getElementById("rise_slope_whiteCCT_var").value)), set_slope_whiteCCT: (Number (document.getElementById("set_slope_whiteCCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value)), altitude: (Number (document.getElementById("alt_var").value)), azimuth: (Number (document.getElementById("az_var").value)), min_sun_rad: (Number (document.getElementById("min_sun_rad_var").value)), range_sun_rad: (Number (document.getElementById("range_sun_rad_var").value)), lat: (Number (document.getElementById("lat_var").value)), long: (Number (document.getElementById("long_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), localvalues: local_var, max_colorCCT: (Number (document.getElementById("max_colorCCT_var").value)), min_colorCCT: (Number (document.getElementById("min_colorCCT_var").value)), rise_length_colorCCT: rise_length_colorCCT_var, set_length_colorCCT: set_length_colorCCT_var, rise_slope_colorCCT: (Number (document.getElementById("rise_slope_colorCCT_var").value)), set_slope_colorCCT: (Number (document.getElementById("set_slope_colorCCT_var").value))})
      let lighting_parameters4 = TimeGiver({time: simulated_time_hm, wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_whiteCCT: (Number (document.getElementById("max_whiteCCT_var").value)), min_whiteCCT: (Number (document.getElementById("min_whiteCCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_whiteCCT: rise_length_whiteCCT_var, set_length_whiteCCT: set_length_whiteCCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_whiteCCT: (Number (document.getElementById("rise_slope_whiteCCT_var").value)), set_slope_whiteCCT: (Number (document.getElementById("set_slope_whiteCCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value)), altitude: (Number (document.getElementById("alt_var").value)), azimuth: (Number (document.getElementById("az_var").value)), lat: (Number (document.getElementById("lat_var").value)), long: (Number (document.getElementById("long_var").value)), min_sun_rad: (Number (document.getElementById("min_sun_rad_var").value)), range_sun_rad: (Number (document.getElementById("range_sun_rad_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), localvalues: local_var, max_colorCCT: (Number (document.getElementById("max_colorCCT_var").value)), min_colorCCT: (Number (document.getElementById("min_colorCCT_var").value)), rise_length_colorCCT: rise_length_colorCCT_var, set_length_colorCCT: set_length_colorCCT_var, rise_slope_colorCCT: (Number (document.getElementById("rise_slope_colorCCT_var").value)), set_slope_colorCCT: (Number (document.getElementById("set_slope_colorCCT_var").value)) /*sun_altitude: (Number (document.getElementById("sun_alt_var").value)), sun_azimuth: (Number (document.getElementById("sun_az_var").value))*/})
      var c = document.getElementById("visualizer");
      var ctx_blue = c.getContext("2d");
      ctx_blue.beginPath();
      ctx_blue.stroke();
      ctx_blue.font = "30px Arial";
      ctx_blue.fillStyle = "black";
      ctx_blue.fillText("🌞", (((wake_time_hm-wake_offset)/2)-20), (137-(lighting_parameters.bright_blue_int_ret/2)));
      ctx_blue.fillText("🌝", (((bed_time_hm-bed_offset)/2)-25), (132-(lighting_parameters2.bright_blue_int_ret/2)));
      ctx_blue.fillText("🙌", ((hm/2)), (157-(lighting_parameters3.bright_blue_int_ret/2)));
      var ctx_yellow = c.getContext("2d");
      ctx_yellow.beginPath();
      ctx_yellow.strokeStyle = rgb_final_yellow;
      ctx_yellow.font = "30px Arial";
      ctx_yellow.fillStyle = "black";
      ctx_yellow.fillText("🌞", (((wake_time_hm-wake_offset)/2)-20), (137+(lighting_parameters.bright_yellow_int_ret/2)));
      ctx_yellow.fillText("🌝", (((bed_time_hm-bed_offset)/2)-25), (152+(lighting_parameters2.bright_yellow_int_ret/2)));
      ctx_yellow.fillText("🙌", ((hm/2)), (137+(lighting_parameters3.bright_yellow_int_ret/2)));
      var xyvis_white_x = (((805 * lighting_parameters4.white_x_ret) + 45) * (2/3))
      var xyvis_white_y = (((-711.111 * lighting_parameters4.white_y_ret) + 680) * (2/3))
      var xyvis_yellow_x = (((805 * lighting_parameters4.yellow_x_shifted_ret) + 45) * (2/3))
      var xyvis_yellow_y = (((-711.111 * lighting_parameters4.yellow_y_shifted_ret) + 680) * (2/3))
      var xyvis_blue_x = (((805 * lighting_parameters4.blue_x_shifted_ret) + 45) * (2/3))
      var xyvis_blue_y = (((-711.111 * lighting_parameters4.blue_y_shifted_ret) + 680) * (2/3))
      var xyvis = document.getElementById("cie1931visualizer");
      var ctx_xyvis = xyvis.getContext("2d");
      var img = document.getElementById("cie1931visualizerpng");
      ctx_xyvis.drawImage(img, 0, 0, 480, 499);
      ctx_xyvis.font = "30px Arial";
      ctx_xyvis.fillStyle = "black";
      ctx_xyvis.fillText("📍", xyvis_white_x, xyvis_white_y);
      ctx_xyvis.fillText("📍", xyvis_yellow_x, xyvis_yellow_y);
      ctx_xyvis.fillText("📍", xyvis_blue_x, xyvis_blue_y);
      ctx_xyvis.beginPath();
      ctx_xyvis.lineWidth = 2;
      ctx_xyvis.strokeStyle = "blue";
      ctx_xyvis.moveTo(121, 121);
      ctx_xyvis.lineTo(400, 304);
      ctx_xyvis.lineTo(110, 432);
      ctx_xyvis.lineTo(121, 121);
      ctx_xyvis.stroke();
      ctx_xyvis.beginPath();
      ctx_xyvis.lineWidth = 2;
      ctx_xyvis.strokeStyle = "red";
      ctx_xyvis.moveTo(247, 209);
      ctx_xyvis.lineTo(387, 302);
      ctx_xyvis.lineTo(119, 434);
      ctx_xyvis.lineTo(247, 209);
      ctx_xyvis.stroke();
      ctx_xyvis.beginPath();
      ctx_xyvis.lineWidth = 2;
      ctx_xyvis.strokeStyle = "black";
      ctx_xyvis.moveTo(143, 117);
      ctx_xyvis.lineTo(411, 316);
      ctx_xyvis.lineTo(102, 415);
      ctx_xyvis.lineTo(143, 117);
      ctx_xyvis.stroke();
      return;}
    }


function skyprojector () {
    var wake_time = (document.getElementById("wake_time_var").value);
    var wake_time_hh = (wake_time.slice(0,2));
    var wake_time_hh_sixty = (wake_time_hh * 60);
    var wake_time_mm = wake_time.slice(-2);
    var wake_time_hm = (Number(wake_time_hh_sixty) + Number(wake_time_mm));
    var bed_time = (document.getElementById("bed_time_var").value);
    var bed_time_hh = (bed_time.slice(0,2));
    var bed_time_hh_sixty = (bed_time_hh * 60);
    var bed_time_mm = bed_time.slice(-2);
    var bed_time_hm = (Number(bed_time_hh_sixty) + Number(bed_time_mm));
    var now = new Date(); //sets the variable now equal to the current date and time
    var hh = now.getHours(); //sets the variable hh equal to the number of hours that have passed since the day started.
    var hh_sixty = hh * 60; //sets the variable hh_sixty equal to the number of minutes in the day at the time of the last hour change.
    var mm = now.getMinutes(); //sets the variable mm equal to the number of minutes since the last hour
    var hm = hh_sixty + mm; //sets the variable hm equal to the total number of minutes that have passed since the day began.
    if (Number((document.getElementById("rise_length_bright_mult_var").value)) !== 0) {var rise_length_bright_var = ((document.getElementById("rise_length_bright_mult_var").value) + "x")} else {var rise_length_bright_var = (Number (document.getElementById("rise_length_bright_var").value))} 
    if (Number((document.getElementById("set_length_bright_mult_var").value)) !== 0) {var set_length_bright_var = ((document.getElementById("set_length_bright_mult_var").value) + "x")} else {var set_length_bright_var = (Number (document.getElementById("set_length_bright_var").value))}
    if (Number((document.getElementById("rise_length_whiteCCT_var").value)) == 0) {var rise_length_whiteCCT_var = ((document.getElementById("rise_length_whiteCCT_mult_var").value) + "x")} else {var rise_length_whiteCCT_var = (Number (document.getElementById("rise_length_whiteCCT_var").value))} 
    if (Number((document.getElementById("set_length_whiteCCT_var").value)) == 0) {var set_length_whiteCCT_var = ((document.getElementById("set_length_whiteCCT_mult_var").value) + "x")} else {var set_length_whiteCCT_var = (Number (document.getElementById("set_length_whiteCCT_var").value))}  
    if (Number((document.getElementById("rise_length_colorCCT_var").value)) == 0) {var rise_length_colorCCT_var = ((document.getElementById("rise_length_colorCCT_mult_var").value) + "x")} else {var rise_length_colorCCT_var = (Number (document.getElementById("rise_length_colorCCT_var").value))} 
    if (Number((document.getElementById("set_length_colorCCT_var").value)) == 0) {var set_length_colorCCT_var = ((document.getElementById("set_length_colorCCT_mult_var").value) + "x")} else {var set_length_colorCCT_var = (Number (document.getElementById("set_length_colorCCT_var").value))}  
    if (Number((document.getElementById("rise_length_scatdist_var").value)) == 0) {var rise_length_scatdist_var = ((document.getElementById("rise_length_scatdist_mult_var").value) + "x")} else {var rise_length_scatdist_var = (Number (document.getElementById("rise_length_scatdist_var").value))} 
    if (Number((document.getElementById("set_length_scatdist_var").value)) == 0) {var set_length_scatdist_var = ((document.getElementById("set_length_scatdist_mult_var").value) + "x")} else {var set_length_scatdist_var = (Number (document.getElementById("set_length_scatdist_var").value))}  
    if (Number((document.getElementById("rise_length_scatangshift_mult_var").value)) !== 0) {var rise_length_scatangshift_var = ((document.getElementById("rise_length_scatangshift_mult_var").value) + "x")} else {var rise_length_scatangshift_var = (Number (document.getElementById("rise_length_scatangshift_var").value))} 
    if (Number((document.getElementById("set_length_scatangshift_mult_var").value)) !== 0) {var set_length_scatangshift_var = ((document.getElementById("set_length_scatangshift_mult_var").value) + "x")} else {var set_length_scatangshift_var = (Number (document.getElementById("set_length_scatangshift_var").value))}
    if (Number((document.getElementById("rise_length_bright_yellow_mult_var").value)) !== 0) {var rise_length_bright_yellow_var = ((document.getElementById("rise_length_bright_yellow_mult_var").value) + "x")} else {var rise_length_bright_yellow_var = (Number (document.getElementById("rise_length_bright_yellow_var").value))} 
    if (Number((document.getElementById("set_length_bright_yellow_mult_var").value)) !== 0) {var set_length_bright_yellow_var = ((document.getElementById("set_length_bright_yellow_mult_var").value) + "x")} else {var set_length_bright_yellow_var = (Number (document.getElementById("set_length_bright_yellow_var").value))}
    if (Number((document.getElementById("rise_length_bright_blue_mult_var").value)) !== 0) {var rise_length_bright_blue_var = ((document.getElementById("rise_length_bright_blue_mult_var").value) + "x")} else {var rise_length_bright_blue_var = (Number (document.getElementById("rise_length_bright_blue_var").value))} 
    if (Number((document.getElementById("set_length_bright_blue_mult_var").value)) !== 0) {var set_length_bright_blue_var = ((document.getElementById("set_length_bright_blue_mult_var").value) + "x")} else {var set_length_bright_blue_var = (Number (document.getElementById("set_length_bright_blue_var").value))}
    if (document.getElementById('local').checked) {local_var = 1} else {local_var = 0}
    var c = document.getElementById("skyprojection");
    var ctx_proj = c.getContext("2d");
    const arr = new Uint8ClampedArray(129600);

    // Iterate through every pixel
    for (let i = 0; i < arr.length; i += 4) {
      var quot = Math.floor(i / 360)
      var y_proj = (180 - (Math.floor(i / 720)))
      var x_proj = ((i - ((180 - y_proj) * 720)) / 4)
      if (i < 64800) {
        if (quot % 2 == 0) {
          var alt = ((1 - ((Math.sqrt (Math.pow((180 - x_proj - 90), 2) + Math.pow((y_proj - 90), 2)))/90)) * 90)
          var az = (270 + (radianstodegrees(Math.atan ((y_proj - 90)/(180 - x_proj - 90)))))
          let lighting_parameters = TimeGiver({azimuth: az, altitude: alt, wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_whiteCCT: (Number (document.getElementById("max_whiteCCT_var").value)), min_whiteCCT: (Number (document.getElementById("min_whiteCCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_whiteCCT: rise_length_whiteCCT_var, set_length_whiteCCT: set_length_whiteCCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_whiteCCT: (Number (document.getElementById("rise_slope_whiteCCT_var").value)), set_slope_whiteCCT: (Number (document.getElementById("set_slope_whiteCCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value)), min_sun_rad: (Number (document.getElementById("min_sun_rad_var").value)), range_sun_rad: (Number (document.getElementById("range_sun_rad_var").value)), lat: (Number (document.getElementById("lat_var").value)), long: (Number (document.getElementById("long_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), localvalues: local_var, max_colorCCT: (Number (document.getElementById("max_colorCCT_var").value)), min_colorCCT: (Number (document.getElementById("min_colorCCT_var").value)), rise_length_colorCCT: rise_length_colorCCT_var, set_length_colorCCT: set_length_colorCCT_var, rise_slope_colorCCT: (Number (document.getElementById("rise_slope_colorCCT_var").value)), set_slope_colorCCT: (Number (document.getElementById("set_slope_colorCCT_var").value))/*, sun_altitude: (Number (document.getElementById("sun_alt_var").value)), sun_azimuth: (Number (document.getElementById("sun_az_var").value))*/})
          let rgb_values_blue = xytorgb(lighting_parameters.comb_x_shifted_ret, lighting_parameters.comb_y_shifted_ret, 150)
          arr[i + 0] = rgb_values_blue.r_gamma_ret;    // R value
          arr[i + 1] = rgb_values_blue.g_gamma_ret;  // G value
          arr[i + 2] = rgb_values_blue.b_gamma_ret;    // B value
          arr[i + 3] = 255;  // A value
        } else {
          var alt = ((1 - ((Math.sqrt (Math.pow((x_proj - 90), 2) + Math.pow((y_proj - 90), 2)))/90)) * 90)
          var az = (90 - (radianstodegrees(Math.atan ((y_proj - 90)/(x_proj - 90)))))
        let lighting_parameters = TimeGiver({azimuth: az, altitude: alt, wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_whiteCCT: (Number (document.getElementById("max_whiteCCT_var").value)), min_whiteCCT: (Number (document.getElementById("min_whiteCCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_whiteCCT: rise_length_whiteCCT_var, set_length_whiteCCT: set_length_whiteCCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_whiteCCT: (Number (document.getElementById("rise_slope_whiteCCT_var").value)), set_slope_whiteCCT: (Number (document.getElementById("set_slope_whiteCCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value)), min_sun_rad: (Number (document.getElementById("min_sun_rad_var").value)), range_sun_rad: (Number (document.getElementById("range_sun_rad_var").value)), lat: (Number (document.getElementById("lat_var").value)), long: (Number (document.getElementById("long_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), localvalues: local_var, max_colorCCT: (Number (document.getElementById("max_colorCCT_var").value)), min_colorCCT: (Number (document.getElementById("min_colorCCT_var").value)), rise_length_colorCCT: rise_length_colorCCT_var, set_length_colorCCT: set_length_colorCCT_var, rise_slope_colorCCT: (Number (document.getElementById("rise_slope_colorCCT_var").value)), set_slope_colorCCT: (Number (document.getElementById("set_slope_colorCCT_var").value))/*, sun_altitude: (Number (document.getElementById("sun_alt_var").value)), sun_azimuth: (Number (document.getElementById("sun_az_var").value))*/})
          let rgb_values_blue = xytorgb(lighting_parameters.comb_x_shifted_ret, lighting_parameters.comb_y_shifted_ret, 150)
          arr[i + 0] = rgb_values_blue.r_gamma_ret;    // R value
          arr[i + 1] = rgb_values_blue.g_gamma_ret;  // G value
          arr[i + 2] = rgb_values_blue.b_gamma_ret;    // B value
          arr[i + 3] = 255;  // A value
        }
      } else {
        if (quot % 2 == 0) {
          var alt = ((1 - ((Math.sqrt (Math.pow((180 - x_proj - 90), 2) + Math.pow((180 - y_proj - 90), 2)))/90)) * 90)
          var az = (90 - (radianstodegrees(Math.atan ((180 - y_proj - 90)/(180 - x_proj - 90)))) + 180)
          let lighting_parameters = TimeGiver({azimuth: az, altitude: alt, wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_whiteCCT: (Number (document.getElementById("max_whiteCCT_var").value)), min_whiteCCT: (Number (document.getElementById("min_whiteCCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_whiteCCT: rise_length_whiteCCT_var, set_length_whiteCCT: set_length_whiteCCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_whiteCCT: (Number (document.getElementById("rise_slope_whiteCCT_var").value)), set_slope_whiteCCT: (Number (document.getElementById("set_slope_whiteCCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value)), min_sun_rad: (Number (document.getElementById("min_sun_rad_var").value)), range_sun_rad: (Number (document.getElementById("range_sun_rad_var").value)), lat: (Number (document.getElementById("lat_var").value)), long: (Number (document.getElementById("long_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), localvalues: local_var, max_colorCCT: (Number (document.getElementById("max_colorCCT_var").value)), min_colorCCT: (Number (document.getElementById("min_colorCCT_var").value)), rise_length_colorCCT: rise_length_colorCCT_var, set_length_colorCCT: set_length_colorCCT_var, rise_slope_colorCCT: (Number (document.getElementById("rise_slope_colorCCT_var").value)), set_slope_colorCCT: (Number (document.getElementById("set_slope_colorCCT_var").value))/*, sun_altitude: (Number (document.getElementById("sun_alt_var").value)), sun_azimuth: (Number (document.getElementById("sun_az_var").value))*/})
          let rgb_values_blue = xytorgb(lighting_parameters.comb_x_shifted_ret, lighting_parameters.comb_y_shifted_ret, 150)
          arr[i + 0] = rgb_values_blue.r_gamma_ret;    // R value
          arr[i + 1] = rgb_values_blue.g_gamma_ret;  // G value
          arr[i + 2] = rgb_values_blue.b_gamma_ret;    // B value
          arr[i + 3] = 255;  // A value
        } else {
          var alt = ((1 - ((Math.sqrt (Math.pow((x_proj - 90), 2) + Math.pow((180 - y_proj - 90), 2)))/90)) * 90)
          var az = (90 + (radianstodegrees(Math.atan ((180 - y_proj - 90)/(x_proj - 90)))))
          let lighting_parameters = TimeGiver({azimuth: az, altitude: alt, wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_whiteCCT: (Number (document.getElementById("max_whiteCCT_var").value)), min_whiteCCT: (Number (document.getElementById("min_whiteCCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_whiteCCT: rise_length_whiteCCT_var, set_length_whiteCCT: set_length_whiteCCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_whiteCCT: (Number (document.getElementById("rise_slope_whiteCCT_var").value)), set_slope_whiteCCT: (Number (document.getElementById("set_slope_whiteCCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value)), min_sun_rad: (Number (document.getElementById("min_sun_rad_var").value)), range_sun_rad: (Number (document.getElementById("range_sun_rad_var").value)), lat: (Number (document.getElementById("lat_var").value)), long: (Number (document.getElementById("long_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), localvalues: local_var, max_colorCCT: (Number (document.getElementById("max_colorCCT_var").value)), min_colorCCT: (Number (document.getElementById("min_colorCCT_var").value)), rise_length_colorCCT: rise_length_colorCCT_var, set_length_colorCCT: set_length_colorCCT_var, rise_slope_colorCCT: (Number (document.getElementById("rise_slope_colorCCT_var").value)), set_slope_colorCCT: (Number (document.getElementById("set_slope_colorCCT_var").value))/*, sun_altitude: (Number (document.getElementById("sun_alt_var").value)), sun_azimuth: (Number (document.getElementById("sun_az_var").value))*/})
          let rgb_values_blue = xytorgb(lighting_parameters.comb_x_shifted_ret, lighting_parameters.comb_y_shifted_ret, 150)
          arr[i + 0] = rgb_values_blue.r_gamma_ret;    // R value
          arr[i + 1] = rgb_values_blue.g_gamma_ret;  // G value
          arr[i + 2] = rgb_values_blue.b_gamma_ret;    // B value
          arr[i + 3] = 255;  // A value
        } 
        }
    }
    let imageData = new ImageData(arr, 180);
    ctx_proj.putImageData(imageData, 0, 0);   
}

function linedrawer ({time}) {
    var wake_time = (document.getElementById("wake_time_var").value);
    var wake_time_hh = (wake_time.slice(0,2));
    var wake_time_hh_sixty = (wake_time_hh * 60);
    var wake_time_mm = wake_time.slice(-2);
    var wake_time_hm = (Number(wake_time_hh_sixty) + Number(wake_time_mm));
    var bed_time = (document.getElementById("bed_time_var").value);
    var bed_time_hh = (bed_time.slice(0,2));
    var bed_time_hh_sixty = (bed_time_hh * 60);
    var bed_time_mm = bed_time.slice(-2);
    var bed_time_hm = (Number(bed_time_hh_sixty) + Number(bed_time_mm));
    if (Number((document.getElementById("rise_length_bright_mult_var").value)) !== 0) {var rise_length_bright_var = ((document.getElementById("rise_length_bright_mult_var").value) + "x")} else {var rise_length_bright_var = (Number (document.getElementById("rise_length_bright_var").value))} 
    if (Number((document.getElementById("set_length_bright_mult_var").value)) !== 0) {var set_length_bright_var = ((document.getElementById("set_length_bright_mult_var").value) + "x")} else {var set_length_bright_var = (Number (document.getElementById("set_length_bright_var").value))}
    if (Number((document.getElementById("rise_length_whiteCCT_var").value)) == 0) {var rise_length_whiteCCT_var = ((document.getElementById("rise_length_whiteCCT_mult_var").value) + "x")} else {var rise_length_whiteCCT_var = (Number (document.getElementById("rise_length_whiteCCT_var").value))} 
    if (Number((document.getElementById("set_length_whiteCCT_var").value)) == 0) {var set_length_whiteCCT_var = ((document.getElementById("set_length_whiteCCT_mult_var").value) + "x")} else {var set_length_whiteCCT_var = (Number (document.getElementById("set_length_whiteCCT_var").value))}  
    if (Number((document.getElementById("rise_length_colorCCT_var").value)) == 0) {var rise_length_colorCCT_var = ((document.getElementById("rise_length_colorCCT_mult_var").value) + "x")} else {var rise_length_colorCCT_var = (Number (document.getElementById("rise_length_colorCCT_var").value))} 
    if (Number((document.getElementById("set_length_colorCCT_var").value)) == 0) {var set_length_colorCCT_var = ((document.getElementById("set_length_colorCCT_mult_var").value) + "x")} else {var set_length_colorCCT_var = (Number (document.getElementById("set_length_colorCCT_var").value))}  
    if (document.getElementById('local').checked) {local_var = 1} else {local_var = 0}
    let lighting_parameters = TimeGiver({time:time, wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_whiteCCT: (Number (document.getElementById("max_whiteCCT_var").value)), min_whiteCCT: (Number (document.getElementById("min_whiteCCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_whiteCCT: rise_length_whiteCCT_var, set_length_whiteCCT: set_length_whiteCCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_whiteCCT: (Number (document.getElementById("rise_slope_whiteCCT_var").value)), set_slope_whiteCCT: (Number (document.getElementById("set_slope_whiteCCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value)), altitude: (Number (document.getElementById("alt_var").value)), azimuth: (Number (document.getElementById("az_var").value)), min_sun_rad: (Number (document.getElementById("min_sun_rad_var").value)), range_sun_rad: (Number (document.getElementById("range_sun_rad_var").value)), lat: (Number (document.getElementById("lat_var").value)), long: (Number (document.getElementById("long_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), localvalues: local_var, max_colorCCT: (Number (document.getElementById("max_colorCCT_var").value)), min_colorCCT: (Number (document.getElementById("min_colorCCT_var").value)), rise_length_colorCCT: rise_length_colorCCT_var, set_length_colorCCT: set_length_colorCCT_var, rise_slope_colorCCT: (Number (document.getElementById("rise_slope_colorCCT_var").value)), set_slope_colorCCT: (Number (document.getElementById("set_slope_colorCCT_var").value))})
    let rgb_values = xytorgb(lighting_parameters.white_x_ret, lighting_parameters.white_y_ret, 200)
    var rgb_final = "rgb("+rgb_values.r_gamma_ret+","+rgb_values.g_gamma_ret+","+rgb_values.b_gamma_ret+")";
    var c = document.getElementById("visualizer");
    var ctx = c.getContext("2d");
    ctx.beginPath();
    ctx.strokeStyle = rgb_final;
    ctx.strokeRect((time/2), (274 - lighting_parameters.bright_int_ret), 1, lighting_parameters.bright_int_ret);
    ctx.stroke();
    ctx.font = "30px Helvetica";
    ctx.fillStyle = "black";
    //ctx.fillText("🌞", ((wake_time_hm/2)-20), (254-((Number (document.getElementById("min_bright_var").value))*254)));
    //ctx.fillText("🌙", ((bed_time_hm/2)-25), (254-((Number (document.getElementById("min_bright_var").value))*254)));
    if (time <= 1440) {linedrawer ({time: (time + 2)})} else {
      var wake_time = (document.getElementById("wake_time_var").value);
      var wake_time_hh = (wake_time.slice(0,2));
      var wake_time_hh_sixty = (wake_time_hh * 60);
      var wake_time_mm = wake_time.slice(-2);
      var wake_time_hm = (Number(wake_time_hh_sixty) + Number(wake_time_mm));
      var bed_time = (document.getElementById("bed_time_var").value);
      var bed_time_hh = (bed_time.slice(0,2));
      var bed_time_hh_sixty = (bed_time_hh * 60);
      var bed_time_mm = bed_time.slice(-2);
      var bed_time_hm = (Number(bed_time_hh_sixty) + Number(bed_time_mm));
      var now = new Date(); //sets the variable now equal to the current date and time
      var hh = now.getHours(); //sets the variable hh equal to the number of hours that have passed since the day started.
      var hh_sixty = hh * 60; //sets the variable hh_sixty equal to the number of minutes in the day at the time of the last hour change.
      var mm = now.getMinutes(); //sets the variable mm equal to the number of minutes since the last hour
      var hm = hh_sixty + mm; //sets the variable hm equal to the total number of minutes that have passed since the day began.
      if (Number((document.getElementById("rise_length_bright_mult_var").value)) !== 0) {var rise_length_bright_var = ((document.getElementById("rise_length_bright_mult_var").value) + "x")} else {var rise_length_bright_var = (Number (document.getElementById("rise_length_bright_var").value))} 
      if (Number((document.getElementById("set_length_bright_mult_var").value)) !== 0) {var set_length_bright_var = ((document.getElementById("set_length_bright_mult_var").value) + "x")} else {var set_length_bright_var = (Number (document.getElementById("set_length_bright_var").value))}
      if (Number((document.getElementById("rise_length_whiteCCT_var").value)) == 0) {var rise_length_whiteCCT_var = ((document.getElementById("rise_length_whiteCCT_mult_var").value) + "x")} else {var rise_length_whiteCCT_var = (Number (document.getElementById("rise_length_whiteCCT_var").value))} 
      if (Number((document.getElementById("set_length_whiteCCT_var").value)) == 0) {var set_length_whiteCCT_var = ((document.getElementById("set_length_whiteCCT_mult_var").value) + "x")} else {var set_length_whiteCCT_var = (Number (document.getElementById("set_length_whiteCCT_var").value))}  
      if (Number((document.getElementById("rise_length_colorCCT_var").value)) == 0) {var rise_length_colorCCT_var = ((document.getElementById("rise_length_colorCCT_mult_var").value) + "x")} else {var rise_length_colorCCT_var = (Number (document.getElementById("rise_length_colorCCT_var").value))} 
      if (Number((document.getElementById("set_length_colorCCT_var").value)) == 0) {var set_length_colorCCT_var = ((document.getElementById("set_length_colorCCT_mult_var").value) + "x")} else {var set_length_colorCCT_var = (Number (document.getElementById("set_length_colorCCT_var").value))}  
      if (document.getElementById('local').checked) {local_var = 1} else {local_var = 0}
      let lighting_parameters = TimeGiver({time: wake_time_hm, wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_whiteCCT: (Number (document.getElementById("max_whiteCCT_var").value)), min_whiteCCT: (Number (document.getElementById("min_whiteCCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_whiteCCT: rise_length_whiteCCT_var, set_length_whiteCCT: set_length_whiteCCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_whiteCCT: (Number (document.getElementById("rise_slope_whiteCCT_var").value)), set_slope_whiteCCT: (Number (document.getElementById("set_slope_whiteCCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value)), altitude: (Number (document.getElementById("alt_var").value)), azimuth: (Number (document.getElementById("az_var").value)), min_sun_rad: (Number (document.getElementById("min_sun_rad_var").value)), range_sun_rad: (Number (document.getElementById("range_sun_rad_var").value)), lat: (Number (document.getElementById("lat_var").value)), long: (Number (document.getElementById("long_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), localvalues: local_var, max_colorCCT: (Number (document.getElementById("max_colorCCT_var").value)), min_colorCCT: (Number (document.getElementById("min_colorCCT_var").value)), rise_length_colorCCT: rise_length_colorCCT_var, set_length_colorCCT: set_length_colorCCT_var, rise_slope_colorCCT: (Number (document.getElementById("rise_slope_colorCCT_var").value)), set_slope_colorCCT: (Number (document.getElementById("set_slope_colorCCT_var").value))})
      let lighting_parameters2 = TimeGiver({time:bed_time_hm, wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_whiteCCT: (Number (document.getElementById("max_whiteCCT_var").value)), min_whiteCCT: (Number (document.getElementById("min_whiteCCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_whiteCCT: rise_length_whiteCCT_var, set_length_whiteCCT: set_length_whiteCCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_whiteCCT: (Number (document.getElementById("rise_slope_whiteCCT_var").value)), set_slope_whiteCCT: (Number (document.getElementById("set_slope_whiteCCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value)), altitude: (Number (document.getElementById("alt_var").value)), azimuth: (Number (document.getElementById("az_var").value)), min_sun_rad: (Number (document.getElementById("min_sun_rad_var").value)), range_sun_rad: (Number (document.getElementById("range_sun_rad_var").value)), lat: (Number (document.getElementById("lat_var").value)), long: (Number (document.getElementById("long_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), localvalues: local_var, max_colorCCT: (Number (document.getElementById("max_colorCCT_var").value)), min_colorCCT: (Number (document.getElementById("min_colorCCT_var").value)), rise_length_colorCCT: rise_length_colorCCT_var, set_length_colorCCT: set_length_colorCCT_var, rise_slope_colorCCT: (Number (document.getElementById("rise_slope_colorCCT_var").value)), set_slope_colorCCT: (Number (document.getElementById("set_slope_colorCCT_var").value))})
      let lighting_parameters3 = TimeGiver({wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_whiteCCT: (Number (document.getElementById("max_whiteCCT_var").value)), min_whiteCCT: (Number (document.getElementById("min_whiteCCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_whiteCCT: rise_length_whiteCCT_var, set_length_whiteCCT: set_length_whiteCCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_whiteCCT: (Number (document.getElementById("rise_slope_whiteCCT_var").value)), set_slope_whiteCCT: (Number (document.getElementById("set_slope_whiteCCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value)), altitude: (Number (document.getElementById("alt_var").value)), azimuth: (Number (document.getElementById("az_var").value)), min_sun_rad: (Number (document.getElementById("min_sun_rad_var").value)), range_sun_rad: (Number (document.getElementById("range_sun_rad_var").value)), lat: (Number (document.getElementById("lat_var").value)), long: (Number (document.getElementById("long_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), localvalues: local_var, max_colorCCT: (Number (document.getElementById("max_colorCCT_var").value)), min_colorCCT: (Number (document.getElementById("min_colorCCT_var").value)), rise_length_colorCCT: rise_length_colorCCT_var, set_length_colorCCT: set_length_colorCCT_var, rise_slope_colorCCT: (Number (document.getElementById("rise_slope_colorCCT_var").value)), set_slope_colorCCT: (Number (document.getElementById("set_slope_colorCCT_var").value))})
      var c = document.getElementById("visualizer");
      var ctx = c.getContext("2d");
      ctx.beginPath();
      ctx.font = "30px Arial";
      ctx.fillStyle = "black";
      ctx.fillText("🌞", ((wake_time_hm/2)-20), (274-lighting_parameters.bright_int_ret));
      ctx.fillText("🌝", ((bed_time_hm/2)-25), (274-lighting_parameters2.bright_int_ret));
      ctx.fillText("🙌", ((hm/2)), (284-lighting_parameters3.bright_int_ret));

      var xyvis = document.getElementById("cie1931visualizer");
      var ctx_xyvis = xyvis.getContext("2d");
      var img = document.getElementById("cie1931visualizerpng");
      ctx_xyvis.drawImage(img, 0, 0, 480, 499);
      ctx_xyvis.fillStyle = "rgba(10, 10, 10, 0.5)";
      ctx_xyvis.fillRect(0, 0, 480, 499);
      return;}
}

function check() {
  if ((document.querySelector('#blueyellowactive:checked') !== null)) {
    /*document.getElementById("max_whiteCCT_var").value = 12000;
    document.getElementById("min_whiteCCT_var").value = 4000;
    var max_whiteCCT_output = document.getElementById("max_whiteCCT_label");
    max_whiteCCT_output.innerHTML = (12000);
    var min_whiteCCT_output = document.getElementById("min_whiteCCT_label");
    min_whiteCCT_output.innerHTML = (4000);*/
    blueyellowlinedrawer({time: 0});
} else if ((document.querySelector('#blueyellowactive:checked') === null)) {
    /*document.getElementById("max_whiteCCT_var").value = 6000;
    document.getElementById("min_whiteCCT_var").value = 2700;
    var max_whiteCCT_output = document.getElementById("max_whiteCCT_label");
    max_whiteCCT_output.innerHTML = (6000);
    var min_whiteCCT_output = document.getElementById("min_whiteCCT_label");
    min_whiteCCT_output.innerHTML = (2700);*/
    linedrawer({time: 0});}
  lineremover()}


function lineremover() {
  var c = document.getElementById("visualizer");
  var ctx = c.getContext("2d");
  ctx.clearRect(0, 0, 720, 274);
  ctx.fillStyle = "white";
  ctx.fillRect(0, 0, 720, 274);
  var d = document.getElementById("skyprojection");
  var ctx_proj = d.getContext("2d");
  ctx_proj.clearRect(0, 0, 180, 180);
  ctx_proj.fillStyle = "black";
  ctx_proj.fillRect(0, 0, 180, 180);

  var wake_time = (document.getElementById("wake_time_var").value);
  var wake_time_hh = (wake_time.slice(0,2));
  var wake_time_hh_sixty = (wake_time_hh * 60);
  var wake_time_mm = wake_time.slice(-2);
  var wake_time_hm = (Number(wake_time_hh_sixty) + Number(wake_time_mm));
  var bed_time = (document.getElementById("bed_time_var").value);
  var bed_time_hh = (bed_time.slice(0,2));
  var bed_time_hh_sixty = (bed_time_hh * 60);
  var bed_time_mm = bed_time.slice(-2);
  var bed_time_hm = (Number(bed_time_hh_sixty) + Number(bed_time_mm));
  var wake_offset = (Number(document.getElementById("wake_offset_var").value));
  var bed_offset = (Number(document.getElementById("bed_offset_var").value));
  var now = new Date(); //sets the variable now equal to the current date and time
  var hh = now.getHours(); //sets the variable hh equal to the number of hours that have passed since the day started.
  var hh_sixty = hh * 60; //sets the variable hh_sixty equal to the number of minutes in the day at the time of the last hour change.
  var mm = now.getMinutes(); //sets the variable mm equal to the number of minutes since the last hour
  var hm = hh_sixty + mm; //sets the variable hm equal to the total number of minutes that have passed since the day began.
  if (Number((document.getElementById("rise_length_bright_mult_var").value)) !== 0) {var rise_length_bright_var = ((document.getElementById("rise_length_bright_mult_var").value) + "x")} else {var rise_length_bright_var = (Number (document.getElementById("rise_length_bright_var").value))} 
  if (Number((document.getElementById("set_length_bright_mult_var").value)) !== 0) {var set_length_bright_var = ((document.getElementById("set_length_bright_mult_var").value) + "x")} else {var set_length_bright_var = (Number (document.getElementById("set_length_bright_var").value))}
  if (Number((document.getElementById("rise_length_whiteCCT_var").value)) == 0) {var rise_length_whiteCCT_var = ((document.getElementById("rise_length_whiteCCT_mult_var").value) + "x")} else {var rise_length_whiteCCT_var = (Number (document.getElementById("rise_length_whiteCCT_var").value))} 
  if (Number((document.getElementById("set_length_whiteCCT_var").value)) == 0) {var set_length_whiteCCT_var = ((document.getElementById("set_length_whiteCCT_mult_var").value) + "x")} else {var set_length_whiteCCT_var = (Number (document.getElementById("set_length_whiteCCT_var").value))}  
  if (Number((document.getElementById("rise_length_colorCCT_var").value)) == 0) {var rise_length_colorCCT_var = ((document.getElementById("rise_length_colorCCT_mult_var").value) + "x")} else {var rise_length_colorCCT_var = (Number (document.getElementById("rise_length_colorCCT_var").value))} 
  if (Number((document.getElementById("set_length_colorCCT_var").value)) == 0) {var set_length_colorCCT_var = ((document.getElementById("set_length_colorCCT_mult_var").value) + "x")} else {var set_length_colorCCT_var = (Number (document.getElementById("set_length_colorCCT_var").value))}  
  if (Number((document.getElementById("rise_length_scatdist_var").value)) == 0) {var rise_length_scatdist_var = ((document.getElementById("rise_length_scatdist_mult_var").value) + "x")} else {var rise_length_scatdist_var = (Number (document.getElementById("rise_length_scatdist_var").value))} 
  if (Number((document.getElementById("set_length_scatdist_var").value)) == 0) {var set_length_scatdist_var = ((document.getElementById("set_length_scatdist_mult_var").value) + "x")} else {var set_length_scatdist_var = (Number (document.getElementById("set_length_scatdist_var").value))}  
  if (Number((document.getElementById("rise_length_scatangshift_mult_var").value)) !== 0) {var rise_length_scatangshift_var = ((document.getElementById("rise_length_scatangshift_mult_var").value) + "x")} else {var rise_length_scatangshift_var = (Number (document.getElementById("rise_length_scatangshift_var").value))} 
  if (Number((document.getElementById("set_length_scatangshift_mult_var").value)) !== 0) {var set_length_scatangshift_var = ((document.getElementById("set_length_scatangshift_mult_var").value) + "x")} else {var set_length_scatangshift_var = (Number (document.getElementById("set_length_scatangshift_var").value))}
  if (Number((document.getElementById("rise_length_bright_yellow_mult_var").value)) !== 0) {var rise_length_bright_yellow_var = ((document.getElementById("rise_length_bright_yellow_mult_var").value) + "x")} else {var rise_length_bright_yellow_var = (Number (document.getElementById("rise_length_bright_yellow_var").value))} 
  if (Number((document.getElementById("set_length_bright_yellow_mult_var").value)) !== 0) {var set_length_bright_yellow_var = ((document.getElementById("set_length_bright_yellow_mult_var").value) + "x")} else {var set_length_bright_yellow_var = (Number (document.getElementById("set_length_bright_yellow_var").value))}
  if (Number((document.getElementById("rise_length_bright_blue_mult_var").value)) !== 0) {var rise_length_bright_blue_var = ((document.getElementById("rise_length_bright_blue_mult_var").value) + "x")} else {var rise_length_bright_blue_var = (Number (document.getElementById("rise_length_bright_blue_var").value))} 
  if (Number((document.getElementById("set_length_bright_blue_mult_var").value)) !== 0) {var set_length_bright_blue_var = ((document.getElementById("set_length_bright_blue_mult_var").value) + "x")} else {var set_length_bright_blue_var = (Number (document.getElementById("set_length_bright_blue_var").value))}
  if (document.getElementById('local').checked) {local_var = 1} else {local_var = 0}
  let lighting_parameters = TimeGiver({wake_time: wake_time_hm, bed_time: bed_time_hm, wake_offset: (Number (document.getElementById("wake_offset_var").value)), bed_offset: (Number (document.getElementById("bed_offset_var").value)), max_bright: (Number (document.getElementById("max_bright_var").value)), min_bright: (Number (document.getElementById("min_bright_var").value)), max_whiteCCT: (Number (document.getElementById("max_whiteCCT_var").value)), min_whiteCCT: (Number (document.getElementById("min_whiteCCT_var").value)), rise_length_bright: rise_length_bright_var, set_length_bright: set_length_bright_var, rise_length_whiteCCT: rise_length_whiteCCT_var, set_length_whiteCCT: set_length_whiteCCT_var, rise_slope_bright: (Number (document.getElementById("rise_slope_bright_var").value)), set_slope_bright: (Number (document.getElementById("set_slope_bright_var").value)), rise_slope_whiteCCT: (Number (document.getElementById("rise_slope_whiteCCT_var").value)), set_slope_whiteCCT: (Number (document.getElementById("set_slope_whiteCCT_var").value)), max_scatdist: (Number (document.getElementById("max_scatdist_var").value)), min_scatdist: (Number (document.getElementById("min_scatdist_var").value)), max_scatangshift: (Number (document.getElementById("max_scatangshift_var").value)), min_scatangshift: (Number (document.getElementById("min_scatangshift_var").value)), max_bright_blue: (Number (document.getElementById("max_bright_blue_var").value)), min_bright_blue: (Number (document.getElementById("min_bright_blue_var").value)), max_bright_yellow: (Number (document.getElementById("max_bright_yellow_var").value)), min_bright_yellow: (Number (document.getElementById("min_bright_yellow_var").value)), rise_length_scatdist: rise_length_scatdist_var, set_length_scatdist: set_length_scatdist_var, rise_length_scatangshift: rise_length_scatangshift_var, set_length_scatangshift: set_length_scatangshift_var, rise_length_bright_blue: rise_length_bright_blue_var, set_length_bright_blue: set_length_bright_blue_var, rise_length_bright_yellow: rise_length_bright_yellow_var, set_length_bright_yellow: set_length_bright_yellow_var, rise_slope_scatdist: (Number (document.getElementById("rise_slope_scatdist_var").value)), set_slope_scatdist: (Number (document.getElementById("set_slope_scatdist_var").value)), rise_slope_scatangshift: (Number (document.getElementById("rise_slope_scatangshift_var").value)), set_slope_scatangshift: (Number (document.getElementById("set_slope_scatangshift_var").value)), rise_slope_bright_yellow: (Number (document.getElementById("rise_slope_bright_yellow_var").value)), set_slope_bright_yellow: (Number (document.getElementById("set_slope_bright_yellow_var").value)), rise_slope_bright_blue: (Number (document.getElementById("rise_slope_bright_blue_var").value)), set_slope_bright_blue: (Number (document.getElementById("set_slope_bright_blue_var").value)), altitude: (Number (document.getElementById("alt_var").value)), azimuth: (Number (document.getElementById("az_var").value)), min_sun_rad: (Number (document.getElementById("min_sun_rad_var").value)), range_sun_rad: (Number (document.getElementById("range_sun_rad_var").value)), lat: (Number (document.getElementById("lat_var").value)), long: (Number (document.getElementById("long_var").value)), rise_max_bright_blue_alt: (Number (document.getElementById("rise_max_bright_blue_alt_var").value)), rise_min_bright_blue_alt: (Number (document.getElementById("rise_min_bright_blue_alt_var").value)), rise_max_bright_yellow_alt: (Number (document.getElementById("rise_max_bright_yellow_alt_var").value)), rise_min_bright_yellow_alt: (Number (document.getElementById("rise_min_bright_yellow_alt_var").value)), set_max_bright_blue_alt: (Number (document.getElementById("set_max_bright_blue_alt_var").value)), set_min_bright_blue_alt: (Number (document.getElementById("set_min_bright_blue_alt_var").value)), set_max_bright_yellow_alt: (Number (document.getElementById("set_max_bright_yellow_alt_var").value)), set_min_bright_yellow_alt: (Number (document.getElementById("set_min_bright_yellow_alt_var").value)), localvalues: local_var, max_colorCCT: (Number (document.getElementById("max_colorCCT_var").value)), min_colorCCT: (Number (document.getElementById("min_colorCCT_var").value)), rise_length_colorCCT: rise_length_colorCCT_var, set_length_colorCCT: set_length_colorCCT_var, rise_slope_colorCCT: (Number (document.getElementById("rise_slope_colorCCT_var").value)), set_slope_colorCCT: (Number (document.getElementById("set_slope_colorCCT_var").value))})
  var sunrise_time_mm = Math.floor(lighting_parameters.sunrise_ret%60)
  if (sunrise_time_mm <10){sunrise_time_mm = ("0" + sunrise_time_mm)}
  var sunrise_time_hh = (Math.floor(lighting_parameters.sunrise_ret/60))
  if (sunrise_time_hh <10){sunrise_time_hh = ("0" + sunrise_time_hh)}
  var sunrise_time = (sunrise_time_hh + ":" + sunrise_time_mm)
  if ((document.querySelector('#wakeatsunrise:checked') !== null)) {
    document.getElementById("wake_time_var").value = sunrise_time;
    document.getElementById("wake_time_var").disabled = true;
  } else {document.getElementById("wake_time_var").disabled = false;}
  var sunset_time_mm = Math.floor(lighting_parameters.sunset_ret%60)
  if (sunset_time_mm <10){sunset_time_mm = ("0" + sunset_time_mm)}
  var sunset_time_hh = (Math.floor(lighting_parameters.sunset_ret/60))
  if (sunset_time_hh <10){sunset_time_hh = ("0" + sunset_time_hh)}
  var sunset_time = (sunset_time_hh + ":" + sunset_time_mm)
  if ((document.querySelector('#bedatsunset:checked') !== null)) {
    document.getElementById("bed_time_var").value = sunset_time;
    document.getElementById("bed_time_var").disabled = true;
  } else {document.getElementById("bed_time_var").disabled = false;}
  if ((document.querySelector('#blueyellowactive:checked') !== null)) {
    //document.getElementById("max_bright_var").disabled = true;
    //document.getElementById("min_bright_var").disabled = true;
    //document.getElementById("rise_length_bright_var").disabled = true;  
    //document.getElementById("rise_length_bright_mult_var").disabled = true; 
    //document.getElementById("set_length_bright_var").disabled = true; 
    //document.getElementById("set_length_bright_mult_var").disabled = true;
    //document.getElementById("rise_slope_bright_var").disabled = true; 
    //document.getElementById("set_slope_bright_var").disabled = true;
    /*document.getElementById("simulated_time_var").disabled = false;
    document.getElementById("max_bright_yellow_var").disabled = false;
    document.getElementById("min_bright_yellow_var").disabled = false;
    document.getElementById("max_bright_blue_var").disabled = false;
    document.getElementById("min_bright_blue_var").disabled = false;
    document.getElementById("max_scatdist_var").disabled = false;
    document.getElementById("min_scatdist_var").disabled = false;
    document.getElementById("max_scatangshift_var").disabled = false;
    document.getElementById("min_scatangshift_var").disabled = false;    
    document.getElementById("rise_length_bright_yellow_var").disabled = false;
    document.getElementById("set_length_bright_yellow_var").disabled = false;
    document.getElementById("rise_length_bright_blue_var").disabled = false;
    document.getElementById("set_length_bright_blue_var").disabled = false;
    document.getElementById("rise_length_scatdist_mult_var").disabled = false;
    document.getElementById("set_length_scatdist_mult_var").disabled = false;
    document.getElementById("rise_length_scatangshift_var").disabled = false;
    document.getElementById("set_length_scatangshift_var").disabled = false;
    document.getElementById("rise_length_bright_yellow_mult_var").disabled = false;
    document.getElementById("set_length_bright_yellow_mult_var").disabled = false;
    document.getElementById("rise_length_bright_blue_mult_var").disabled = false;
    document.getElementById("set_length_bright_blue_mult_var").disabled = false;
    document.getElementById("rise_length_scatdist_var").disabled = false;
    document.getElementById("set_length_scatdist_var").disabled = false;
    document.getElementById("rise_length_scatangshift_mult_var").disabled = false;
    document.getElementById("set_length_scatangshift_mult_var").disabled = false;
    document.getElementById("rise_slope_scatdist_var").disabled = false;
    document.getElementById("set_slope_scatdist_var").disabled = false;
    document.getElementById("rise_slope_scatangshift_var").disabled = false;
    document.getElementById("set_slope_scatangshift_var").disabled = false;
    document.getElementById("rise_slope_bright_yellow_var").disabled = false;
    document.getElementById("set_slope_bright_yellow_var").disabled = false;
    document.getElementById("rise_slope_bright_blue_var").disabled = false;
    document.getElementById("set_slope_bright_blue_var").disabled = false;*/
    blueyellowlinedrawer({time: 0});
    //skyprojector()
} else if ((document.querySelector('#blueyellowactive:checked') === null)) {
    /*//document.getElementById("max_bright_var").disabled = false;
    //document.getElementById("min_bright_var").disabled = false;
    document.getElementById("simulated_time_var").disabled = true;
    document.getElementById("max_bright_yellow_var").disabled = true;
    document.getElementById("min_bright_yellow_var").disabled = true;
    document.getElementById("max_bright_blue_var").disabled = true;
    document.getElementById("min_bright_blue_var").disabled = true;
    document.getElementById("max_scatdist_var").disabled = true;
    document.getElementById("min_scatdist_var").disabled = true;
    document.getElementById("max_scatangshift_var").disabled = true;
    document.getElementById("min_scatangshift_var").disabled = true;    
    document.getElementById("rise_length_bright_yellow_var").disabled = true;
    document.getElementById("set_length_bright_yellow_var").disabled = true;
    document.getElementById("rise_length_bright_blue_var").disabled = true;
    document.getElementById("set_length_bright_blue_var").disabled = true;
    document.getElementById("rise_length_scatdist_mult_var").disabled = true;
    document.getElementById("set_length_scatdist_mult_var").disabled = true;
    document.getElementById("rise_length_scatangshift_var").disabled = true;
    document.getElementById("set_length_scatangshift_var").disabled = true;
    document.getElementById("rise_length_bright_yellow_mult_var").disabled = true;
    document.getElementById("set_length_bright_yellow_mult_var").disabled = true;
    document.getElementById("rise_length_bright_blue_mult_var").disabled = true;
    document.getElementById("set_length_bright_blue_mult_var").disabled = true;
    document.getElementById("rise_length_scatdist_var").disabled = true;
    document.getElementById("set_length_scatdist_var").disabled = true;
    document.getElementById("rise_length_scatangshift_mult_var").disabled = true;
    document.getElementById("set_length_scatangshift_mult_var").disabled = true;
    document.getElementById("rise_slope_scatdist_var").disabled = true;
    document.getElementById("set_slope_scatdist_var").disabled = true;
    document.getElementById("rise_slope_scatangshift_var").disabled = true;
    document.getElementById("set_slope_scatangshift_var").disabled = true;
    document.getElementById("rise_slope_bright_yellow_var").disabled = true;
    document.getElementById("set_slope_bright_yellow_var").disabled = true;
    document.getElementById("rise_slope_bright_blue_var").disabled = true;
    document.getElementById("set_slope_bright_blue_var").disabled = true;
    //document.getElementById("rise_length_bright_var").disabled = false;  
    //document.getElementById("rise_length_bright_mult_var").disabled = false; 
    //document.getElementById("set_length_bright_var").disabled = false; 
    //document.getElementById("set_length_bright_mult_var").disabled = false;
    //document.getElementById("rise_slope_bright_var").disabled = false; 
    //document.getElementById("set_slope_bright_var").disabled = false;*/
    linedrawer({time: 0})
    
    
    }

  //var scheduler = setInterval (lightchanger(), 3000); 

}




    </script>
    
</head>
<body>

<canvas class= "canvas" id="visualizer" width="720" height="274" onclick= "lineremover();">
Your browser does not support the canvas element.
</canvas>


<div>
    <p class="header">Welcome to TimeGiver's demo for Philips Hue smart lights<span id="IEexception">--DOES NOT WORK IN INTERNET EXPLORER</span></p>
    <p class="topleveltext">TimeGiver is a piece of computer code that builds smart lighting rhythms: 24-hour schedules that tell the lights how to change during the day to copy the sun in your location. The rhythm tells the lights how to rise in the morning, how to change colors during the day, and how to set in the evening. TimeGiver can use color lights placed around a room to copy the color of a clear sky at your location.  In nature, these kinds of changes in sunlight tell our brains when to have energy and when to feel sleepy. But humans today spend most of our time indoors, so our brains may get confused about when to be awake and when to be tired. By building a rhythm for indoor lights around your daily schedule and your local sunlight, TimeGiver may help you feel more alert during the day and sleep better at night. </p>
    <p class="topleveltext">TimeGiver has lots of settings that allow you to make your rhythm just right for you and your home. But all the settings have good defaults, so to get started all you need to do is pick times to wake up and go to sleep and to specify your approximate location. The box above shows your rhythm over 24 hours, starting at midnight. Taller lines are brighter, and the color of the lines is the real color that the lights will have at each moment. The sun and moon show your wake time and bed time and how bright your lights are at that moment. The person raising hands shows where you are in the rhythm right now. You can change the settings below and see the difference in your rhythm. Press the Start Demo button to set up your rhythm to work with your Philips Hue smart lights, and then use the list of lights that shows up to pick which of your lights you want to change and which you want to have turn on by themselves in the morning. The demo will only work as long as this page is open and your computer is awake and connected to your network, and lights will only follow the schedule when they are turned on. For more information about TimeGiver, check out: <a href="https://github.com/timotheonpaulonlee/TimeGiver" target="_blank"> TimeGiver on GitHub </a></p>
    <button class="topleveltext" type="button" id="startdemobutton" onclick="startdemo()">Start Demo</button>
    <button class="topleveltext" type="button" id="stopdemobutton" onclick="stopdemo()" disabled="true">Stop Demo</button>

    <p onclick="toggleelement('generalpurposesettings'); togglearrow('generalpurposesettingsuparrow'); togglearrow('generalpurposesettingsdownarrow');" class="settingheader1">General Purpose Rhythm Settings<span  id ="generalpurposesettingsuparrow" style="display: inline-block;">⬆</span><span  id ="generalpurposesettingsdownarrow" style="display: none;">⬇</span></p>
    <div id="generalpurposesettings" style="display: block;">

    <p onclick="toggleelement('generalpurposeimportantsettings'); togglearrow('generalpurposeimportantsettingsuparrow'); togglearrow('generalpurposeimportantsettingsdownarrow')" class="settingheader2">Settings most people may want to change<span  id ="generalpurposeimportantsettingsuparrow" style="display: inline-block;">⬆</span><span  id ="generalpurposeimportantsettingsdownarrow" style="display: none;">⬇</span></p>
    <div id="generalpurposeimportantsettings">

    <p class="settingheader3" onclick="toggleelement('lightlisttext'); togglearrow('lightlistuparrow'); togglearrow('lightlistdownarrow');">Hue Lights<span  id ="lightlistuparrow" style="display: inline-block;">⬆</span><span  id ="lightlistdownarrow" style="display: none;">⬇</span></p>
    <div id="lightlisttext"><p>Your Hue lights will appear here, allowing you to check next to the lights you want assigned to a particular color.<ul><div id="lightlist"></div></ul></p></div>
    
    <div class="slidecontainer"><label class="switch"><input class="topleveltext" type="checkbox" id="local" onchange="check()" checked><span class="toggle round"></span></label><div class="tooltip">Use Local Colors<span class="tooltiptext">Check this box to switch the display between setting the color of your lights based on the sun in your location versus your custom settings.  You should probably leave this box checked unless you have a schedule that differs dramatically from your local daylight hours.</span></div><br></div>
    <div class="slidecontainer"><label class="switch"><input class="topleveltext" type="checkbox" id="blueyellowactive" value="true" onchange="check()"><span class="toggle round"></span></label><div class="tooltip"> Display Sky Simulator Colors<span class="tooltiptext">Check this box to switch the display between showing the white and sky simulator values and to switch between color temperatures appropriate for white versus color lights.</span></div><br></div>
    <input type="time" id="wake_time_var" value="07:00" onchange="lineremover()"><div class="tooltip"> Wake Time</input><span class="tooltiptext">The time you actually plan to be awake and ready to get out of bed, allowing some time for the lights to wake you up.</span></div><label class="switch"><input class="topleveltext" type="checkbox" id="wakeatsunrise" value="true" onchange="lineremover()" checked><span class="toggle round"></span></label>Snap to Sunrise<br>
    <input type="time" id="bed_time_var" value="22:00" onchange="lineremover()"><div class="tooltip"> Bed Time</input><span class="tooltiptext">The time you actually plan to be in bed, allowing some time for the lights be dim before you go to bed.</span></div><label class="switch"><input class="topleveltext" type="checkbox" id="bedatsunset" value="true" onchange="lineremover()" checked><span class="toggle round"></span></label>Snap to Sunset</input><br>  
    <div class="slidecontainer"><input type="range" min="-89" max="89" value="0" step = "0.5" class="slider" id="lat_var" onchange="lineremover()"><div class="tooltip">Latitude: <span id="lat_label"></span> </input><span class="tooltiptext">Your approximate latitude in degrees east or west of the prime meridian, which passes through Western Europe and Western Africa.  If you don't know it, try Googling "latitude and longitude of [city nearest you]".</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-180" max="180" value="0" step = "0.5" class="slider" id="long_var" onchange="lineremover()"><div class="tooltip">Longitude: <span id="long_label"></span> </input><span class="tooltiptext">Your approximate longitude in degrees north or south of the equator.  If you don't know it, try Googling "latitude and longitude of [city nearest you]".</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="1" value="1" step = "0.01" class="slider" id="max_bright_var" onchange="lineremover()"><div class="tooltip">Maximum Brightness: <span id="max_bright_label"></span> %</input><span class="tooltiptext">The brightest you want your lights to get at midday, which is 100% for most lights.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="1" value="0.05" step = "0.01" class="slider" id="min_bright_var" onchange="lineremover()"><div class="tooltip">Minimum Brightness: <span id="min_bright_label"></span> %</input><span class="tooltiptext">The dimmest you want your lights to get in the late evening and overnight. Think of this as your nightlight level, just enough light to safely use the bathroom or grab a snack.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="1000" max="20000" value="6000" step = "100" class="slider" id="max_whiteCCT_var" onchange="lineremover()"><div class="tooltip">Maximum Color Temperature: <span id="max_whiteCCT_label"></span> K</input><span class="tooltiptext">The coolest (or bluest) you want your lights to get at midday. Higher is cooler, and most lights max out around 6500K.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="1000" max="20000" value="2700" step = "100" class="slider" id="min_whiteCCT_var" onchange="lineremover()"><div class="tooltip">Minimum Color Temperature: <span id="min_whiteCCT_label"></span> K</input><span class="tooltiptext">The warmest (or reddest) you want your lights to get in the mornings and evenings. Lower is warmer, and most lights bottom out around 2700K.</span></div></div><br>
    <p class="settingheader3" onclick="toggleelement('overridesensorlisttext'); togglearrow('overridesensorlistuparrow'); togglearrow('overridesensorlistdownarrow');">Override Switches<span  id ="overridesensorlistuparrow" style="display: none;">⬆</span><span  id ="overridesensorlistdownarrow" style="display: inline-block;">⬇</span></p>
    <div id="overridesensorlisttext" style="display: none;"><p>Your Hue Dimmer Switches and Lutron Auroras will appear here. Checking next to a switch will show you all the active lights on your rhythm, allowing you to check next to the lights you want to override with that switch. Pressing the up or down buttons on that switch or turning the dial will set those lights into an override mode, allowing the lights to be turned up or down as needed until the on or off button is pressed or an hour has passed.<div id="overridesensorlist"></div></p></div>

    </div>

    <p onclick="toggleelement('generalpurposeoptionalsettings'); togglearrow('generalpurposeoptionalsettingsuparrow'); togglearrow('generalpurposeoptionalsettingsdownarrow')" class="settingheader2">Settings some people may want to change<span  id ="generalpurposeoptionalsettingsuparrow" style="display: none;">⬆</span><span  id ="generalpurposeoptionalsettingsdownarrow" style="display: inline-block;">⬇</span></p>
    <div id="generalpurposeoptionalsettings" style="display: none;">
    <div class="slidecontainer"><input type="range" min="0" max="30" value="2" class="slider" id="transtime_var" onchange="lineremover()"><div class="tooltip">Transition Time: <span id="transtime_label"></span> seconds</input><span class="tooltiptext">The amount of time that it takes for lights to find their place in the schedule in seconds.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="60" value="0" class="slider" id="wake_offset_var" onchange="lineremover()"><div class="tooltip">Wake Offset: <span id="wake_offset_label"></span> minutes</input><span class="tooltiptext">How soon before your wake time should the sunrise start. This should be higher for deep sleepers and lower for light sleepers.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="60" value="0" class="slider" id="bed_offset_var" onchange="lineremover()"><div class="tooltip">Bed Offset: <span id="bed_offset_label"></span> minutes</input><span class="tooltiptext">How soon before your bed time should the sunset end. This should be higher for hard sleepers and lower for easy sleepers.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="180" value="45" step = "5" class="slider" id="rise_length_bright_var" onchange="lineremover()"><div class="tooltip">Sunrise Brightness Length: <span id="rise_length_bright_label"></span> minutes, or:   </input><span class="tooltiptext">How fast your lights get brighter in the morning in minutes from sunrise.</span></div><input type="range" min="0" max="1" value="0" step = "0.05" class="slider" id="rise_length_bright_mult_var" onchange="lineremover()"><div class="tooltip"><span id="rise_length_bright_mult_label"></span>x times half day length </input><span class="tooltiptext">How fast should your lights get brighter in the morning as a fraction of half of your day length.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="180" value="180" step = "5" class="slider" id="set_length_bright_var" onchange="lineremover()"><div class="tooltip">Sunset Brightness Length: <span id="set_length_bright_label"></span> minutes, or:   </input><span class="tooltiptext">How fast your light get dimmer in the evening in minutes from before sunset.</span></div><input type="range" min="0" max="1" value="0" step = "0.05" class="slider" id="set_length_bright_mult_var" onchange="lineremover()"><div class="tooltip"><span id="set_length_bright_mult_label"></span>x times half day length </input><span class="tooltiptext">How fast should your lights get dimmer in the evening as a fraction of half of your day length.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="1" value="1" step = "0.05" class="slider" id="rise_length_whiteCCT_mult_var" onchange="lineremover()"><div class="tooltip">Sunrise Color Temperature Length: <span id="rise_length_whiteCCT_mult_label"></span>x times half day length, or:   </input><span class="tooltiptext">How fast your lights go from warm to cool in the morning as a fraction of half your day length.</span></div><input type="range" min="0" max="180" value="0" step = "5" class="slider" id="rise_length_whiteCCT_var" onchange="lineremover()"><div class="tooltip"><span id="rise_length_whiteCCT_label"></span> minutes</input><span class="tooltiptext">How fast should your lights go from warm to cool in the morning in minutes from sunrise.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="1" value="1" step = "0.05" class="slider" id="set_length_whiteCCT_mult_var" onchange="lineremover()"><div class="tooltip">Sunset Color Temperature Length: <span id="set_length_whiteCCT_mult_label"></span>x times half day length, or:   </input><span class="tooltiptext">How fast your lights go from cool back to warm in the evening as a fraction of half your day length.</span></div><input type="range" min="0" max="180" value="0" step = "5" class="slider" id="set_length_whiteCCT_var" onchange="lineremover()"><div class="tooltip"><span id="set_length_whiteCCT_label"></span> minutes</input><span class="tooltiptext">How fast should your lights go from cool back to warm in the afternoon in minutes from before sunset.</span></div></div><br>
    </div>

    
    <p onclick="toggleelement('generalpurposeadvancedsettings'); togglearrow('generalpurposeadvanceduparrow'); togglearrow('generalpurposeadvanceddownarrow');" class="settingheader2">Settings few people may want to change<span  id ="generalpurposeadvanceduparrow" style="display: none;">⬆</span><span  id ="generalpurposeadvanceddownarrow" style="display: inline-block;">⬇</span></p>
    <div id="generalpurposeadvancedsettings" style="display: none;">
    <div class="slidecontainer"><input type="range" min="-100" max="100" value="0" step = "1" class="slider" id="rise_slope_bright_var" onchange="lineremover()"><div class="tooltip">Sunrise Brightness Slope: <span id="rise_slope_bright_label"></span></input><span class="tooltiptext">How fast your lights get brighter early in the morning compared to later. Higher numbers mean fast early sunrises that slow down later.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-100" max="100" value="0" step = "1" class="slider" id="set_slope_bright_var" onchange="lineremover()"><div class="tooltip">Sunset Brightness Slope: <span id="set_slope_bright_label"></span></input><span class="tooltiptext">How fast your lights get dimmer later in the evening compared to earlier. Higher numbers mean slow early sunsets that speed up later.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-100" max="100" value="0" step = "1" class="slider" id="rise_slope_whiteCCT_var" onchange="lineremover()"><div class="tooltip">Sunrise Color Temperature Slope: <span id="rise_slope_whiteCCT_label"></span></input><span class="tooltiptext">How fast your lights get cooler early in the morning compared to later. Higher numbers mean fast early sunrises that slow down later.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-100" max="100" value="0" step = "1" class="slider" id="set_slope_whiteCCT_var" onchange="lineremover()"><div class="tooltip">Sunset Color Temperature Slope: <span id="set_slope_whiteCCT_label"></span></input><span class="tooltiptext">How fast your lights get dimmer later in the evening compared to earlier. Higher numbers mean slow early sunsets that speed up later.</span></div></div><br>
    </div>
    </div>

    <p onclick="toggleelement('blueyellowsettings'); togglearrow('blueyellowsettingsuparrow'); togglearrow('blueyellowsettingsdownarrow');" class="settingheader1" style="white-space: nowrap;">Sky Simulator Settings <span  id ="blueyellowsettingsuparrow" style="display: none;">⬆</span><span  id ="blueyellowsettingsdownarrow" style="display: inline-block;">⬇</span></p>
    <div id="blueyellowsettings" style="display: none;">
    <p onclick="toggleelement('blueyellowimportantsettings'); togglearrow('blueyellowimportantsettingsuparrow'); togglearrow('blueyellowimportantsettingsdownarrow');" class="settingheader2">Settings most people may want to change<span  id ="blueyellowimportantsettingsuparrow" style="display: inline-block;">⬆</span><span  id ="blueyellowimportantsettingsdownarrow" style="display: none;">⬇</span></p>
    <div id="blueyellowimportantsettings">

    <div class="slidecontainer"><input type="range" min="0" max="1" value="1" step = "0.01" class="slider" id="max_bright_yellow_var" onchange="lineremover()"><div class="tooltip">Maximum Yellow Brightness: <span id="max_bright_yellow_label"></span> %</input><span class="tooltiptext">The brightest you want your yellow lights to get at midday, which is 100% for most lights. Setting this higher than the maximum blue brightness mimics direct sunlight at midday.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="1" value="0.25" step = "0.01" class="slider" id="min_bright_yellow_var" onchange="lineremover()"><div class="tooltip">Minimum Yellow Brightness: <span id="min_bright_yellow_label"></span> %</input><span class="tooltiptext">The dimmest you want your yellow lights to get in the late evening and overnight. Think of this as your nightlight level, just enough light to safely use the bathroom or grab a snack. Setting this higher than the minimum blue brightness mimics direct sunlight in the late evening.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="1" value="1" step = "0.01" class="slider" id="max_bright_blue_var" onchange="lineremover()"><div class="tooltip">Maximum Blue Brightness: <span id="max_bright_blue_label"></span> %</input><span class="tooltiptext">The brightest you want your blue lights to get at midday, which is 100% for most lights. Setting this higher than the maximum yellow brightness mimics indirect sunlight at midday.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="1" value="0.01" step = "0.01" class="slider" id="min_bright_blue_var" onchange="lineremover()"><div class="tooltip">Minimum Blue Brightness: <span id="min_bright_blue_label"></span> %</input><span class="tooltiptext">The dimmest you want your blue lights to get in the late evening and overnight. Think of this as your nightlight level, just enough light to safely use the bathroom or grab a snack. Setting this higher than the minimum yellow brightness mimics indirect sunlight in the late evening.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="1000" max="20000" value="12000" step = "100" class="slider" id="max_colorCCT_var" onchange="lineremover()"><div class="tooltip">Maximum Sky Color Temperature: <span id="max_colorCCT_label"></span> K</input><span class="tooltiptext">The coolest (or bluest) you want your lights to get at midday. Higher is cooler, and most lights max out around 6500K.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="1000" max="20000" value="4000" step = "100" class="slider" id="min_colorCCT_var" onchange="lineremover()"><div class="tooltip">Minimum Sky Color Temperature: <span id="min_colorCCT_label"></span> K</input><span class="tooltiptext">The warmest (or reddest) you want your lights to get in the mornings and evenings. Lower is warmer, and most lights bottom out around 2700K.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="20000" value="7500" step = "100" class="slider" id="max_scatdist_var" onchange="lineremover()"><div class="tooltip">Maximum Sky Simulator Scatter Distance: <span id="max_scatdist_label"></span> K</input><span class="tooltiptext">How extreme the contrast between your blue and yellow lights will be at midday. Higher numbers make for more saturated colors at midday.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="20000" value="2000" step = "100" class="slider" id="min_scatdist_var" onchange="lineremover()"><div class="tooltip">Minimum Sky Simulator Scatter Distance: <span id="min_scatdist_label"></span> K</input><span class="tooltiptext">How extreme the contrast between your blue and yellow lights will be in the early morning and late evening. Higher numbers make for more saturated colors at sunrise and sunset.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-30" max="60" value="33" step = "1" class="slider" id="max_scatangshift_var" onchange="lineremover()"><div class="tooltip">Maximum Sky Simulator Angle Shift: <span id="max_scatangshift_label"></span> degrees</input><span class="tooltiptext">How much the yellow lights are shifted toward deeper yellows and your blue lights are shifted toward deeper blues in the early morning and late evening. Higher numbers make for more yellow sunsets, but numbers too high can bring out greens and purples beyond a typical sunset. Lower numbers make for more white or pink sunsets.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-30" max="60" value="13" step = "1" class="slider" id="min_scatangshift_var" onchange="lineremover()"><div class="tooltip">Minimum Sky Simulator Angle Shift: <span id="min_scatangshift_label"></span> degrees</input><span class="tooltiptext">How much the yellow lights are shifted toward deeper yellows and your blue lights are shifted toward deeper blues around midday. Higher numbers make for more dramatic, colorful middays, as in the region around a wildfire. This should usually be left at 0.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="90" value="30" step = "5" class="slider" id="min_sun_rad_var" onchange="lineremover()"><div class="tooltip">Minimum Sun Radius: <span id="min_sun_rad_label"></span> degrees</input><span class="tooltiptext">The minimum radius of the sun in degrees at its zenith.  Higher numbers may be required in sky projection systems with less dense light placement.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-30" max="90" value="30" step = "5" class="slider" id="range_sun_rad_var" onchange="lineremover()"><div class="tooltip">Additional Sun Radius: <span id="range_sun_rad_label"></span> degrees</input><span class="tooltiptext">The additional radius of the sun in degrees at sunrise and sunset beyond the minimum above.  Higher numbers may be required in sky projection systems with less dense light placement.</span></div></div><br>
    </div>

    <p onclick="toggleelement('blueyellowoptionalsettings'); togglearrow('blueyellowoptionalsettingsuparrow'); togglearrow('blueyellowoptionalsettingsdownarrow');" class="settingheader2">Settings some people may want to change<span  id ="blueyellowoptionalsettingsuparrow" style="display: none;">⬆</span><span  id ="blueyellowoptionalsettingsdownarrow" style="display: inline-block;">⬇</span></p>
    <div id="blueyellowoptionalsettings" style="display: none;">
    <div class="slidecontainer"><input type="range" min="0" max="180" value="30" step = "5" class="slider" id="rise_length_bright_yellow_var" onchange="lineremover()"><div class="tooltip">Sunrise Yellow Brightness Length: <span id="rise_length_bright_yellow_label"></span> minutes, or:   </input><span class="tooltiptext">How fast your yellow lights get brighter in the morning in minutes from sunrise. Setting this lower than the sunrise blue brightness length makes for a more dramatic golden hour around sunrise.</span></div><input type="range" min="0" max="1" value="0" step = "0.05" class="slider" id="rise_length_bright_yellow_mult_var" onchange="lineremover()"><div class="tooltip"><span id="rise_length_bright_yellow_mult_label"></span>x times half day length </input><span class="tooltiptext">How fast your yellow lights get brighter in the morning as a fraction of the half day length. Setting this lower than the sunrise blue brightness length makes for a more dramatic golden hour around sunrise.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="180" value="90" step = "5" class="slider" id="set_length_bright_yellow_var" onchange="lineremover()"><div class="tooltip">Sunset Yellow Brightness Length: <span id="set_length_bright_yellow_label"></span> minutes, or:   </input><span class="tooltiptext">How fast your yellow lights get dimmer in the evening in minutes from before sunset. Setting this lower than the sunset blue brightness length makes for a more dramatic golden hour around sunset.</span></div><input type="range" min="0" max="1" value="0" step = "0.05" class="slider" id="set_length_bright_yellow_mult_var" onchange="lineremover()"><div class="tooltip"><span id="set_length_bright_yellow_mult_label"></span>x times half day length </input><span class="tooltiptext">How fast your yellow lights get dimmer in the evening as a fraction of the half day length. Setting this lower than the sunset blue brightness length makes for a more dramatic golden hour around sunset.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="180" value="60" step = "5" class="slider" id="rise_length_bright_blue_var" onchange="lineremover()"><div class="tooltip">Sunrise Blue Brightness Length: <span id="rise_length_bright_blue_label"></span> minutes, or:   </input><span class="tooltiptext">How fast your blue lights get brighter in the morning in minutes from sunrise. Setting this higher than the sunrise yellow brightness length makes for a more dramatic golden hour around sunrise.</span></div><input type="range" min="0" max="1" value="0" step = "0.05" class="slider" id="rise_length_bright_blue_mult_var" onchange="lineremover()"><div class="tooltip"><span id="rise_length_bright_blue_mult_label"></span>x times half day length </input><span class="tooltiptext">How fast your blue lights get brighter in the morning as a fraction of the half day length. Setting this higher than the sunrise yellow brightness length makes for a more dramatic golden hour around sunrise.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="180" value="180" step = "5" class="slider" id="set_length_bright_blue_var" onchange="lineremover()"><div class="tooltip">Sunset Blue Brightness Length: <span id="set_length_bright_blue_label"></span> minutes, or:   </input><span class="tooltiptext">How fast your blue lights get dimmer in the evening in minutes from before sunset. Setting this higher than the sunset yellow brightness length makes for a more dramatic golden hour around sunset.</span></div><input type="range" min="0" max="1" value="0" step = "0.05" class="slider" id="set_length_bright_blue_mult_var" onchange="lineremover()"><div class="tooltip"><span id="set_length_bright_blue_mult_label"></span>x times half day length </input><span class="tooltiptext">How fast your blue lights get dimmer in the evening in minutes as a fraction of the half day length. Setting this higher than the sunset yellow brightness length makes for a more dramatic golden hour around sunset.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="1" value="1" step = "0.05" class="slider" id="rise_length_colorCCT_mult_var" onchange="lineremover()"><div class="tooltip">Sunrise Color Temperature Length: <span id="rise_length_colorCCT_mult_label"></span>x times half day length, or:   </input><span class="tooltiptext">How fast your lights go from warm to cool in the morning as a fraction of half your day length.</span></div><input type="range" min="0" max="180" value="0" step = "5" class="slider" id="rise_length_colorCCT_var" onchange="lineremover()"><div class="tooltip"><span id="rise_length_colorCCT_label"></span> minutes</input><span class="tooltiptext">How fast should your lights go from warm to cool in the morning in minutes from sunrise.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="1" value="1" step = "0.05" class="slider" id="set_length_colorCCT_mult_var" onchange="lineremover()"><div class="tooltip">Sunset Color Temperature Length: <span id="set_length_colorCCT_mult_label"></span>x times half day length, or:   </input><span class="tooltiptext">How fast your lights go from cool back to warm in the evening as a fraction of half your day length.</span></div><input type="range" min="0" max="180" value="0" step = "5" class="slider" id="set_length_colorCCT_var" onchange="lineremover()"><div class="tooltip"><span id="set_length_colorCCT_label"></span> minutes</input><span class="tooltiptext">How fast should your lights go from cool back to warm in the afternoon in minutes from before sunset.</span></div></div><br>
    </div>

    <p onclick="toggleelement('blueyellowadvancedsettings'); togglearrow('blueyellowadvancedsettingsuparrow'); togglearrow('blueyellowadvancedsettingsdownarrow');" class="settingheader2">Settings few people may want to change<span  id ="blueyellowadvancedsettingsuparrow" style="display: none;">⬆</span><span  id ="blueyellowadvancedsettingsdownarrow" style="display: inline-block;">⬇</span></p>
    <div id="blueyellowadvancedsettings" style="display: none;">
    <div class="slidecontainer"><input type="range" min="-30" max="30" value="17.5" step = "0.5" class="slider" id="rise_max_bright_blue_alt_var" onchange="lineremover()"><div class="tooltip">Rising Sun Altitude at Maximum Blue Brightness: <span id="rise_max_bright_blue_alt_label"></span> degrees</input><span class="tooltiptext">The sun altitude during sunrise at which the blue part of the sky reaches its maximum brightness.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-30" max="30" value="2.5" step = "0.5" class="slider" id="rise_min_bright_blue_alt_var" onchange="lineremover()"><div class="tooltip">Rising Sun Altitude at Minimum Blue Brightness: <span id="rise_min_bright_blue_alt_label"></span> degrees</input><span class="tooltiptext">The sun altitude during sunrise at which the blue part of the sky starts to get brighter.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-30" max="30" value="15" step = "0.5" class="slider" id="rise_max_bright_yellow_alt_var" onchange="lineremover()"><div class="tooltip">Rising Sun Altitude at Maximum Yellow Brightness: <span id="rise_max_bright_yellow_alt_label"></span> degrees</input><span class="tooltiptext">The sun altitude during sunrise at which the yellow part of the sky reaches its maximum brightness.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-30" max="30" value="5" step = "0.5" class="slider" id="rise_min_bright_yellow_alt_var" onchange="lineremover()"><div class="tooltip">Rising Sun Altitude at Minimum Yellow Brightness: <span id="rise_min_bright_yellow_alt_label"></span> degrees</input><span class="tooltiptext">The sun altitude during sunrise at which the yellow part of the sky starts to get brighter.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-30" max="30" value="25" step = "0.5" class="slider" id="set_max_bright_blue_alt_var" onchange="lineremover()"><div class="tooltip">Setting Sun Altitude at Maximum Blue Brightness: <span id="set_max_bright_blue_alt_label"></span> degrees</input><span class="tooltiptext">The sun altitude during sunset at which the blue part of the sky starts to get dimmer.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-30" max="30" value="-5" step = "0.5" class="slider" id="set_min_bright_blue_alt_var" onchange="lineremover()"><div class="tooltip">Setting Sun Altitude at Minimum Blue Brightness: <span id="set_min_bright_blue_alt_label"></span> degrees</input><span class="tooltiptext">The sun altitude during sunset at which the blue part of the sky reaches its minimum brightness.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-30" max="30" value="20" step = "0.5" class="slider" id="set_max_bright_yellow_alt_var" onchange="lineremover()"><div class="tooltip">Setting Sun Altitude at Maximum Yellow Brightness: <span id="set_max_bright_yellow_alt_label"></span> degrees</input><span class="tooltiptext">The sun altitude during sunset at which the yellow part of the sky starts to get dimmer.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-30" max="30" value="0" step = "0.5" class="slider" id="set_min_bright_yellow_alt_var" onchange="lineremover()"><div class="tooltip">Setting Sun Altitude at Minimum Yellow Brightness: <span id="set_min_bright_yellow_alt_label"></span> degrees</input><span class="tooltiptext">The sun altitude during sunset at which the yellow part of the sky reaches its minimum brightness.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="90" value="45" step = "5" class="slider" id="alt_var" onchange="lineremover()"><div class="tooltip">Simulated Altitude: <span id="alt_label"></span> degrees</input><span class="tooltiptext">The simulated altitude in degrees of the point in the sky being simulated.  The zenith or top of the sky is 90 degrees while the horizon is 0 degrees.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="360" value="0" step = "5" class="slider" id="az_var" onchange="lineremover()"><div class="tooltip">Simulated Azimuth: <span id="az_label"></span> degrees</input><span class="tooltiptext">The simulated azimuth in degrees clockwise from north in of the point in the sky being simulated.  Due north is 0 degrees, due east is 90 degrees, due south is 180 degrees, and due west is 270 degrees.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="1" value="1" step = "0.05" class="slider" id="rise_length_scatdist_mult_var" onchange="lineremover()"><div class="tooltip">Sunrise Sky Simulator Scatter Distance Length: <span id="rise_length_scatdist_mult_label"></span>x times half day length, or:   </input><span class="tooltiptext">How fast the contrast between your blue and yellow lights gets more extreme in the morning as a fraction of half day length. Higher numbers make for a smoother transition between the saturated colors of sunrise and the paler colors of midday.</span></div><input type="range" min="0" max="180" value="0" step = "5" class="slider" id="rise_length_scatdist_var" onchange="lineremover()"><div class="tooltip"><span id="rise_length_scatdist_label"></span> minutes</input><span class="tooltiptext">How fast the contrast between your blue and yellow lights gets more extreme in the morning in minutes from sunrise. Higher numbers make for a smoother transition between the saturated colors of sunrise and sunset and the paler colors of midday.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="1" value="1" step = "0.05" class="slider" id="set_length_scatdist_mult_var" onchange="lineremover()"><div class="tooltip">Sunset Sky Simulator Scatter Distance Length: <span id="set_length_scatdist_mult_label"></span>x times half day length, or:   </input><span class="tooltiptext">How fast the contrast between your blue and yellow lights gets less extreme in the evening as a fraction of half day length. Higher numbers make for a smoother transition between the paler colors of midday and the saturated colors of sunset.</span></div><input type="range" min="0" max="180" value="0" step = "5" class="slider" id="set_length_scatdist_var" onchange="lineremover()"><div class="tooltip"><span id="set_length_scatdist_label"></span> minutes</input><span class="tooltiptext">How fast the contrast between your blue and yellow lights gets less extreme in the evening in minutes from before sunset. Higher numbers make for a smoother transition between the paler colors of midday and the saturated colors of sunset.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="300" value="120" step = "5" class="slider" id="rise_length_scatangshift_var" onchange="lineremover()"><div class="tooltip">Sunrise Sky Simulator Angle Shift Length: <span id="rise_length_scatangshift_label"></span> minutes, or:   </input><span class="tooltiptext">How fast the shift of your yellow lights toward deeper yellows and your blue lights toward deeper blues fades in the morning in minutes from sunrise. Higher numbers make for a longer morning golden hour.</span></div><input type="range" min="0" max="1" value="0" step = "0.05" class="slider" id="rise_length_scatangshift_mult_var" onchange="lineremover()"><div class="tooltip"><span id="rise_length_scatangshift_mult_label"></span>x times half day length </input><span class="tooltiptext">How fast the shift of your yellow lights toward deeper yellows and your blue lights toward deeper blues fades in the morning as a fraction of half day length. Higher numbers make for a longer morning golden hour.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="0" max="300" value="240" step = "5" class="slider" id="set_length_scatangshift_var" onchange="lineremover()"><div class="tooltip">Sunset Sky Simulator Angle Shift Length: <span id="set_length_scatangshift_label"></span> minutes, or:   </input><span class="tooltiptext">How fast the shift of your yellow lights toward deeper yellows and your blue lights toward deeper blues increases in the evening in minutes from before sunset. Higher numbers make for a longer afternoon golden hour.</span></div><input type="range" min="0" max="1" value="0" step = "0.05" class="slider" id="set_length_scatangshift_mult_var" onchange="lineremover()"><div class="tooltip"><span id="set_length_scatangshift_mult_label"></span>x times half day length </input><span class="tooltiptext">How fast the shift of your yellow lights toward deeper yellows and your blue lights toward deeper blues increases in the evening as a fraction of half day length. Higher numbers make for a longer afternoon golden hour.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-100" max="100" value="0" step = "1" class="slider" id="rise_slope_scatdist_var" onchange="lineremover()"><div class="tooltip">Sunrise Sky Simulator Scatter Distance Slope: <span id="rise_slope_scatdist_label"></span></input><span class="tooltiptext">How fast the contrast between your blue and yellow lights gets more extreme early in the morning compared to later. Higher numbers mean more pronounced increase in saturation of colors earlier in the morning and less change around midday.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-100" max="100" value="0" step = "1" class="slider" id="set_slope_scatdist_var" onchange="lineremover()"><div class="tooltip">Sunset Sky Simulator Scatter Distance Slope: <span id="set_slope_scatdist_label"></span></input><span class="tooltiptext">How fast the contrast between your blue and yellow lights gets less extreme late in the afternoon compared to earlier. Higher numbers mean more pronounced decrease in saturation of colors later in the evening and less change around midday.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-100" max="100" value="0" step = "1" class="slider" id="rise_slope_scatangshift_var" onchange="lineremover()"><div class="tooltip">Sunrise Sky Simulator Angle Shift Slope: <span id="rise_slope_scatangshift_label"></span></input><span class="tooltiptext">How fast the shift of your yellow lights toward deeper yellows and your blue lights toward deeper blues decreases early in the morning compared to later. Higher numbers mean shorter golden hours in the morning without changing coloration at midday.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-100" max="100" value="0" step = "1" class="slider" id="set_slope_scatangshift_var" onchange="lineremover()"><div class="tooltip">Sunset Sky Simulator Angle Shift Slope: <span id="set_slope_scatangshift_label"></span></input><span class="tooltiptext">How fast the shift of your yellow lights toward deeper yellows and your blue lights toward deeper blues increases late in the evening compared to earlier. Higher numbers mean shorter golden hours in the evening without changing coloration at midday.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-100" max="100" value="0" step = "1" class="slider" id="rise_slope_bright_yellow_var" onchange="lineremover()"><div class="tooltip">Sunrise Yellow Brightness Slope: <span id="rise_slope_bright_yellow_label"></span></input><span class="tooltiptext">How fast your yellow lights get brighter early in the morning compared to later. Higher numbers mean fast early sunrises that slow down later.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-100" max="100" value="0" step = "1" class="slider" id="set_slope_bright_yellow_var" onchange="lineremover()"><div class="tooltip">Sunset Yellow Brightness Slope: <span id="set_slope_bright_yellow_label"></span></input><span class="tooltiptext">How fast your yellow lights get dimmer later in the evening compared to earlier. Higher numbers mean slow early sunsets that speed up later.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-100" max="100" value="0" step = "1" class="slider" id="rise_slope_bright_blue_var" onchange="lineremover()"><div class="tooltip">Sunrise Blue Brightness Slope: <span id="rise_slope_bright_blue_label"></span></input><span class="tooltiptext">How fast your blue lights get brighter early in the morning compared to later. Higher numbers mean fast early sunrises that slow down later.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-100" max="100" value="0" step = "1" class="slider" id="set_slope_bright_blue_var" onchange="lineremover()"><div class="tooltip">Sunset Blue Brightness Slope: <span id="set_slope_bright_blue_label"></span></input><span class="tooltiptext">How fast your blue lights get dimmer later in the evening compared to earlier. Higher numbers mean slow early sunsets that speed up later.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-100" max="100" value="0" step = "1" class="slider" id="rise_slope_colorCCT_var" onchange="lineremover()"><div class="tooltip">Sunrise Color Temperature Slope: <span id="rise_slope_colorCCT_label"></span></input><span class="tooltiptext">How fast your lights get cooler early in the morning compared to later. Higher numbers mean fast early sunrises that slow down later.</span></div></div><br>
    <div class="slidecontainer"><input type="range" min="-100" max="100" value="0" step = "1" class="slider" id="set_slope_colorCCT_var" onchange="lineremover()"><div class="tooltip">Sunset Color Temperature Slope: <span id="set_slope_colorCCT_label"></span></input><span class="tooltiptext">How fast your lights get dimmer later in the evening compared to earlier. Higher numbers mean slow early sunsets that speed up later.</span></div></div><br>
    
    <p onclick="toggleelement('cie1931vizualizersettings'); togglearrow('cie1931vizualizersettingsuparrow'); togglearrow('cie1931vizualizersettingsdownarrow');" class="settingheader3">CIE 1931 Chromaticity Diagram Visualizer<span  id ="cie1931vizualizersettingsuparrow" style="display: none;">⬆</span><span  id ="cie1931vizualizersettingsdownarrow" style="display: inline-block;">⬇</span></p>
    <div id="cie1931vizualizersettings" style="display: none;">
    <img id="cie1931visualizerpng" src="cie1931visualizer480.png" alt="CIE 1931 XY diagram" width="480" height="499" style="display: none;">
    <canvas class="canvas" id="cie1931visualizer" width="480" height="499" style="display: inline-block;">Your browser does not support the canvas element.</canvas><br>
    <input type="time" id="simulated_time_var" value="00:00" onchange="lineremover()" style="display: inline-block; margin-left: 4rem;"><div class="tooltip">  Visualizer Time</input><span class="tooltiptext">The simulated time for use with the CIE 1931 Visualizer, which shows the xy coordinates of the blue point on the left, a white point in the middle, and the yellow point on the right for your understanding of how the sunlight simulator works.</span></div><br></div>
    </div>
    <canvas class="canvas" id="skyprojection" width="180" height="180" style="display: none;">Your browser does not support the canvas element.</canvas><br>
    </div>
 
    <button class="topleveltext" type="button" id="savesettingsbutton" onclick="savesettings()">Save Settings</button>
    <button class="topleveltext" type="button" id="restoresettingsbutton" onclick="restoresettings()">Restore Saved Settings</button>

    <p onclick="toggleelement('attributionssettings'); togglearrow('attributionssettingsuparrow'); togglearrow('attributionssettingsdownarrow');" class="settingheader1">Attributions<span  id="attributionssettingsuparrow" style="display: inline-block;">⬆</span><span  id="attributionssettingsdownarrow" style="display: none;">⬇</span></p>
    <p class="topleveltext" id="attributionssettings">TimeGiver is based on the research and development work of Timothy Lee, a 4th-year medical student at Mayo Clinic Alix School of Medicine going into academic psychiatry with strong interests in mood disorders, circadian rhythm disorders, and the importance of regular, restorative sleep to good mental health. Questions and comments can be directed to Timothy Lee on <a href= "https://github.com/timotheonpaulonlee" target="_blank">Github</a> or <a href= "https://linkedin.com/in/timothy-paul-lee/" target="_blank">LinkedIn</a>.</p>

    <p onclick="toggleelement('disclaimersettings'); togglearrow('disclaimersettingsuparrow'); togglearrow('disclaimersettingsdownarrow');" class="settingheader1">License & Disclaimer<span  id="disclaimersettingsuparrow" style="display: none;">⬆</span><span  id="disclaimersettingsdownarrow" style="display: inline-block;">⬇</span></p>
    <div id="disclaimersettings" style="display: none;"><p class="topleveltext">MIT License Copyright (c) 2021 Timothy Lee</p>
    <p class="topleveltext">Permission is hereby granted, free of charge, to any person obtaining a copy
      of this software and associated documentation files (the "Software"), to deal
      in the Software without restriction, including without limitation the rights
      to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
      copies of the Software, and to permit persons to whom the Software is
      furnished to do so, subject to the following conditions:</p>
    <p class="topleveltext">The above attribution and copyright notice and this permission notice shall be included in all
      copies or substantial portions of the Software.</p>
    <p class="topleveltext">THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
      IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
      FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
      AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
      LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
      OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
      SOFTWARE.</p>
    <p class="topleveltext">This demo also relies heavily on <a href= "https://github.com/timotheonpaulonlee/jshue" target="_blank">jshue</a>, an open-source javascript API wrapper for Philips Hue
      developed by John Peloquin available under the <a href= "https://github.com/blargoner/jshue/blob/master/LICENSE" target="_blank">MIT License</a> as shown above, Copyright 2013 - 2017, John Peloquin 
      and the jsHue contributors.
    <p class="topleveltext">The CIE 1931 Chromaticity Diagram was created and shared on Wikimedia by <a href= "https://en.wikipedia.org/wiki/User:Paulschou" target="_blank">Paulschou</a> in 2009 and is available under the GNU Free Documentation License described on its <a href= "https://commons.wikimedia.org/wiki/File:Chromaticity_diagram_full.pdf" target="_blank">Wikimedia page</a>.</p>
    </div>
    <audio id="soundeffect">
      <source src="soundeffect.ogg" type="audio/ogg">
      <source src="soundeffect.mp3" type="audio/mpeg">
      Your browser does not support audio.
    </audio>
</div>


<script>
    var result = IEdetection();
    if (result.includes("Not")) {var IEexception_output = document.getElementById("IEexception");
    IEexception_output.innerHTML = "";}
    

    var transtime_slider = document.getElementById("transtime_var");
    var transtime_output = document.getElementById("transtime_label");
    transtime_output.innerHTML = transtime_slider.value;
    transtime_slider.oninput = function() {transtime_output.innerHTML = this.value;}

    var wake_offset_slider = document.getElementById("wake_offset_var");
    var wake_offset_output = document.getElementById("wake_offset_label");
    wake_offset_output.innerHTML = wake_offset_slider.value;
    wake_offset_slider.oninput = function() {wake_offset_output.innerHTML = this.value;}

    var bed_offset_slider = document.getElementById("bed_offset_var");
    var bed_offset_output = document.getElementById("bed_offset_label");
    bed_offset_output.innerHTML = bed_offset_slider.value;
    bed_offset_slider.oninput = function() {bed_offset_output.innerHTML = this.value;}

    var max_bright_slider = document.getElementById("max_bright_var");
    var max_bright_output = document.getElementById("max_bright_label");
    max_bright_output.innerHTML = (max_bright_slider.value * 100);
    max_bright_slider.oninput = function() {max_bright_output.innerHTML = (Math.round(this.value * 100));}

    var min_bright_slider = document.getElementById("min_bright_var");
    var min_bright_output = document.getElementById("min_bright_label");
    min_bright_output.innerHTML = (min_bright_slider.value * 100);
    min_bright_slider.oninput = function() {min_bright_output.innerHTML = (Math.round(this.value * 100));}

    var max_whiteCCT_slider = document.getElementById("max_whiteCCT_var");
    var max_whiteCCT_output = document.getElementById("max_whiteCCT_label");
    max_whiteCCT_output.innerHTML = (max_whiteCCT_slider.value);
    max_whiteCCT_slider.oninput = function() {max_whiteCCT_output.innerHTML = (Math.round(this.value));}

    var min_whiteCCT_slider = document.getElementById("min_whiteCCT_var");
    var min_whiteCCT_output = document.getElementById("min_whiteCCT_label");
    min_whiteCCT_output.innerHTML = (min_whiteCCT_slider.value);
    min_whiteCCT_slider.oninput = function() {min_whiteCCT_output.innerHTML = (Math.round(this.value));}

    var max_colorCCT_slider = document.getElementById("max_colorCCT_var");
    var max_colorCCT_output = document.getElementById("max_colorCCT_label");
    max_colorCCT_output.innerHTML = (max_colorCCT_slider.value);
    max_colorCCT_slider.oninput = function() {max_colorCCT_output.innerHTML = (Math.round(this.value));}

    var min_colorCCT_slider = document.getElementById("min_colorCCT_var");
    var min_colorCCT_output = document.getElementById("min_colorCCT_label");
    min_colorCCT_output.innerHTML = (min_colorCCT_slider.value);
    min_colorCCT_slider.oninput = function() {min_colorCCT_output.innerHTML = (Math.round(this.value));}

    var rise_length_bright_slider = document.getElementById("rise_length_bright_var");
    var rise_length_bright_output = document.getElementById("rise_length_bright_label");
    rise_length_bright_output.innerHTML = rise_length_bright_slider.value;
    rise_length_bright_slider.oninput = function() {rise_length_bright_output.innerHTML = this.value;}

    var rise_length_bright_mult_slider = document.getElementById("rise_length_bright_mult_var");
    var rise_length_bright_mult_output = document.getElementById("rise_length_bright_mult_label");
    rise_length_bright_mult_output.innerHTML = rise_length_bright_mult_slider.value;
    rise_length_bright_mult_slider.oninput = function() {rise_length_bright_mult_output.innerHTML = this.value;}

    var set_length_bright_slider = document.getElementById("set_length_bright_var");
    var set_length_bright_output = document.getElementById("set_length_bright_label");
    set_length_bright_output.innerHTML = set_length_bright_slider.value;
    set_length_bright_slider.oninput = function() {set_length_bright_output.innerHTML = this.value;}

    var set_length_bright_mult_slider = document.getElementById("set_length_bright_mult_var");
    var set_length_bright_mult_output = document.getElementById("set_length_bright_mult_label");
    set_length_bright_mult_output.innerHTML = set_length_bright_mult_slider.value;
    set_length_bright_mult_slider.oninput = function() {set_length_bright_mult_output.innerHTML = this.value;}

    var rise_length_whiteCCT_slider = document.getElementById("rise_length_whiteCCT_var");
    var rise_length_whiteCCT_output = document.getElementById("rise_length_whiteCCT_label");
    rise_length_whiteCCT_output.innerHTML = rise_length_whiteCCT_slider.value;
    rise_length_whiteCCT_slider.oninput = function() {rise_length_whiteCCT_output.innerHTML = this.value;}

    var rise_length_whiteCCT_mult_slider = document.getElementById("rise_length_whiteCCT_mult_var");
    var rise_length_whiteCCT_mult_output = document.getElementById("rise_length_whiteCCT_mult_label");
    rise_length_whiteCCT_mult_output.innerHTML = rise_length_whiteCCT_mult_slider.value;
    rise_length_whiteCCT_mult_slider.oninput = function() {rise_length_whiteCCT_mult_output.innerHTML = this.value;}

    var set_length_whiteCCT_slider = document.getElementById("set_length_whiteCCT_var");
    var set_length_whiteCCT_output = document.getElementById("set_length_whiteCCT_label");
    set_length_whiteCCT_output.innerHTML = set_length_whiteCCT_slider.value;
    set_length_whiteCCT_slider.oninput = function() {set_length_whiteCCT_output.innerHTML = this.value;}

    var set_length_whiteCCT_mult_slider = document.getElementById("set_length_whiteCCT_mult_var");
    var set_length_whiteCCT_mult_output = document.getElementById("set_length_whiteCCT_mult_label");
    set_length_whiteCCT_mult_output.innerHTML = set_length_whiteCCT_mult_slider.value;
    set_length_whiteCCT_mult_slider.oninput = function() {set_length_whiteCCT_mult_output.innerHTML = this.value;}

    var rise_length_colorCCT_slider = document.getElementById("rise_length_colorCCT_var");
    var rise_length_colorCCT_output = document.getElementById("rise_length_colorCCT_label");
    rise_length_colorCCT_output.innerHTML = rise_length_colorCCT_slider.value;
    rise_length_colorCCT_slider.oninput = function() {rise_length_colorCCT_output.innerHTML = this.value;}

    var rise_length_colorCCT_mult_slider = document.getElementById("rise_length_colorCCT_mult_var");
    var rise_length_colorCCT_mult_output = document.getElementById("rise_length_colorCCT_mult_label");
    rise_length_colorCCT_mult_output.innerHTML = rise_length_colorCCT_mult_slider.value;
    rise_length_colorCCT_mult_slider.oninput = function() {rise_length_colorCCT_mult_output.innerHTML = this.value;}

    var set_length_colorCCT_slider = document.getElementById("set_length_colorCCT_var");
    var set_length_colorCCT_output = document.getElementById("set_length_colorCCT_label");
    set_length_colorCCT_output.innerHTML = set_length_colorCCT_slider.value;
    set_length_colorCCT_slider.oninput = function() {set_length_colorCCT_output.innerHTML = this.value;}

    var set_length_colorCCT_mult_slider = document.getElementById("set_length_colorCCT_mult_var");
    var set_length_colorCCT_mult_output = document.getElementById("set_length_colorCCT_mult_label");
    set_length_colorCCT_mult_output.innerHTML = set_length_colorCCT_mult_slider.value;
    set_length_colorCCT_mult_slider.oninput = function() {set_length_colorCCT_mult_output.innerHTML = this.value;}

    var rise_slope_bright_slider = document.getElementById("rise_slope_bright_var");
    var rise_slope_bright_output = document.getElementById("rise_slope_bright_label");
    rise_slope_bright_output.innerHTML = (rise_slope_bright_slider.value);
    rise_slope_bright_slider.oninput = function() {rise_slope_bright_output.innerHTML = (Math.round(this.value));}

    var set_slope_bright_slider = document.getElementById("set_slope_bright_var");
    var set_slope_bright_output = document.getElementById("set_slope_bright_label");
    set_slope_bright_output.innerHTML = (set_slope_bright_slider.value);
    set_slope_bright_slider.oninput = function() {set_slope_bright_output.innerHTML = (Math.round(this.value));}

    var rise_slope_whiteCCT_slider = document.getElementById("rise_slope_whiteCCT_var");
    var rise_slope_whiteCCT_output = document.getElementById("rise_slope_whiteCCT_label");
    rise_slope_whiteCCT_output.innerHTML = (rise_slope_whiteCCT_slider.value);
    rise_slope_whiteCCT_slider.oninput = function() {rise_slope_whiteCCT_output.innerHTML = (Math.round(this.value));}

    var set_slope_whiteCCT_slider = document.getElementById("set_slope_whiteCCT_var");
    var set_slope_whiteCCT_output = document.getElementById("set_slope_whiteCCT_label");
    set_slope_whiteCCT_output.innerHTML = (set_slope_whiteCCT_slider.value);
    set_slope_whiteCCT_slider.oninput = function() {set_slope_whiteCCT_output.innerHTML = (Math.round(this.value));}

    var rise_slope_colorCCT_slider = document.getElementById("rise_slope_colorCCT_var");
    var rise_slope_colorCCT_output = document.getElementById("rise_slope_colorCCT_label");
    rise_slope_colorCCT_output.innerHTML = (rise_slope_colorCCT_slider.value);
    rise_slope_colorCCT_slider.oninput = function() {rise_slope_colorCCT_output.innerHTML = (Math.round(this.value));}

    var set_slope_colorCCT_slider = document.getElementById("set_slope_colorCCT_var");
    var set_slope_colorCCT_output = document.getElementById("set_slope_colorCCT_label");
    set_slope_colorCCT_output.innerHTML = (set_slope_colorCCT_slider.value);
    set_slope_colorCCT_slider.oninput = function() {set_slope_colorCCT_output.innerHTML = (Math.round(this.value));}

    var max_scatdist_slider = document.getElementById("max_scatdist_var");
    var max_scatdist_output = document.getElementById("max_scatdist_label");
    max_scatdist_output.innerHTML = (max_scatdist_slider.value);
    max_scatdist_slider.oninput = function() {max_scatdist_output.innerHTML = (Math.round(this.value));}

    var min_scatdist_slider = document.getElementById("min_scatdist_var");
    var min_scatdist_output = document.getElementById("min_scatdist_label");
    min_scatdist_output.innerHTML = (min_scatdist_slider.value);
    min_scatdist_slider.oninput = function() {min_scatdist_output.innerHTML = (Math.round(this.value));}

    var max_scatangshift_slider = document.getElementById("max_scatangshift_var");
    var max_scatangshift_output = document.getElementById("max_scatangshift_label");
    max_scatangshift_output.innerHTML = (max_scatangshift_slider.value);
    max_scatangshift_slider.oninput = function() {max_scatangshift_output.innerHTML = (Math.round(this.value));}

    var min_scatangshift_slider = document.getElementById("min_scatangshift_var");
    var min_scatangshift_output = document.getElementById("min_scatangshift_label");
    min_scatangshift_output.innerHTML = (min_scatangshift_slider.value);
    min_scatangshift_slider.oninput = function() {min_scatangshift_output.innerHTML = (Math.round(this.value));}

    var max_bright_yellow_slider = document.getElementById("max_bright_yellow_var");
    var max_bright_yellow_output = document.getElementById("max_bright_yellow_label");
    max_bright_yellow_output.innerHTML = (max_bright_yellow_slider.value * 100);
    max_bright_yellow_slider.oninput = function() {max_bright_yellow_output.innerHTML = (Math.round(this.value * 100));}

    var min_bright_yellow_slider = document.getElementById("min_bright_yellow_var");
    var min_bright_yellow_output = document.getElementById("min_bright_yellow_label");
    min_bright_yellow_output.innerHTML = (min_bright_yellow_slider.value * 100);
    min_bright_yellow_slider.oninput = function() {min_bright_yellow_output.innerHTML = (Math.round(this.value * 100));}

    var max_bright_blue_slider = document.getElementById("max_bright_blue_var");
    var max_bright_blue_output = document.getElementById("max_bright_blue_label");
    max_bright_blue_output.innerHTML = (max_bright_blue_slider.value * 100);
    max_bright_blue_slider.oninput = function() {max_bright_blue_output.innerHTML = (Math.round(this.value * 100));}

    var min_bright_blue_slider = document.getElementById("min_bright_blue_var");
    var min_bright_blue_output = document.getElementById("min_bright_blue_label");
    min_bright_blue_output.innerHTML = (min_bright_blue_slider.value * 100);
    min_bright_blue_slider.oninput = function() {min_bright_blue_output.innerHTML = (Math.round(this.value * 100));}

    var rise_length_scatdist_slider = document.getElementById("rise_length_scatdist_var");
    var rise_length_scatdist_output = document.getElementById("rise_length_scatdist_label");
    rise_length_scatdist_output.innerHTML = rise_length_scatdist_slider.value;
    rise_length_scatdist_slider.oninput = function() {rise_length_scatdist_output.innerHTML = this.value;}

    var rise_length_scatdist_mult_slider = document.getElementById("rise_length_scatdist_mult_var");
    var rise_length_scatdist_mult_output = document.getElementById("rise_length_scatdist_mult_label");
    rise_length_scatdist_mult_output.innerHTML = rise_length_scatdist_mult_slider.value;
    rise_length_scatdist_mult_slider.oninput = function() {rise_length_scatdist_mult_output.innerHTML = this.value;}

    var set_length_scatdist_slider = document.getElementById("set_length_scatdist_var");
    var set_length_scatdist_output = document.getElementById("set_length_scatdist_label");
    set_length_scatdist_output.innerHTML = set_length_scatdist_slider.value;
    set_length_scatdist_slider.oninput = function() {set_length_scatdist_output.innerHTML = this.value;}

    var set_length_scatdist_mult_slider = document.getElementById("set_length_scatdist_mult_var");
    var set_length_scatdist_mult_output = document.getElementById("set_length_scatdist_mult_label");
    set_length_scatdist_mult_output.innerHTML = set_length_scatdist_mult_slider.value;
    set_length_scatdist_mult_slider.oninput = function() {set_length_scatdist_mult_output.innerHTML = this.value;}

    var rise_length_scatangshift_slider = document.getElementById("rise_length_scatangshift_var");
    var rise_length_scatangshift_output = document.getElementById("rise_length_scatangshift_label");
    rise_length_scatangshift_output.innerHTML = rise_length_scatangshift_slider.value;
    rise_length_scatangshift_slider.oninput = function() {rise_length_scatangshift_output.innerHTML = this.value;}

    var rise_length_scatangshift_mult_slider = document.getElementById("rise_length_scatangshift_mult_var");
    var rise_length_scatangshift_mult_output = document.getElementById("rise_length_scatangshift_mult_label");
    rise_length_scatangshift_mult_output.innerHTML = rise_length_scatangshift_mult_slider.value;
    rise_length_scatangshift_mult_slider.oninput = function() {rise_length_scatangshift_mult_output.innerHTML = this.value;}

    var set_length_scatangshift_slider = document.getElementById("set_length_scatangshift_var");
    var set_length_scatangshift_output = document.getElementById("set_length_scatangshift_label");
    set_length_scatangshift_output.innerHTML = set_length_scatangshift_slider.value;
    set_length_scatangshift_slider.oninput = function() {set_length_scatangshift_output.innerHTML = this.value;}

    var set_length_scatangshift_mult_slider = document.getElementById("set_length_scatangshift_mult_var");
    var set_length_scatangshift_mult_output = document.getElementById("set_length_scatangshift_mult_label");
    set_length_scatangshift_mult_output.innerHTML = set_length_scatangshift_mult_slider.value;
    set_length_scatangshift_mult_slider.oninput = function() {set_length_scatangshift_mult_output.innerHTML = this.value;}

    var rise_length_bright_yellow_slider = document.getElementById("rise_length_bright_yellow_var");
    var rise_length_bright_yellow_output = document.getElementById("rise_length_bright_yellow_label");
    rise_length_bright_yellow_output.innerHTML = rise_length_bright_yellow_slider.value;
    rise_length_bright_yellow_slider.oninput = function() {rise_length_bright_yellow_output.innerHTML = this.value;}

    var rise_length_bright_yellow_mult_slider = document.getElementById("rise_length_bright_yellow_mult_var");
    var rise_length_bright_yellow_mult_output = document.getElementById("rise_length_bright_yellow_mult_label");
    rise_length_bright_yellow_mult_output.innerHTML = rise_length_bright_yellow_mult_slider.value;
    rise_length_bright_yellow_mult_slider.oninput = function() {rise_length_bright_yellow_mult_output.innerHTML = this.value;}

    var set_length_bright_yellow_slider = document.getElementById("set_length_bright_yellow_var");
    var set_length_bright_yellow_output = document.getElementById("set_length_bright_yellow_label");
    set_length_bright_yellow_output.innerHTML = set_length_bright_yellow_slider.value;
    set_length_bright_yellow_slider.oninput = function() {set_length_bright_yellow_output.innerHTML = this.value;}

    var set_length_bright_yellow_mult_slider = document.getElementById("set_length_bright_yellow_mult_var");
    var set_length_bright_yellow_mult_output = document.getElementById("set_length_bright_yellow_mult_label");
    set_length_bright_yellow_mult_output.innerHTML = set_length_bright_yellow_mult_slider.value;
    set_length_bright_yellow_mult_slider.oninput = function() {set_length_bright_yellow_mult_output.innerHTML = this.value;}

    var rise_length_bright_blue_slider = document.getElementById("rise_length_bright_blue_var");
    var rise_length_bright_blue_output = document.getElementById("rise_length_bright_blue_label");
    rise_length_bright_blue_output.innerHTML = rise_length_bright_blue_slider.value;
    rise_length_bright_blue_slider.oninput = function() {rise_length_bright_blue_output.innerHTML = this.value;}

    var rise_length_bright_blue_mult_slider = document.getElementById("rise_length_bright_blue_mult_var");
    var rise_length_bright_blue_mult_output = document.getElementById("rise_length_bright_blue_mult_label");
    rise_length_bright_blue_mult_output.innerHTML = rise_length_bright_blue_mult_slider.value;
    rise_length_bright_blue_mult_slider.oninput = function() {rise_length_bright_blue_mult_output.innerHTML = this.value;}

    var set_length_bright_blue_slider = document.getElementById("set_length_bright_blue_var");
    var set_length_bright_blue_output = document.getElementById("set_length_bright_blue_label");
    set_length_bright_blue_output.innerHTML = set_length_bright_blue_slider.value;
    set_length_bright_blue_slider.oninput = function() {set_length_bright_blue_output.innerHTML = this.value;}

    var set_length_bright_blue_mult_slider = document.getElementById("set_length_bright_blue_mult_var");
    var set_length_bright_blue_mult_output = document.getElementById("set_length_bright_blue_mult_label");
    set_length_bright_blue_mult_output.innerHTML = set_length_bright_blue_mult_slider.value;
    set_length_bright_blue_mult_slider.oninput = function() {set_length_bright_blue_mult_output.innerHTML = this.value;}
    
    var rise_slope_scatdist_slider = document.getElementById("rise_slope_scatdist_var");
    var rise_slope_scatdist_output = document.getElementById("rise_slope_scatdist_label");
    rise_slope_scatdist_output.innerHTML = (rise_slope_scatdist_slider.value);
    rise_slope_scatdist_slider.oninput = function() {rise_slope_scatdist_output.innerHTML = (Math.round(this.value));}

    var set_slope_scatdist_slider = document.getElementById("set_slope_scatdist_var");
    var set_slope_scatdist_output = document.getElementById("set_slope_scatdist_label");
    set_slope_scatdist_output.innerHTML = (set_slope_scatdist_slider.value);
    set_slope_scatdist_slider.oninput = function() {set_slope_scatdist_output.innerHTML = (Math.round(this.value));}
    
    var rise_slope_scatangshift_slider = document.getElementById("rise_slope_scatangshift_var");
    var rise_slope_scatangshift_output = document.getElementById("rise_slope_scatangshift_label");
    rise_slope_scatangshift_output.innerHTML = (rise_slope_scatangshift_slider.value);
    rise_slope_scatangshift_slider.oninput = function() {rise_slope_scatangshift_output.innerHTML = (Math.round(this.value));}

    var set_slope_scatangshift_slider = document.getElementById("set_slope_scatangshift_var");
    var set_slope_scatangshift_output = document.getElementById("set_slope_scatangshift_label");
    set_slope_scatangshift_output.innerHTML = (set_slope_scatangshift_slider.value);
    set_slope_scatangshift_slider.oninput = function() {set_slope_scatangshift_output.innerHTML = (Math.round(this.value));}

    var rise_slope_bright_yellow_slider = document.getElementById("rise_slope_bright_yellow_var");
    var rise_slope_bright_yellow_output = document.getElementById("rise_slope_bright_yellow_label");
    rise_slope_bright_yellow_output.innerHTML = (rise_slope_bright_yellow_slider.value);
    rise_slope_bright_yellow_slider.oninput = function() {rise_slope_bright_yellow_output.innerHTML = (Math.round(this.value));}

    var set_slope_bright_yellow_slider = document.getElementById("set_slope_bright_yellow_var");
    var set_slope_bright_yellow_output = document.getElementById("set_slope_bright_yellow_label");
    set_slope_bright_yellow_output.innerHTML = (set_slope_bright_yellow_slider.value);
    set_slope_bright_yellow_slider.oninput = function() {set_slope_bright_yellow_output.innerHTML = (Math.round(this.value));}

    var rise_slope_bright_blue_slider = document.getElementById("rise_slope_bright_blue_var");
    var rise_slope_bright_blue_output = document.getElementById("rise_slope_bright_blue_label");
    rise_slope_bright_blue_output.innerHTML = (rise_slope_bright_blue_slider.value);
    rise_slope_bright_blue_slider.oninput = function() {rise_slope_bright_blue_output.innerHTML = (Math.round(this.value));}

    var set_slope_bright_blue_slider = document.getElementById("set_slope_bright_blue_var");
    var set_slope_bright_blue_output = document.getElementById("set_slope_bright_blue_label");
    set_slope_bright_blue_output.innerHTML = (set_slope_bright_blue_slider.value);
    set_slope_bright_blue_slider.oninput = function() {set_slope_bright_blue_output.innerHTML = (Math.round(this.value));}
    //document.getElementById("simulated_time_var").disabled = "true";

    var alt_slider = document.getElementById("alt_var");
    var alt_output = document.getElementById("alt_label");
    alt_output.innerHTML = (alt_slider.value);
    alt_slider.oninput = function() {alt_output.innerHTML = (Math.round(this.value));}

    var az_slider = document.getElementById("az_var");
    var az_output = document.getElementById("az_label");
    az_output.innerHTML = (az_slider.value);
    az_slider.oninput = function() {az_output.innerHTML = (Math.round(this.value));}
    
    var min_sun_rad_slider = document.getElementById("min_sun_rad_var");
    var min_sun_rad_output = document.getElementById("min_sun_rad_label");
    min_sun_rad_output.innerHTML = (min_sun_rad_slider.value);
    min_sun_rad_slider.oninput = function() {min_sun_rad_output.innerHTML = (Math.round(this.value));}

    var range_sun_rad_slider = document.getElementById("range_sun_rad_var");
    var range_sun_rad_output = document.getElementById("range_sun_rad_label");
    range_sun_rad_output.innerHTML = (range_sun_rad_slider.value);
    range_sun_rad_slider.oninput = function() {range_sun_rad_output.innerHTML = (Math.round(this.value));}

    var lat_slider = document.getElementById("lat_var");
    var lat_output = document.getElementById("lat_label");
    var lat_sig = (Number.parseFloat(lat_slider.value).toPrecision(3));
    lat_output.innerHTML = (lat_slider.value);
    lat_slider.oninput = function() {if (lat_slider.value > 0) {lat_output.innerHTML = (Number.parseFloat(lat_slider.value).toFixed(1) + "° North")} else if (lat_slider.value < 0) {lat_output.innerHTML = (Number.parseFloat(Math.abs(lat_slider.value)).toFixed(1) + "° South")} else {lat_output.innerHTML = (Number.parseFloat(lat_slider.value).toFixed(1) + "°")};}
    
    var long_slider = document.getElementById("long_var");
    var long_output = document.getElementById("long_label");
    long_output.innerHTML = (long_slider.value);
    long_slider.oninput = function() {if (long_slider.value > 0) {long_output.innerHTML = (Number.parseFloat(long_slider.value).toFixed(1) + "° East")} else if (long_slider.value < 0) {long_output.innerHTML = (Number.parseFloat(Math.abs(long_slider.value)).toFixed(1) + "° West")} else {long_output.innerHTML = (Number.parseFloat(long_slider.value).toFixed(1) + "°")};}

    var rise_max_bright_blue_alt_slider = document.getElementById("rise_max_bright_blue_alt_var");
    var rise_max_bright_blue_alt_output = document.getElementById("rise_max_bright_blue_alt_label");
    rise_max_bright_blue_alt_output.innerHTML = (rise_max_bright_blue_alt_slider.value);
    rise_max_bright_blue_alt_slider.oninput = function() {rise_max_bright_blue_alt_output.innerHTML = (Number.parseFloat(rise_max_bright_blue_alt_slider.value).toFixed(1));}

    var rise_min_bright_blue_alt_slider = document.getElementById("rise_min_bright_blue_alt_var");
    var rise_min_bright_blue_alt_output = document.getElementById("rise_min_bright_blue_alt_label");
    rise_min_bright_blue_alt_output.innerHTML = (rise_min_bright_blue_alt_slider.value);
    rise_min_bright_blue_alt_slider.oninput = function() {rise_min_bright_blue_alt_output.innerHTML = (Number.parseFloat(rise_min_bright_blue_alt_slider.value).toFixed(1));}

    var rise_max_bright_yellow_alt_slider = document.getElementById("rise_max_bright_yellow_alt_var");
    var rise_max_bright_yellow_alt_output = document.getElementById("rise_max_bright_yellow_alt_label");
    rise_max_bright_yellow_alt_output.innerHTML = (rise_max_bright_yellow_alt_slider.value);
    rise_max_bright_yellow_alt_slider.oninput = function() {rise_max_bright_yellow_alt_output.innerHTML = (Number.parseFloat(rise_max_bright_yellow_alt_slider.value).toFixed(1));}

    var rise_min_bright_yellow_alt_slider = document.getElementById("rise_min_bright_yellow_alt_var");
    var rise_min_bright_yellow_alt_output = document.getElementById("rise_min_bright_yellow_alt_label");
    rise_min_bright_yellow_alt_output.innerHTML = (rise_min_bright_yellow_alt_slider.value);
    rise_min_bright_yellow_alt_slider.oninput = function() {rise_min_bright_yellow_alt_output.innerHTML = (Number.parseFloat(rise_min_bright_yellow_alt_slider.value).toFixed(1));}

    var set_max_bright_blue_alt_slider = document.getElementById("set_max_bright_blue_alt_var");
    var set_max_bright_blue_alt_output = document.getElementById("set_max_bright_blue_alt_label");
    set_max_bright_blue_alt_output.innerHTML = (set_max_bright_blue_alt_slider.value);
    set_max_bright_blue_alt_slider.oninput = function() {set_max_bright_blue_alt_output.innerHTML = (Number.parseFloat(set_max_bright_blue_alt_slider.value).toFixed(1));}

    var set_min_bright_blue_alt_slider = document.getElementById("set_min_bright_blue_alt_var");
    var set_min_bright_blue_alt_output = document.getElementById("set_min_bright_blue_alt_label");
    set_min_bright_blue_alt_output.innerHTML = (set_min_bright_blue_alt_slider.value);
    set_min_bright_blue_alt_slider.oninput = function() {set_min_bright_blue_alt_output.innerHTML = (Number.parseFloat(set_min_bright_blue_alt_slider.value).toFixed(1));}

    var set_max_bright_yellow_alt_slider = document.getElementById("set_max_bright_yellow_alt_var");
    var set_max_bright_yellow_alt_output = document.getElementById("set_max_bright_yellow_alt_label");
    set_max_bright_yellow_alt_output.innerHTML = (set_max_bright_yellow_alt_slider.value);
    set_max_bright_yellow_alt_slider.oninput = function() {set_max_bright_yellow_alt_output.innerHTML = (Number.parseFloat(set_max_bright_yellow_alt_slider.value).toFixed(1));}

    var set_min_bright_yellow_alt_slider = document.getElementById("set_min_bright_yellow_alt_var");
    var set_min_bright_yellow_alt_output = document.getElementById("set_min_bright_yellow_alt_label");
    set_min_bright_yellow_alt_output.innerHTML = (set_min_bright_yellow_alt_slider.value);
    set_min_bright_yellow_alt_slider.oninput = function() {set_min_bright_yellow_alt_output.innerHTML = (Number.parseFloat(set_min_bright_yellow_alt_slider.value).toFixed(1));}

    lineremover()

    visualizerscheduler = setInterval(() => {
      lineremover()
    }, 300000); 

</script>

</body>
</html>
